"use strict";(self.webpackChunkhajk_client=self.webpackChunkhajk_client||[]).push([[4784,1960,2389,6542],{24784:(e,t,r)=>{r.r(t);var s=r(72791),n=r(20890),a=r(82389),o=r(21960),p=r(68870),i=r(80184);class l extends s.PureComponent{constructor(e){super(e),this.state={popupImage:null,activeContent:null},this.bindPrintSpecificHandlers=()=>{const{localObserver:e,model:t}=this.props;e.unsubscribe("append-chapter-components"),e.subscribe("append-document-components",(r=>{let s=[],n=[];r.forEach((e=>{if(e.isGroupHeader)n.push(this.createGroupHeadingTag(e.title,e.id)),s.push(n),n=[];else{e.chapters.forEach((e=>{t.appendComponentsToChapter(e)}));let r=[],n=(0,o.flattenChaptersTree)(e.chapters);n=n.map((e=>{if(e.mustReplace){e={}}return e})),r.push(this.renderChapters(n,!0)),s.push(r)}})),e.publish("chapter-components-appended",s)}))},this.componentDidMount=()=>{const{localObserver:e}=this.props;this.bindPrintSpecificHandlers(),e.subscribe("image-popup",this.showPopupModal)},this.componentWillUnmount=()=>{const{localObserver:e}=this.props;e.unsubscribe("chapter-components-appended")},this.closePopupModal=()=>{this.setState({popupImage:null})},this.showPopupModal=e=>{this.setState({popupImage:e})},this.renderImageInModal=()=>{const{popupImage:e}=this.state;return(0,i.jsx)(a.default,{open:null!=e,close:this.closePopupModal,image:e})},this.createGroupHeadingTag=(e,t)=>(0,i.jsx)(n.Z,{"data-type":"chapter-header",variant:"h1",children:e},t),this.renderChapters=(e,t)=>Array.isArray(e)?e.map((e=>this.renderChapter(e,t))):null,this.renderChapter=(e,t)=>(0,i.jsxs)(s.Fragment,{children:[this.renderHeadline(e,t),e.components,Array.isArray(e.chapters)?e.chapters.map((e=>this.renderChapter(e))):null]},e.id),this.getHeaderVariant=(e,t)=>{let r=2;if(t)return r+=e.level,"h".concat(r);for(;e.parent;)r++,e=e.parent;return"h".concat(r)},this.renderHeadline=(e,t)=>(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(n.Z,{ref:e.scrollRef,sx:{overflowWrap:"break-word"},"data-type":"chapter-header",variant:this.getHeaderVariant(e,t),children:e.header})}),this.render=()=>this.props.activeDocument?(0,i.jsxs)(p.Z,{style:{display:"block",maxWidth:"100%"},children:[this.renderImageInModal(),this.renderChapters(this.props.activeDocument.chapters)]}):null,this.internalIds=[]}}t.default=l},82389:(e,t,r)=>{r.r(t);var s=r(72791),n=r(66934),a=r(13400),o=r(29823),p=r(5289),i=r(35527),l=r(80184);const h=document.getElementById("map"),c="filter : blur(7px)",d=(0,n.ZP)(a.Z)((e=>{let{theme:t}=e;return{position:"absolute",backgroundColor:t.palette.grey[50],"&:hover":{backgroundColor:t.palette.grey[400]},zIndex:100,right:t.spacing(2),top:t.spacing(2)}})),u=(0,n.ZP)(i.Z)((()=>({maxHeight:"80%",maxWidth:"90%",overflow:"auto",backgroundColor:"transparent",boxShadow:"none",objectFit:"contain"})));function m(e){const{component:t,onClose:r,src:s,altValue:n}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(d,{size:"small",onClick:r,children:(0,l.jsx)(o.Z,{})}),(0,l.jsx)(u,{alt:n,component:t,src:s})]})}class g extends s.PureComponent{constructor(){super(...arguments),this.removeMapBlur=()=>{h.removeAttribute("style",c)},this.addMapBlur=()=>{h.setAttribute("style",c)},this.componentWillUnmount=()=>{this.removeMapBlur()},this.componentDidMount=()=>{}}render(){const{open:e,close:t,image:r}=this.props;return e?this.addMapBlur():this.removeMapBlur(),(0,l.jsx)(p.Z,{maxWidth:"lg",onBackdropClick:t,PaperComponent:m,PaperProps:{component:"img",onClose:t,src:null===r||void 0===r?void 0:r.url,altValue:null===r||void 0===r?void 0:r.altValue},open:e})}}t.default=g},21960:(e,t,r)=>{r.r(t),r.d(t,{flattenChaptersTree:()=>o,getStringArray:()=>n,hasSubMenu:()=>a,splitAndTrimOnCommas:()=>s});const s=e=>e.split(",").map((e=>e.trim())),n=e=>s(e).join(" ").split(" "),a=e=>e.menu&&e.menu.length>0,o=e=>e.reduce(((e,t)=>{if(t.header){let r={...t};r.chapters=[],e=[...e,r]}return t.chapters&&t.chapters.length>0?[...e,...o(t.chapters)]:e}),[])}}]);
//# sourceMappingURL=4784.e26b5a95.chunk.js.map