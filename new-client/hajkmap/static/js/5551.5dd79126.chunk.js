"use strict";(self.webpackChunkhajk_client=self.webpackChunkhajk_client||[]).push([[5551,5354,3251,5502],{65551:(e,t,s)=>{s.r(t);var i=s(72791),n=s(10361),o=s(98008),r=s(66934),l=s(79495),a=s(71410),d=s(85194),c=s.n(d),h=s(75354),p=s(61979),u=s(9933),m=s(38283),b=s(80184);const v=(0,r.ZP)("div")((e=>{let{theme:t}=e;return{display:"inline-flex",alignItems:"center",[t.breakpoints.up("md")]:{marginRight:t.spacing(1)}}}));class g extends i.PureComponent{constructor(e){super(e),this.state={document:null,documentWindowMaximized:!0,showPrintWindow:!1,chapters:[],documentColor:null,model:null},this.componentDidUpdate=e=>{const{theme:t}=this.props;e.theme.palette.mode!==t.palette.mode&&this.setState((e=>({customTheme:{...e.customTheme,palette:{...e.customTheme.palette,mode:t.palette.mode}}})))},this.getThemeWithCustomThemeApplied=e=>{const{theme:t}=this.props;return e.typography&&this.setBottomMarginsForTypographyVariants(e),(0,p.Z)((0,m.deepMerge)(t,e))},this.setBottomMarginsForTypographyVariants=e=>{["body1","h1","h2","h3","h4","h5","h6"].forEach((t=>{if(e.typography[t]){var s;(null===(s=e.typography[t])||void 0===s?void 0:s.marginBottom)||(e.typography[t].marginBottom=this.props.theme.spacing(1)||"8px")}}))},this.dynamicallyImportCustomFont=()=>{const{dynamicImportUrls:e}=this.props.options;return e.customFont?(0,b.jsx)("link",{rel:"stylesheet",type:"text/css",href:e.customFont}):null},this.dynamicallyImportIconFonts=()=>{const{dynamicImportUrls:e}=this.props.options;return e.iconFonts?(0,b.jsx)("link",{rel:"stylesheet",href:e.iconFonts}):null},this.renderDrawerContent=()=>{const{app:e,model:t,options:s}=this.props;return(0,b.jsx)(a.default,{app:e,document:this.state.document,model:t,options:s,localObserver:this.localObserver})},this.addDrawerToggleButton=()=>{const{app:e,options:t}=this.props;e.globalObserver.publish("core.addSrShortcuts",[{title:"Till huvudmeny f\xf6r webbplatsen",link:"#panelmenu"}]),e.globalObserver.publish("core.addDrawerToggleButton",{value:"documenthandler",ButtonIcon:t.drawerButtonIcon?this.getIcon(t.drawerButtonIcon):o.Z,caption:t.drawerButtonTitle||"Meny",drawerTitle:t.drawerTitle||"\xd6versiktsplan",order:100,renderDrawerContent:this.renderDrawerContent})},this.showDocument=e=>{const{app:t}=this.props;return this.setActiveDocument(e).then((()=>{t.globalObserver.publish("documentviewer.showWindow",{hideOtherPlugins:!1}),t.globalObserver.publish("core.maximizeWindow")}))},this.onWindowHide=()=>{this.localObserver.publish("set-active-document",{documentName:null,headerIdentifier:null}),this.localObserver.publish("document-window-closed")},this.onMinimize=()=>{this.setState({documentWindowMaximized:!1})},this.onMaximize=()=>{this.setState({documentWindowMaximized:!0})},this.setActiveDocument=e=>new Promise(((t,s)=>{let i=null;e&&(i=this.state.model.getDocuments([e])[0]),i?this.setState({document:i,showPrintWindow:!1},t):s()})),this.togglePrintWindow=()=>{this.setState({showPrintWindow:!this.state.showPrintWindow})},this.getIcon=e=>{const{dynamicImportUrls:t}=this.props.options;return t.iconFonts?t=>(0,b.jsx)(v,{children:(0,b.jsx)("span",{className:"material-icons ".concat(t.className),children:e})}):null},this.localObserver=c()(),this.mapViewModel=new h.default({appModel:e.app,localObserver:this.localObserver,globalObserver:e.app.globalObserver,map:e.map}),this.props.searchInterface.getSearchMethods=new Promise((t=>{new l.default({localObserver:this.localObserver,app:e.app,map:e.map,menu:e.options.menuConfig.menu,resolveSearchInterface:t,options:e.options}).init().then((e=>e.fetchCustomThemeJson().then((t=>{this.setState({model:e,customTheme:this.getThemeWithCustomThemeApplied(t)},(()=>{this.addDrawerToggleButton()}))}))))}))}render(){return(0,b.jsxs)(b.Fragment,{children:[this.dynamicallyImportCustomFont(),this.dynamicallyImportIconFonts(),(0,b.jsx)(n.default,{...this.props,onMinimize:this.onMinimize,showDocument:this.showDocument,onMaximize:this.onMaximize,customTheme:this.state.customTheme,onWindowHide:this.onWindowHide,togglePrintWindow:this.togglePrintWindow,document:this.state.document,documentColor:this.state.documentColor,documentWindowMaximized:this.state.documentWindowMaximized,showPrintWindow:this.state.showPrintWindow,chapters:this.state.chapters,model:this.state.model,localObserver:this.localObserver})]})}}t.default=(0,u.b)(g)},75354:(e,t,s)=>{s.r(t),s.d(t,{default:()=>i});class i{constructor(e){this.convertMapSettingsUrlToOlSettings=e=>{try{const t=new URLSearchParams(e);let s;return s=t.has("x")&&t.has("y")?[t.get("x"),t.get("y")]:this.map.getView().getCenter(),{center:s,zoom:t.get("z")||this.map.getView().getZoom(),layers:t.get("l"),groupLayers:t.get("gl")||"{}"}}catch(t){return console.error(t),{center:this.map.getView().getCenter(),zoom:this.map.getView().getZoom(),layers:null,groupLayers:"{}"}}},this.bindSubscriptions=()=>{this.localObserver.subscribe("fly-to",(e=>{this.globalObserver.publish("core.minimizeWindow");const t=this.convertMapSettingsUrlToOlSettings(e);null!==t.layers&&this.appModel.setLayerVisibilityFromParams(t.layers,t.groupLayers),this.flyTo(this.map.getView(),t.center,t.zoom)}))},this.appModel=e.appModel,this.localObserver=e.localObserver,this.globalObserver=e.globalObserver,this.map=e.map,this.bindSubscriptions()}flyTo(e,t,s){e.animate({center:t,zoom:s,duration:1500}),this.localObserver.publish("map-animation-complete")}}},73258:(e,t,s)=>{s.r(t);var i=s(66274),n=s(99359),o=s(72791),r=s(90493),l=s(75396),a=s(80184),d=(0,n.Z)("getSubMenuItems"),c=(0,n.Z)("renderMenuItem");class h extends o.PureComponent{constructor(){super(...arguments),this.getMenuItemType=(e,t)=>(0,a.jsx)(l.default,{...this.props,type:t,menu:e.menu,icon:e.icon,id:e.id,level:e.level,color:e.color,title:e.title,itemRef:e.itemRef,subMenuItems:(0,i.Z)(this,d)[d](e),expanded:e.expandedSubMenu,colored:e.colored,selected:e.selected}),Object.defineProperty(this,d,{writable:!0,value:e=>e.menuItemIds.reduce(((e,t)=>{const s=Object.values(this.props.items).find((e=>e.id===t));return s.menuItemIds.length>0&&(e=[...e,...(0,i.Z)(this,d)[d](s)]),[...e,s]}),[])}),Object.defineProperty(this,c,{writable:!0,value:e=>e.menuItemIds&&e.menuItemIds.length>0?this.getMenuItemType(e,"submenu"):e.document?this.getMenuItemType(e,"document"):e.link?this.getMenuItemType(e,"link"):e.maplink?this.getMenuItemType(e,"maplink"):void 0})}render(){const{items:e,level:t}=this.props;return(0,a.jsx)(r.Z,{style:{position:"static"},disablePadding:!0,id:"panellist_".concat(t),role:"navigation",component:"nav",children:Object.values(e).filter((e=>e.level===t)).map((e=>(0,a.jsx)(o.Fragment,{children:(0,i.Z)(this,c)[c](e,e.id)},e.id)))})}}t.default=h},71410:(e,t,s)=>{s.r(t);var i=s(66274),n=s(99359),o=s(72791),r=s(73258),l=s(68870),a=s(85286),d=s(38629),c=s(45280),h=s(21960),p=s(54711),u=s(55502),m=s(80184),b=(0,n.Z)("bindSubscriptions"),v=(0,n.Z)("initializeItems"),g=(0,n.Z)("setInitialMenuItemProperties"),w=(0,n.Z)("handleOpenDocumentFromLink"),y=(0,n.Z)("handleOpenDocumentFromPanelMenu"),f=(0,n.Z)("openEventualConnections"),Z=(0,n.Z)("handleShowMapLayers"),O=(0,n.Z)("closeDocumentWindow"),M=(0,n.Z)("handleShowMapLayersFromLink"),I=(0,n.Z)("handleShowMapLayersFromPanelMenu"),x=(0,n.Z)("handleSubMenuClicked"),j=(0,n.Z)("handleExternalLinkClicked"),P=(0,n.Z)("setClickedItemProperties"),S=(0,n.Z)("setNonClickedItemProperties"),k=(0,n.Z)("setItemStateProperties"),T=(0,n.Z)("clearPanel"),C=(0,n.Z)("scrollToMenuItem"),W=(0,n.Z)("setDocument"),L=(0,n.Z)("delayAndFlyToMapLink"),z=(0,n.Z)("getNextUniqueId");class D extends o.PureComponent{constructor(e){var t;super(e),t=this,this.internalId=0,this.state={},this.componentDidMount=()=>{(0,i.Z)(this,v)[v]()},Object.defineProperty(this,b,{writable:!0,value:()=>{const{localObserver:e}=this.props;e.subscribe("submenu-clicked",(0,i.Z)(this,x)[x]),e.subscribe("document-link-clicked",(0,i.Z)(this,w)[w]),e.subscribe("document-clicked",(0,i.Z)(this,f)[f]),e.subscribe("link-clicked",(0,i.Z)(this,j)[j]),e.subscribe("document-maplink-clicked",(0,i.Z)(this,M)[M]),e.subscribe("maplink-clicked",(0,i.Z)(this,I)[I]),e.subscribe("document-window-closed",(0,i.Z)(this,T)[T])}}),Object.defineProperty(this,v,{writable:!0,value:()=>{const{options:e}=this.props;e.menuConfig.menu.forEach((0,i.Z)(this,g)[g]),this.setState((0,p.getNormalizedMenuState)(e.menuConfig.menu))}}),Object.defineProperty(this,g,{writable:!0,value:e=>{const{document:t,options:s={}}=this.props,n=t&&e.document===t.documentFileName||""!==s.documentOnStart&&s.documentOnStart===e.document;Object.assign(e,{id:(0,i.Z)(this,z)[z](),selected:n,colored:n}),(0,h.hasSubMenu)(e)&&(e.hasSubMenu=!0,e.menu.forEach((t=>{(0,i.Z)(this,g)[g](t,e)})))}}),Object.defineProperty(this,w,{writable:!0,value:e=>{let{documentName:t,headerIdentifier:s}=e;const n=(0,u.findMenuItemWithDocumentName)(t,this.state);(0,i.Z)(this,W)[W](t,s),(0,i.Z)(this,k)[k](n.id).then((()=>{(0,i.Z)(this,C)[C](n.itemRef.current.offsetTop)}))}}),Object.defineProperty(this,y,{writable:!0,value:e=>{const{app:t}=this.props,{document:s}=this.state[e];s&&((0,i.Z)(this,W)[W](s,null),(0,i.Z)(this,k)[k](e).then((()=>{t.globalObserver.publish("core.onlyHideDrawerIfNeeded")})))}}),Object.defineProperty(this,f,{writable:!0,value:e=>{(0,i.Z)(this,y)[y](e),(0,i.Z)(this,j)[j](e),(0,i.Z)(this,I)[I](e)}}),Object.defineProperty(this,Z,{writable:!0,value:e=>{const{options:t,localObserver:s,app:n}=this.props;t.displayLoadingOnMapLinkOpen&&s.publish("maplink-loading"),n.globalObserver.publish("core.onlyHideDrawerIfNeeded"),(0,i.Z)(this,L)[L](e)}}),Object.defineProperty(this,O,{writable:!0,value:()=>{const{app:e}=this.props;(0,i.Z)(this,W)[W](),e.globalObserver.publish("documentviewer.closeWindow")}}),Object.defineProperty(this,M,{writable:!0,value:e=>{(0,a.getIsMobile)()&&(0,i.Z)(this,O)[O](),(0,i.Z)(this,Z)[Z](e)}}),Object.defineProperty(this,I,{writable:!0,value:e=>{const{options:t}=this.props,{maplink:s}=this.state[e];s&&(((0,a.getIsMobile)()||t.closePanelOnMapLinkOpen)&&(0,i.Z)(this,O)[O](),(0,i.Z)(this,Z)[Z](this.state[e].maplink))}}),Object.defineProperty(this,x,{writable:!0,value:e=>{(0,i.Z)(this,y)[y](e),(0,i.Z)(this,j)[j](e),(0,i.Z)(this,I)[I](e),(0,i.Z)(this,k)[k](e)}}),Object.defineProperty(this,j,{writable:!0,value:e=>{const{app:t}=this.props,{link:s}=this.state[e];s&&(window.open(this.state[e].link,"_blank"),t.globalObserver.publish("core.onlyHideDrawerIfNeeded"))}}),Object.defineProperty(this,P,{writable:!0,value:e=>{let t={...e};return{...e,colored:!(0,u.isExpandedTopLevelItem)(t),selected:!t.hasSubMenu,expandedSubMenu:t.hasSubMenu?!t.expandedSubMenu:t.expandedSubMenu}}}),Object.defineProperty(this,S,{writable:!0,value:(e,t,s)=>{const i=(0,u.getItemIdsToColor)(s,t);return{...e,colored:-1!==i.indexOf(e.id),expandedSubMenu:-1!==s.allParents.indexOf(e.id)||e.expandedSubMenu,selected:!!s.hasSubMenu&&e.selected}}}),Object.defineProperty(this,k,{writable:!0,value:e=>new Promise((t=>{const s={...this.state},n=s[e],o=Object.values(s).reduce(((t,o)=>o.id===e?{...t,[o.id]:(0,i.Z)(this,P)[P](o)}:{...t,[o.id]:(0,i.Z)(this,S)[S](o,s,n)}),{});this.setState(o,t)}))}),Object.defineProperty(this,T,{writable:!0,value:()=>{let e=Object.values({...this.state}).reduce(((e,t)=>{let s={...t};return s.colored=!1,s.selected=!1,{...e,[s.id]:s}}),{});this.setState(e)}}),Object.defineProperty(this,C,{writable:!0,value:async e=>{c.NY.scrollTo(e,{containerId:"panelListWrapper",smooth:!1,isDynamic:!0,delay:0})}}),Object.defineProperty(this,W,{writable:!0,value:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const{localObserver:i}=t.props;i.publish("set-active-document",{documentName:e,headerIdentifier:s})}}),Object.defineProperty(this,L,{writable:!0,value:async e=>{await(0,d.delay)(100),this.props.localObserver.publish("fly-to",e)}}),Object.defineProperty(this,z,{writable:!0,value:()=>(this.internalId+=1,this.internalId)}),(0,i.Z)(this,b)[b]()}render(){const{app:e,localObserver:t}=this.props;return(0,m.jsx)(l.Z,{id:"panelListWrapper",sx:{maxHeight:"100%",position:"relative",overflow:"auto"},children:(0,m.jsx)(r.default,{app:e,localObserver:t,level:0,items:this.state})})}}t.default=D},75396:(e,t,s)=>{s.r(t);var i=s(66274),n=s(99359),o=s(72791),r=s(66934),l=s(9933),a=s(99875),d=s(45484),c=s(56125),h=s(49900),p=s(57064),u=s(22885),m=s(73258),b=s(81131),v=s(95573),g=s(80184);const w=(0,r.ZP)(p.Z)((e=>{let{theme:t}=e;return{minWidth:t.spacing(3)}})),y=(0,r.ZP)(p.Z)((e=>{let{theme:t}=e;return{".MuiListItemIcon-root":{minWidth:t.spacing(4)}}})),f=(0,r.ZP)(d.ZP)((e=>{let{theme:t}=e;return{overflowWrap:"break-word",".MuiListItem-root":{borderLeft:"".concat(t.spacing(1)," solid ").concat(t.palette.background.paper),"&.Mui-selected":{borderLeftColor:t.palette.action.selected},"&.Mui-selected:hover":{borderLeftColor:t.palette.action.selected},"&:hover":{borderColor:t.palette.action.hover}}}}));var Z=(0,n.Z)("getListTitle"),O=(0,n.Z)("getCollapseIcon"),M=(0,n.Z)("getListIcon"),I=(0,n.Z)("hasSubMenu"),x=(0,n.Z)("handleMenuButtonClick"),j=(0,n.Z)("getMenuItemStyle");class P extends o.PureComponent{constructor(){super(...arguments),Object.defineProperty(this,Z,{writable:!0,value:()=>{const{title:e}=this.props;return(0,g.jsx)(h.Z,{children:e})}}),Object.defineProperty(this,O,{writable:!0,value:()=>{const{title:e,expanded:t}=this.props;return t?(0,g.jsxs)(y,{children:[!e&&(0,g.jsx)("span",{style:v.Z,children:"Minimera submeny"}),(0,g.jsx)(u.Z,{})]}):(0,g.jsxs)(y,{children:[!e&&(0,g.jsx)("span",{style:v.Z,children:"Maximera submeny"}),(0,g.jsx)(b.Z,{})]})}}),Object.defineProperty(this,M,{writable:!0,value:()=>{const{title:e,icon:t}=this.props;return(0,g.jsxs)(w,{children:[!e&&(0,g.jsx)("span",{style:v.Z,children:t.descriptiveText}),(0,g.jsx)(a.Z,{style:{fontSize:t.fontSize},children:t.materialUiIconName})]})}}),Object.defineProperty(this,I,{writable:!0,value:()=>{const{subMenuItems:e}=this.props;return e&&e.length>0}}),Object.defineProperty(this,x,{writable:!0,value:(e,t)=>{const{localObserver:s}=this.props;s.publish("".concat(e,"-clicked"),t)}}),Object.defineProperty(this,j,{writable:!0,value:()=>{const{theme:e,level:t,color:s,colored:n}=this.props,o=(0,i.Z)(this,I)[I]();return n?{paddingLeft:e.spacing(1+3*t),borderLeft:"".concat(e.spacing(1)," solid ").concat(s),paddingRight:o?0:e.spacing(1)}:{paddingLeft:e.spacing(1+3*t),paddingRight:o?0:e.spacing(1)}}})}render(){const{type:e,selected:t,subMenuItems:s,expanded:n,icon:o,level:r,title:l,id:a}=this.props,d=(0,i.Z)(this,I)[I]();return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(f,{divider:!0,selected:t,button:!0,ref:this.props.itemRef,size:"small",disableGutters:!0,"aria-controls":d?"submenu_".concat(a):null,"aria-expanded":n,onClick:()=>{(0,i.Z)(this,x)[x](e,a)},sx:(0,i.Z)(this,j)[j](),children:[o?(0,i.Z)(this,M)[M]():null,l&&(0,i.Z)(this,Z)[Z](),d&&(0,i.Z)(this,O)[O]()]}),d&&(0,g.jsx)(c.Z,{id:"submenu_".concat(a),in:n,timeout:200,children:(0,g.jsx)(m.default,{...this.props,level:r+1,items:s})})]})}}t.default=(0,l.b)(P)},55502:(e,t,s)=>{s.r(t),s.d(t,{findMenuItemWithDocumentName:()=>o,getItemIdsToColor:()=>i,isExpandedTopLevelItem:()=>n});const i=(e,t)=>{const s=((e,t)=>e.parentId?Object.values(t).find((t=>t.allChildren.indexOf(e.id)>-1)):e)(e,t);return[s.id,...s.allChildren]},n=e=>e.hasSubMenu&&e.expandedSubMenu&&0===e.level,o=(e,t)=>Object.values(t).find((t=>t.document===e))},98008:(e,t,s)=>{var i=s(64836);t.Z=void 0;var n=i(s(45649)),o=s(80184),r=(0,n.default)((0,o.jsx)("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}),"Menu");t.Z=r}}]);
//# sourceMappingURL=5551.5dd79126.chunk.js.map