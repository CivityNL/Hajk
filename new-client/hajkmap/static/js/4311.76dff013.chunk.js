"use strict";(self.webpackChunkhajk_client=self.webpackChunkhajk_client||[]).push([[4311],{94311:(e,t,i)=>{i.r(t);var r=i(66274),s=i(99359),o=i(79717),a=i(489),l=i(24673),n=i(56134),h=i(9501),c=i(5426),d=i(64665),Z=i(69236),u=i(90927),y=i(66233),v=i(18029),g=i(5400),b=i(88490),w=i(35844),f=i(56957),p=i(29409),E=i(95881),S=i(42670),m=i(60313),O=i(82589),P=i(37130),T=i(62652),D=i(30887),j=(0,s.Z)("map"),I=(0,s.Z)("layerName"),A=(0,s.Z)("layerCaption"),F=(0,s.Z)("geoJSONParser"),C=(0,s.Z)("observer"),k=(0,s.Z)("observerPrefix"),L=(0,s.Z)("drawSource"),M=(0,s.Z)("drawLayer"),R=(0,s.Z)("currentExtent"),x=(0,s.Z)("drawTooltipElement"),_=(0,s.Z)("drawTooltipElementStyle"),N=(0,s.Z)("drawTooltip"),H=(0,s.Z)("currentPointerCoordinate"),G=(0,s.Z)("showDrawTooltip"),W=(0,s.Z)("measurementSettings"),B=(0,s.Z)("drawStyleSettings"),U=(0,s.Z)("textStyleSettings"),X=(0,s.Z)("drawInteraction"),V=(0,s.Z)("removeInteractionActive"),K=(0,s.Z)("editInteractionActive"),z=(0,s.Z)("featureChosenForEdit"),Y=(0,s.Z)("moveInteractionActive"),J=(0,s.Z)("selectInteraction"),q=(0,s.Z)("translateInteraction"),Q=(0,s.Z)("modifyInteraction"),$=(0,s.Z)("keepModifyActive"),ee=(0,s.Z)("keepTranslateActive"),te=(0,s.Z)("customHandleDrawStart"),ie=(0,s.Z)("customHandleDrawEnd"),re=(0,s.Z)("customHandlePointerMove"),se=(0,s.Z)("customHandleAddFeature"),oe=(0,s.Z)("customGetDrawImageStyle"),ae=(0,s.Z)("highlightFillColor"),le=(0,s.Z)("highlightStrokeColor"),ne=(0,s.Z)("circleRadius"),he=(0,s.Z)("circleInteractionActive"),ce=(0,s.Z)("selectInteractionActive"),de=(0,s.Z)("lastZIndex"),Ze=(0,s.Z)("getObserverPrefix"),ue=(0,s.Z)("publishInformation"),ye=(0,s.Z)("getDefaultDrawStyleSettings"),ve=(0,s.Z)("getDefaultMeasurementSettings"),ge=(0,s.Z)("getDefaultTextStyleSettings"),be=(0,s.Z)("handleInitiationParametersMissing"),we=(0,s.Z)("initiateDrawLayer"),fe=(0,s.Z)("vectorLayerExists"),pe=(0,s.Z)("getAllMapLayers"),Ee=(0,s.Z)("layerHasCorrectNameAndType"),Se=(0,s.Z)("isVectorLayer"),me=(0,s.Z)("connectExistingVectorLayer"),Oe=(0,s.Z)("createNewDrawLayer"),Pe=(0,s.Z)("createDrawTooltip"),Te=(0,s.Z)("removeEventualDrawTooltipElement"),De=(0,s.Z)("getFeaturesSortedByZIndex"),je=(0,s.Z)("getAllZIndexes"),Ie=(0,s.Z)("findClosestZIndex"),Ae=(0,s.Z)("setFeatureZIndex"),Fe=(0,s.Z)("getFeatureZIndex"),Ce=(0,s.Z)("getFeatureStyle"),ke=(0,s.Z)("shouldShowText"),Le=(0,s.Z)("getFeatureTextStyle"),Me=(0,s.Z)("getArrowBaseStyle"),Re=(0,s.Z)("createArrowSvg"),xe=(0,s.Z)("getArrowStyle"),_e=(0,s.Z)("getNodeHighlightStyle"),Ne=(0,s.Z)("getFeatureCoordinates"),He=(0,s.Z)("getFeatureMeasurementLabel"),Ge=(0,s.Z)("getFormattedMeasurementString"),We=(0,s.Z)("getLabelFormatFromMeasurementType"),Be=(0,s.Z)("shouldFormatToKm"),Ue=(0,s.Z)("getFeatureLabelText"),Xe=(0,s.Z)("getKilometerMeasurementString"),Ve=(0,s.Z)("getHectareMeasurementString"),Ke=(0,s.Z)("getMeasurementString"),ze=(0,s.Z)("getFeatureMeasurements"),Ye=(0,s.Z)("getPolygonPerimeter"),Je=(0,s.Z)("getDrawStyle"),qe=(0,s.Z)("getDrawStrokeStyle"),Qe=(0,s.Z)("getDrawFillStyle"),$e=(0,s.Z)("getDrawZIndex"),et=(0,s.Z)("getDrawImageStyle"),tt=(0,s.Z)("getFillStyleInfo"),it=(0,s.Z)("getStrokeStyleInfo"),rt=(0,s.Z)("getImageStyleInfo"),st=(0,s.Z)("refreshFeaturesTextStyle"),ot=(0,s.Z)("getNewVectorSource"),at=(0,s.Z)("getNewVectorLayer"),lt=(0,s.Z)("fitMapToExtent"),nt=(0,s.Z)("removeEventListeners"),ht=(0,s.Z)("addEventListeners"),ct=(0,s.Z)("addCustomEventListeners"),dt=(0,s.Z)("removeCustomEventListeners"),Zt=(0,s.Z)("handleDrawStart"),ut=(0,s.Z)("handleDrawEnd"),yt=(0,s.Z)("handleModifyEnd"),vt=(0,s.Z)("refreshArrowStyle"),gt=(0,s.Z)("handleDrawAbort"),bt=(0,s.Z)("resetDrawTooltip"),wt=(0,s.Z)("handleFeatureChange"),ft=(0,s.Z)("handlePointerMove"),pt=(0,s.Z)("handleDrawFeatureAdded"),Et=(0,s.Z)("handleKeyDown"),St=(0,s.Z)("disablePotentialInteraction"),mt=(0,s.Z)("getSetFailedObject"),Ot=(0,s.Z)("removeClickedFeature"),Pt=(0,s.Z)("editClickedFeature"),Tt=(0,s.Z)("updateChosenEditFeature"),Dt=(0,s.Z)("refreshSnapHelper"),jt=(0,s.Z)("enableRemoveInteraction"),It=(0,s.Z)("disableRemoveInteraction"),At=(0,s.Z)("enableEditInteraction"),Ft=(0,s.Z)("disableEditInteraction"),Ct=(0,s.Z)("enableModifyInteraction"),kt=(0,s.Z)("disableModifyInteraction"),Lt=(0,s.Z)("enableMoveInteraction"),Mt=(0,s.Z)("enableTranslateInteraction"),Rt=(0,s.Z)("disableMoveInteraction"),xt=(0,s.Z)("disableTranslateInteraction"),_t=(0,s.Z)("enableCircleInteraction"),Nt=(0,s.Z)("disableCircleInteraction"),Ht=(0,s.Z)("enableSelectInteraction"),Gt=(0,s.Z)("disableSelectInteraction"),Wt=(0,s.Z)("handleOnSelectClick"),Bt=(0,s.Z)("createRadiusOnClick"),Ut=(0,s.Z)("handleFeatureSelect"),Xt=(0,s.Z)("bindFeaturePropertyListener"),Vt=(0,s.Z)("unBindFeaturePropertyListener"),Kt=(0,s.Z)("handleFeaturePropertyChange"),zt=(0,s.Z)("removeFeatureEditSelection"),Yt=(0,s.Z)("refreshDrawInteraction"),Jt=(0,s.Z)("getDrawInteractionType"),qt=(0,s.Z)("isFreeHandDrawing"),Qt=(0,s.Z)("createRealCircleGeometry"),$t=(0,s.Z)("creteCircleGeomFromSimplified"),ei=(0,s.Z)("createDuplicateFeature"),ti=(0,s.Z)("getDuplicateOffsetAmount");t.default=class{constructor(e){var t,i,s,ii,ri,si,oi=this;if(Object.defineProperty(this,j,{writable:!0,value:void 0}),Object.defineProperty(this,I,{writable:!0,value:void 0}),Object.defineProperty(this,A,{writable:!0,value:void 0}),Object.defineProperty(this,F,{writable:!0,value:void 0}),Object.defineProperty(this,C,{writable:!0,value:void 0}),Object.defineProperty(this,k,{writable:!0,value:void 0}),Object.defineProperty(this,L,{writable:!0,value:void 0}),Object.defineProperty(this,M,{writable:!0,value:void 0}),Object.defineProperty(this,R,{writable:!0,value:void 0}),Object.defineProperty(this,x,{writable:!0,value:void 0}),Object.defineProperty(this,_,{writable:!0,value:void 0}),Object.defineProperty(this,N,{writable:!0,value:void 0}),Object.defineProperty(this,H,{writable:!0,value:void 0}),Object.defineProperty(this,G,{writable:!0,value:void 0}),Object.defineProperty(this,W,{writable:!0,value:void 0}),Object.defineProperty(this,B,{writable:!0,value:void 0}),Object.defineProperty(this,U,{writable:!0,value:void 0}),Object.defineProperty(this,X,{writable:!0,value:void 0}),Object.defineProperty(this,V,{writable:!0,value:void 0}),Object.defineProperty(this,K,{writable:!0,value:void 0}),Object.defineProperty(this,z,{writable:!0,value:void 0}),Object.defineProperty(this,Y,{writable:!0,value:void 0}),Object.defineProperty(this,J,{writable:!0,value:void 0}),Object.defineProperty(this,q,{writable:!0,value:void 0}),Object.defineProperty(this,Q,{writable:!0,value:void 0}),Object.defineProperty(this,$,{writable:!0,value:void 0}),Object.defineProperty(this,ee,{writable:!0,value:void 0}),Object.defineProperty(this,te,{writable:!0,value:void 0}),Object.defineProperty(this,ie,{writable:!0,value:void 0}),Object.defineProperty(this,re,{writable:!0,value:void 0}),Object.defineProperty(this,se,{writable:!0,value:void 0}),Object.defineProperty(this,oe,{writable:!0,value:void 0}),Object.defineProperty(this,ae,{writable:!0,value:void 0}),Object.defineProperty(this,le,{writable:!0,value:void 0}),Object.defineProperty(this,ne,{writable:!0,value:void 0}),Object.defineProperty(this,he,{writable:!0,value:void 0}),Object.defineProperty(this,ce,{writable:!0,value:void 0}),Object.defineProperty(this,de,{writable:!0,value:void 0}),Object.defineProperty(this,Ze,{writable:!0,value:e=>"string"===typeof e.observerPrefix?e.observerPrefix:null}),Object.defineProperty(this,ue,{writable:!0,value:e=>{let{subject:t,payLoad:i}=e;if(!(0,r.Z)(this,C)[C]||!t)return;const s=(0,r.Z)(this,k)[k]?"".concat((0,r.Z)(this,k)[k],".").concat(t):t;(0,r.Z)(this,C)[C].publish(s,i)}}),Object.defineProperty(this,ye,{writable:!0,value:()=>({strokeColor:"rgba(74,74,74,0.5)",lineDash:null,strokeWidth:2,fillColor:"rgba(255,255,255,0.07)"})}),Object.defineProperty(this,ve,{writable:!0,value:()=>({showText:!1,showArea:!1,showPerimeter:!1,areaUnit:"AUTO",lengthUnit:"AUTO",precision:0})}),Object.defineProperty(this,ge,{writable:!0,value:()=>({foregroundColor:"#FFFFFF",backgroundColor:"#000000",size:14})}),Object.defineProperty(this,be,{writable:!0,value:()=>{throw new Error("Failed to initiate Draw-model, - required parameters missing. \n Required parameters: map, layerName")}}),Object.defineProperty(this,we,{writable:!0,value:()=>(0,r.Z)(this,fe)[fe]()?(0,r.Z)(this,me)[me]():(0,r.Z)(this,Oe)[Oe]()}),Object.defineProperty(this,fe,{writable:!0,value:()=>(0,r.Z)(this,pe)[pe]().some((e=>(0,r.Z)(this,Ee)[Ee](e)))}),Object.defineProperty(this,pe,{writable:!0,value:()=>(0,r.Z)(this,j)[j].getLayers().getArray()}),Object.defineProperty(this,Ee,{writable:!0,value:e=>e.get("name")===(0,r.Z)(this,I)[I]&&(0,r.Z)(this,Se)[Se](e)}),Object.defineProperty(this,Se,{writable:!0,value:e=>e instanceof h.Z}),Object.defineProperty(this,me,{writable:!0,value:()=>{const e=(0,r.Z)(this,pe)[pe]().find((e=>(0,r.Z)(this,Ee)[Ee](e)));(0,r.Z)(this,M)[M]=e,(0,r.Z)(this,L)[L]=e.getSource()}}),Object.defineProperty(this,Oe,{writable:!0,value:()=>{(0,r.Z)(this,L)[L]=(0,r.Z)(this,ot)[ot](),(0,r.Z)(this,M)[M]=(0,r.Z)(this,at)[at]((0,r.Z)(this,L)[L]),(0,r.Z)(this,M)[M].set("name",(0,r.Z)(this,I)[I]),(0,r.Z)(this,M)[M].set("queryable",!0),(0,r.Z)(this,M)[M].set("ignoreInFeatureInfo",!0),(0,r.Z)(this,j)[j].addLayer((0,r.Z)(this,M)[M])}}),Object.defineProperty(this,Pe,{writable:!0,value:()=>{(0,r.Z)(this,Te)[Te](),(0,r.Z)(this,x)[x]=document.createElement("div"),(0,r.Z)(this,x)[x].setAttribute("style",(0,r.Z)(this,_)[_]),(0,r.Z)(this,N)[N]=new S.Z({element:(0,r.Z)(this,x)[x],offset:[30,-5],positioning:"bottom-center"}),(0,r.Z)(this,j)[j].addOverlay((0,r.Z)(this,N)[N])}}),Object.defineProperty(this,Te,{writable:!0,value:()=>{(0,r.Z)(this,x)[x]&&((0,r.Z)(this,x)[x].parentNode.removeElement((0,r.Z)(this,x)[x]),(0,r.Z)(this,x)[x]=null)}}),this.moveFeatureZIndexToTop=e=>{const t=(0,r.Z)(this,je)[je](),i=Math.max(...t);isFinite(i)&&(0,r.Z)(this,Ae)[Ae](e,i+1)},this.moveFeatureZIndexUp=e=>{const t=(0,r.Z)(this,Ie)[Ie](e,!0);(0,r.Z)(this,Ae)[Ae](e,t)},this.moveFeatureZIndexToBottom=e=>{const t=(0,r.Z)(this,je)[je](),i=Math.min(...t);isFinite(i)&&(0,r.Z)(this,Ae)[Ae](e,i-1)},this.moveFeatureZIndexDown=e=>{const t=(0,r.Z)(this,Ie)[Ie](e,!1);(0,r.Z)(this,Ae)[Ae](e,t)},Object.defineProperty(this,De,{writable:!0,value:()=>(0,r.Z)(this,L)[L].getFeatures().sort(((e,t)=>(0,r.Z)(this,Fe)[Fe](e)<(0,r.Z)(this,Fe)[Fe](t)))}),Object.defineProperty(this,je,{writable:!0,value:()=>{let e=[];return(0,r.Z)(this,De)[De]().forEach((t=>{e.push((0,r.Z)(this,Fe)[Fe](t))})),e}}),Object.defineProperty(this,Ie,{writable:!0,value:(e,t)=>{let i=(0,r.Z)(this,Fe)[Fe](e);const s=(0,r.Z)(this,je)[je]().filter((e=>!0===t?e>i:e<i));let o=Math.max(...s);return isFinite(o)||(o=!0===t?i+1:i-1),s.forEach((e=>{(!0===t&&e>=i&&e<o||!1===t&&e<=i&&e>o)&&(o=e)})),i=!0===t?o+1:o-1,i}}),Object.defineProperty(this,Ae,{writable:!0,value:(e,t)=>{let i=e.getStyle();i=Array.isArray(i)?i[0]:i,i&&(i.setZIndex(t),e.setStyle(i))}}),Object.defineProperty(this,Fe,{writable:!0,value:e=>{let t=e.getStyle();return t?(t=Array.isArray(t)?t[0]:t,t.getZIndex()||0):0}}),Object.defineProperty(this,Ce,{writable:!0,value:(e,t)=>{if(e.getStyle()){0===(0,r.Z)(this,Fe)[Fe](e)&&((0,r.Z)(this,de)[de]++,(0,r.Z)(this,Ae)[Ae](e,(0,r.Z)(this,de)[de]))}if(!0===e.get("HIDDEN"))return!e.get("STYLE_BEFORE_HIDE")&&e.set("STYLE_BEFORE_HIDE",e.getStyle()),new d.ZP({});if("Arrow"===(null===e||void 0===e?void 0:e.get("DRAW_METHOD")))return(0,r.Z)(this,xe)[xe](e,t);const i=e.get("STYLE_BEFORE_HIDE")||e.getStyle();e.set("STYLE_BEFORE_HIDE",null);const s=t?(0,r.Z)(this,Je)[Je](t):i?Array.isArray(i)?i[0]:i:(0,r.Z)(this,Je)[Je]();"Text"===e.get("DRAW_METHOD")&&s.setImage(null);const o=(0,r.Z)(this,Le)[Le](e);return s.setText(o),!0===e.get("EDIT_ACTIVE")?[s,(0,r.Z)(this,_e)[_e](e)]:s}}),Object.defineProperty(this,ke,{writable:!0,value:e=>{if(!e)return console.warn("Could not evaluate '#shouldShowText' since no feature was supplied."),!1;if(!1===e.get("SHOW_TEXT"))return!1;const t=e.get("DRAW_METHOD")||e.get("geometryType");return"Arrow"!==t&&((0,r.Z)(this,W)[W].showText||"Text"===t)}}),Object.defineProperty(this,Le,{writable:!0,value:e=>{var t,i,s,o,a,l,n,h,c,d;if(!(0,r.Z)(this,ke)[ke](e))return null;const v=(null===e||void 0===e?void 0:e.getGeometry())instanceof p.Z,g="Text"===(null===e||void 0===e?void 0:e.get("DRAW_METHOD")),b=g?null!==(t=null===(i=e.get("TEXT_SETTINGS"))||void 0===i?void 0:i.foregroundColor)&&void 0!==t?t:(0,r.Z)(this,U)[U].foregroundColor:"#FFF",w=g?null!==(s=null===(o=e.get("TEXT_SETTINGS"))||void 0===o?void 0:o.backgroundColor)&&void 0!==s?s:(0,r.Z)(this,U)[U].backgroundColor:"rgba(0, 0, 0, 0.5)";return new Z.Z({textAlign:"center",textBaseline:"middle",font:"".concat(g?null!==(a=null===(l=e.get("TEXT_SETTINGS"))||void 0===l?void 0:l.size)&&void 0!==a?a:(0,r.Z)(this,U)[U].size:12,"pt sans-serif"),fill:new u.Z({color:g?null!==(n=null===(h=e.get("TEXT_SETTINGS"))||void 0===h?void 0:h.foregroundColor)&&void 0!==n?n:(0,r.Z)(this,U)[U].foregroundColor:"#FFF"}),text:(0,r.Z)(this,Ue)[Ue](e),overflow:!0,stroke:b!==w?new y.Z({color:g?null!==(c=null===(d=e.get("TEXT_SETTINGS"))||void 0===d?void 0:d.backgroundColor)&&void 0!==c?c:(0,r.Z)(this,U)[U].backgroundColor:"rgba(0, 0, 0, 0.7)",width:3}):null,offsetX:0,offsetY:v&&!g?-15:0,rotation:0,scale:1})}}),Object.defineProperty(this,Me,{writable:!0,value:e=>{const t=(0,r.Z)(this,Je)[Je](e),i=t.getStroke();return i.setWidth(5),i.setLineDash(null),t}}),Object.defineProperty(this,Re,{writable:!0,value:e=>{const t='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="32pt" height="32pt" fill="'.concat(e,'"><path d="M 1 5 L 1 5 L 1 13 L 1 21 L 1 21 L 12 13"/></svg>');return"data:image/svg+xml;base64,".concat(window.btoa(t))}}),Object.defineProperty(this,xe,{writable:!0,value:(e,t)=>{var i,s;const o=Array.isArray(e.getStyle())?e.getStyle():null,a=t?(0,r.Z)(this,Me)[Me](t):o?o[0]:(0,r.Z)(this,Me)[Me](),l=null!==(i=null===(s=a.getStroke())||void 0===s?void 0:s.getColor())&&void 0!==i?i:null,n=[a];return null===e||void 0===e||e.getGeometry().forEachSegment(((e,i)=>{const s=i[0]-e[0],o=i[1]-e[1],a=Math.atan2(o,s);n.push(new d.ZP({geometry:new p.Z(i),image:new v.Z({src:(0,r.Z)(this,Re)[Re](t?t.strokeStyle.color:l||(0,r.Z)(this,B)[B].strokeColor),anchor:[.38,.53],rotateWithView:!0,rotation:-a})}))})),n}}),Object.defineProperty(this,_e,{writable:!0,value:e=>{try{return new d.ZP({image:new g.Z({radius:5,fill:new u.Z({color:(0,r.Z)(this,ae)[ae]}),stroke:new y.Z({color:(0,r.Z)(this,le)[le],width:2})}),geometry:()=>{const t=(0,r.Z)(this,Ne)[Ne](e);return new E.Z(t)}})}catch(t){return console.error("Could not create highlight style. Error: ".concat(t)),null}}}),Object.defineProperty(this,Ne,{writable:!0,value:e=>{const t=e.getGeometry();switch(t.getType()){case"Circle":return(0,f.Bb)(t,8).getCoordinates()[0];case"LineString":return t.getCoordinates();case"Point":return[t.getCoordinates()];default:return t.getCoordinates()[0]}}}),Object.defineProperty(this,He,{writable:!0,value:(e,t)=>(0,r.Z)(this,ze)[ze](e).reduce(((e,i)=>{switch(i.type){case"COORDINATES":return e+"N: ".concat(Math.round(i.value[1])," E: ").concat(Math.round(i.value[0]));case"AREA":case"PERIMETER":case"LENGTH":return e+(0,r.Z)(this,Ge)[Ge](i,t);default:return e}}),"")}),Object.defineProperty(this,Ge,{writable:!0,value:(e,t)=>{const{type:i,value:s,prefix:o}=e;if(!("TOOLTIP"===t||"LENGTH"===i&&(0,r.Z)(this,W)[W].showLength||"AREA"===i&&(0,r.Z)(this,W)[W].showArea||"PERIMETER"===i&&(0,r.Z)(this,W)[W].showPerimeter))return"";switch((0,r.Z)(this,We)[We](i)){case"AUTO":const e=(0,r.Z)(this,Be)[Be](s,i)?(0,r.Z)(this,Xe)[Xe](s,i):(0,r.Z)(this,Ke)[Ke](s,i);return"".concat(o," ").concat(e);case"KM":case"KM2":return"".concat(o," ").concat((0,r.Z)(this,Xe)[Xe](s,i));case"HECTARE":return"".concat(o," ").concat((0,r.Z)(this,Ve)[Ve](s,i));default:return"".concat(o," ").concat((0,r.Z)(this,Ke)[Ke](s,i))}}}),Object.defineProperty(this,We,{writable:!0,value:e=>{switch(e){case"LENGTH":case"PERIMETER":return(0,r.Z)(this,W)[W].lengthUnit;default:return(0,r.Z)(this,W)[W].areaUnit}}}),Object.defineProperty(this,Be,{writable:!0,value:(e,t)=>{switch(t){case"LENGTH":case"PERIMETER":return e>1e3;default:return e>1e6}}}),Object.defineProperty(this,Ue,{writable:!0,value:e=>{var t,i;if("Text"===e.get("DRAW_METHOD"))return null!==(i=e.get("USER_TEXT"))&&void 0!==i?i:"";const s=null!==(t=e.get("FEATURE_TITLE"))&&void 0!==t?t:"",o=(0,r.Z)(this,W)[W].showText?(0,r.Z)(this,He)[He](e,"LABEL"):"";return s.length>0?"".concat(s).concat(o.length>0?"\n":"").concat(o):o}}),Object.defineProperty(this,Xe,{writable:!0,value:(e,t)=>{var i;const s=null!==(i=(0,r.Z)(this,W)[W].precision)&&void 0!==i?i:0;switch(t){case"LENGTH":case"PERIMETER":return"".concat(Number((e/1e3).toFixed(s)).toLocaleString()," km");default:return"".concat(Number((e/1e6).toFixed(s)).toLocaleString()," km\xb2")}}}),Object.defineProperty(this,Ve,{writable:!0,value:(e,t)=>{var i;const s=null!==(i=(0,r.Z)(this,W)[W].precision)&&void 0!==i?i:0;switch(t){case"LENGTH":case"PERIMETER":return(0,r.Z)(this,Ke)[Ke](e,t);default:return"".concat(Number((e/1e4).toFixed(s)).toLocaleString()," ha")}}}),Object.defineProperty(this,Ke,{writable:!0,value:(e,t)=>{var i;const s=null!==(i=(0,r.Z)(this,W)[W].precision)&&void 0!==i?i:0;switch(t){case"LENGTH":case"PERIMETER":return"".concat(Number(e.toFixed(s)).toLocaleString()," m");default:return"".concat(Number(e.toFixed(s)).toLocaleString()," m\xb2")}}}),Object.defineProperty(this,ze,{writable:!0,value:e=>{const t=e.getGeometry();if(t instanceof p.Z)return[{type:"COORDINATES",value:t.getCoordinates(),prefix:""}];const i=(0,r.Z)(this,W)[W].showArea&&(0,r.Z)(this,W)[W].showPerimeter;if(t instanceof b.Z){const e=t.getRadius();return[{type:"AREA",value:Math.pow(e,2)*Math.PI,prefix:"".concat(i?"Area:":"")},{type:"PERIMETER",value:e,prefix:"\n Radie:"}]}return t instanceof w.Z?[{type:"LENGTH",value:t.getLength(),prefix:""}]:[{type:"AREA",value:(null===t||void 0===t?void 0:t.getArea())||0,prefix:"".concat(i?"Area:":"")},{type:"PERIMETER",value:(0,r.Z)(this,Ye)[Ye](t),prefix:"\n Omkrets:"}]}}),Object.defineProperty(this,Ye,{writable:!0,value:e=>{try{var t,i;const r=(null===e||void 0===e||null===(t=e.getLinearRing(0))||void 0===t?void 0:t.getCoordinates())||null;return r&&(null===(i=new w.Z(r))||void 0===i?void 0:i.getLength())||0}catch(r){return 0}}}),Object.defineProperty(this,Je,{writable:!0,value:e=>new d.ZP({stroke:(0,r.Z)(this,qe)[qe](e),fill:(0,r.Z)(this,Qe)[Qe](e),image:(0,r.Z)(this,et)[et](e),zIndex:(0,r.Z)(this,$e)[$e](e)})}),Object.defineProperty(this,qe,{writable:!0,value:e=>{var t,i;return new y.Z({color:null!==e&&void 0!==e&&null!==(t=e.strokeStyle)&&void 0!==t&&t.color?e.strokeStyle.color:(0,r.Z)(this,B)[B].strokeColor,lineDash:null!==e&&void 0!==e&&e.strokeStyle?e.strokeStyle.dash:(0,r.Z)(this,B)[B].lineDash,width:null!==e&&void 0!==e&&null!==(i=e.strokeStyle)&&void 0!==i&&i.width?e.strokeStyle.width:(0,r.Z)(this,B)[B].strokeWidth})}}),Object.defineProperty(this,Qe,{writable:!0,value:e=>{var t;return new u.Z({color:null!==e&&void 0!==e&&null!==(t=e.fillStyle)&&void 0!==t&&t.color?e.fillStyle.color:(0,r.Z)(this,B)[B].fillColor})}}),Object.defineProperty(this,$e,{writable:!0,value:e=>(null===e||void 0===e?void 0:e.zIndex)||0}),Object.defineProperty(this,et,{writable:!0,value:e=>{var t,i,s;if((0,r.Z)(this,oe)[oe])return(0,r.Z)(this,oe)[oe]();const o=(0,r.Z)(this,B)[B].image?(0,r.Z)(this,B)[B].image:(0,r.Z)(this,B)[B];return new g.Z({radius:6,stroke:new y.Z({color:null!==e&&void 0!==e&&null!==(t=e.strokeStyle)&&void 0!==t&&t.color?e.strokeStyle.color:o.strokeColor,width:null!==e&&void 0!==e&&null!==(i=e.strokeStyle)&&void 0!==i&&i.width?e.strokeStyle.width:o.strokeWidth,lineDash:null!==e&&void 0!==e&&e.strokeStyle?e.strokeStyle.dash:o.lineDash}),fill:new u.Z({color:null!==e&&void 0!==e&&null!==(s=e.fillStyle)&&void 0!==s&&s.color?e.fillStyle.color:o.fillColor})})}}),Object.defineProperty(this,tt,{writable:!0,value:e=>{try{var t,i,r;const s=Array.isArray(e)?null===(t=e[0])||void 0===t||null===(i=t.getFill())||void 0===i?void 0:i.getColor():null===e||void 0===e||null===(r=e.getFill())||void 0===r?void 0:r.getColor();return{color:this.getRGBAString(s)}}catch(s){return console.error("Failed to extract fill-style, ".concat(s.message)),{color:null}}}}),Object.defineProperty(this,it,{writable:!0,value:e=>{try{var t;const i=Array.isArray(e)?null===(t=e[0])||void 0===t?void 0:t.getStroke():null===e||void 0===e?void 0:e.getStroke(),r=null===i||void 0===i?void 0:i.getColor(),s=null===i||void 0===i?void 0:i.getLineDash(),o=null===i||void 0===i?void 0:i.getWidth();return{color:this.getRGBAString(r),dash:s,width:o}}catch(i){return console.error("Failed to extract stroke-style, ".concat(i.message)),{color:null,dash:null,width:null}}}}),Object.defineProperty(this,rt,{writable:!0,value:e=>{var t,i,r;const s=Array.isArray(e)?null===(t=e[0])||void 0===t?void 0:t.getImage():null===e||void 0===e?void 0:e.getImage(),o=null===s||void 0===s||null===(i=s.getFill)||void 0===i?void 0:i.call(s),a=null===s||void 0===s||null===(r=s.getStroke)||void 0===r?void 0:r.call(s);if(!o||!a)return{fillColor:null,strokeColor:null,strokeWidth:null,dash:null};const l=o.getColor(),n=a.getColor(),h=a.getWidth(),c=a.getLineDash();return{fillColor:this.getRGBAString(l),strokeColor:this.getRGBAString(n),strokeWidth:h,dash:c}}}),this.extractFeatureStyleInfo=e=>{try{const t=null===e||void 0===e?void 0:e.getStyle();if(!t)return{fillStyle:null,strokeStyle:null,imageStyle:null};const i=(0,r.Z)(this,tt)[tt](t),s=(0,r.Z)(this,it)[it](t),o=(0,r.Z)(this,rt)[rt](t);return{fillStyle:i,strokeStyle:s,imageStyle:o,zIndex:(Array.isArray(t)?t[0]:t).getZIndex()}}catch(t){return console.error("Failed to extract feature-style. Error: ".concat(t)),{fillStyle:null,strokeStyle:null,imageStyle:null,zIndex:0}}},Object.defineProperty(this,st,{writable:!0,value:()=>{this.getAllDrawnFeatures().filter((e=>"Arrow"!==e.get("DRAW_METHOD"))).forEach((e=>{const t=e.getStyle(),i=(0,r.Z)(this,Le)[Le](e);Array.isArray(t)?t[0].setText(i):t.setText(i),e.setStyle(t)}))}}),Object.defineProperty(this,ot,{writable:!0,value:()=>new c.Z({wrapX:!1})}),Object.defineProperty(this,at,{writable:!0,value:e=>new h.Z({source:e,layerType:"system",ignoreInFeatureInfo:!0,zIndex:5e3,caption:(0,r.Z)(this,A)[A]||"Draw layer"})}),this.getAllDrawnFeatures=()=>(0,r.Z)(this,L)[L].getFeatures().filter((e=>!0===e.get("USER_DRAWN"))),Object.defineProperty(this,lt,{writable:!0,value:()=>{(0,r.Z)(this,j)[j].getView().fit((0,r.Z)(this,R)[R],{size:(0,r.Z)(this,j)[j].getSize(),padding:[20,20,20,20],maxZoom:7})}}),Object.defineProperty(this,nt,{writable:!0,value:()=>{(0,r.Z)(this,X)[X].un("drawstart",(0,r.Z)(this,Zt)[Zt]),(0,r.Z)(this,X)[X].un("drawend",(0,r.Z)(this,ut)[ut]),(0,r.Z)(this,X)[X].un("drawabort",(0,r.Z)(this,gt)[gt]),(0,r.Z)(this,j)[j].un("pointermove",(0,r.Z)(this,ft)[ft]),(0,r.Z)(this,L)[L].un("addfeature",(0,r.Z)(this,pt)[pt]),document.removeEventListener("keydown",(0,r.Z)(this,Et)[Et]),(0,r.Z)(this,dt)[dt]()}}),Object.defineProperty(this,ht,{writable:!0,value:e=>{e&&(0,r.Z)(this,ct)[ct](e),(0,r.Z)(this,X)[X].on("drawstart",(0,r.Z)(this,Zt)[Zt]),(0,r.Z)(this,X)[X].on("drawend",(0,r.Z)(this,ut)[ut]),(0,r.Z)(this,X)[X].on("drawabort",(0,r.Z)(this,gt)[gt]),(0,r.Z)(this,L)[L].on("addfeature",(0,r.Z)(this,pt)[pt]),document.addEventListener("keydown",(0,r.Z)(this,Et)[Et])}}),Object.defineProperty(this,ct,{writable:!0,value:e=>{(0,r.Z)(this,te)[te]=e.handleDrawStart||null,(0,r.Z)(this,ie)[ie]=e.handleDrawEnd||null,(0,r.Z)(this,re)[re]=e.handlePointerMove||null,(0,r.Z)(this,se)[se]=e.handleAddFeature||null,(0,r.Z)(this,te)[te]&&(0,r.Z)(this,X)[X].on("drawstart",(0,r.Z)(this,te)[te]),(0,r.Z)(this,ie)[ie]&&(0,r.Z)(this,X)[X].on("drawend",(0,r.Z)(this,ie)[ie]),(0,r.Z)(this,re)[re]&&(0,r.Z)(this,j)[j].on("pointermove",(0,r.Z)(this,re)[re]),(0,r.Z)(this,se)[se]&&(0,r.Z)(this,L)[L].on("addfeature",(0,r.Z)(this,se)[se])}}),Object.defineProperty(this,dt,{writable:!0,value:()=>{(0,r.Z)(this,te)[te]&&(0,r.Z)(this,X)[X].un("drawstart",(0,r.Z)(this,te)[te]),(0,r.Z)(this,ie)[ie]&&(0,r.Z)(this,X)[X].un("drawend",(0,r.Z)(this,ie)[ie]),(0,r.Z)(this,re)[re]&&(0,r.Z)(this,j)[j].on("pointermove",(0,r.Z)(this,re)[re]),(0,r.Z)(this,se)[se]&&(0,r.Z)(this,L)[L].un("addfeature",(0,r.Z)(this,se)[se]),(0,r.Z)(this,te)[te]=null,(0,r.Z)(this,ie)[ie]=null,(0,r.Z)(this,re)[re]=null,(0,r.Z)(this,se)[se]=null}}),Object.defineProperty(this,Zt,{writable:!0,value:e=>{(0,r.Z)(this,j)[j].on("pointermove",(0,r.Z)(this,ft)[ft]);const t=e.feature;t.on("change",(0,r.Z)(this,wt)[wt]),t.setStyle((0,r.Z)(this,Je)[Je]())}}),Object.defineProperty(this,ut,{writable:!0,value:e=>{var t;(0,r.Z)(this,bt)[bt]();const{feature:i}=e;i.set("USER_DRAWN",!0),i.set("DRAW_METHOD",null===(t=(0,r.Z)(this,X)[X])||void 0===t?void 0:t.get("DRAW_METHOD")),i.set("TEXT_SETTINGS",(0,r.Z)(this,U)[U]),i.setStyle((0,r.Z)(this,Ce)[Ce](i)),(0,r.Z)(this,j)[j].un("pointermove",(0,r.Z)(this,ft)[ft])}}),Object.defineProperty(this,yt,{writable:!0,value:e=>{e.features.forEach((e=>{"Arrow"===e.get("DRAW_METHOD")&&(0,r.Z)(this,vt)[vt](e)})),(0,r.Z)(this,st)[st]()}}),Object.defineProperty(this,vt,{writable:!0,value:e=>{try{const t=e.getStyle()[0].getStroke();e.setStyle((0,r.Z)(this,xe)[xe](e,{strokeStyle:{color:t.getColor()},fillStyle:{color:t.getColor()}}))}catch(t){console.error("Failed to set arrow style. Error: ".concat(t))}}}),Object.defineProperty(this,gt,{writable:!0,value:()=>{(0,r.Z)(this,bt)[bt]()}}),Object.defineProperty(this,bt,{writable:!0,value:()=>{(0,r.Z)(this,x)[x].innerHTML=null,(0,r.Z)(this,H)[H]=null,(0,r.Z)(this,N)[N].setPosition((0,r.Z)(this,H)[H])}}),Object.defineProperty(this,wt,{writable:!0,value:e=>{const t=e.target,i=(0,r.Z)(this,He)[He](t,"TOOLTIP");(0,r.Z)(this,x)[x].innerHTML=(0,r.Z)(this,G)[G]?i:null,(0,r.Z)(this,N)[N].setPosition((0,r.Z)(this,H)[H])}}),Object.defineProperty(this,ft,{writable:!0,value:e=>{(0,r.Z)(this,H)[H]=(0,r.Z)(this,G)[G]?e.coordinate:null}}),Object.defineProperty(this,pt,{writable:!0,value:e=>{(0,r.Z)(this,ue)[ue]({subject:"drawModel.featureAdded",payLoad:e.feature})}}),Object.defineProperty(this,Et,{writable:!0,value:e=>{if(!(0,r.Z)(this,X)[X])return;const{keyCode:t,ctrlKey:i,metaKey:s}=e;27===t||13===t?this.finishDraw():!0!==i&&!0!==s||90!==t||(0,r.Z)(this,X)[X].removeLastPoint()}}),Object.defineProperty(this,St,{writable:!0,value:()=>(0,r.Z)(this,V)[V]?(0,r.Z)(this,It)[It]():(0,r.Z)(this,K)[K]?(0,r.Z)(this,Ft)[Ft]():(0,r.Z)(this,Y)[Y]?(0,r.Z)(this,Rt)[Rt]():((0,r.Z)(this,ce)[ce]&&(0,r.Z)(this,Gt)[Gt](),(0,r.Z)(this,he)[he]&&(0,r.Z)(this,Nt)[Nt](),void((0,r.Z)(this,X)[X]&&((0,r.Z)(this,j)[j].removeInteraction((0,r.Z)(this,X)[X]),(0,r.Z)(this,nt)[nt](),(0,r.Z)(this,X)[X]=null,(0,r.Z)(this,j)[j].clickLock.delete("coreDrawModel"),(0,r.Z)(this,j)[j].snapHelper.delete("coreDrawModel"))))}),Object.defineProperty(this,mt,{writable:!0,value:(e,t)=>({status:"FAILED",message:"Set:er failed. The set:er only accepts ".concat(typeof e,", and was provided ").concat(typeof t)})}),Object.defineProperty(this,Ot,{writable:!0,value:e=>{const t=(0,r.Z)(this,j)[j].getFeaturesAtPixel(e.pixel).filter((e=>e.get("USER_DRAWN")));if(t.length>0){const e=t[0];this.removeFeature(e)}}}),Object.defineProperty(this,Pt,{writable:!0,value:e=>{const t=(0,r.Z)(this,j)[j].getFeaturesAtPixel(e.pixel).filter((e=>e.get("USER_DRAWN"))),i=t.length>0?t[0]:null;(0,r.Z)(this,Tt)[Tt](i),(0,r.Z)(this,ue)[ue]({subject:"drawModel.modify.mapClick",payLoad:i})}}),Object.defineProperty(this,Tt,{writable:!0,value:e=>{(0,r.Z)(this,z)[z]&&(0,r.Z)(this,z)[z].set("EDIT_ACTIVE",!1),e&&!e.get("EDIT_ACTIVE")&&e.set("EDIT_ACTIVE",!0),(0,r.Z)(this,z)[z]=e}}),Object.defineProperty(this,Dt,{writable:!0,value:()=>{(0,r.Z)(this,j)[j].snapHelper.delete("coreDrawModel"),(0,r.Z)(this,j)[j].snapHelper.add("coreDrawModel")}}),Object.defineProperty(this,jt,{writable:!0,value:()=>{(0,r.Z)(this,V)[V]=!0,(0,r.Z)(this,j)[j].clickLock.add("coreDrawModel"),(0,r.Z)(this,j)[j].on("singleclick",(0,r.Z)(this,Ot)[Ot])}}),Object.defineProperty(this,It,{writable:!0,value:()=>{(0,r.Z)(this,j)[j].clickLock.delete("coreDrawModel"),(0,r.Z)(this,j)[j].un("singleclick",(0,r.Z)(this,Ot)[Ot]),(0,r.Z)(this,V)[V]=!1}}),Object.defineProperty(this,At,{writable:!0,value:e=>{var t;(0,r.Z)(this,K)[K]=!0,(0,r.Z)(this,j)[j].on("singleclick",(0,r.Z)(this,Pt)[Pt]),(0,r.Z)(this,Xt)[Xt](),(0,r.Z)(this,j)[j].clickLock.add("coreDrawModel"),(null!==(t=e.modifyEnabled)&&void 0!==t?t:(0,r.Z)(this,$)[$])&&(0,r.Z)(this,Ct)[Ct]()}}),Object.defineProperty(this,Ft,{writable:!0,value:()=>{(0,r.Z)(this,j)[j].clickLock.delete("coreDrawModel"),(0,r.Z)(this,j)[j].un("singleclick",(0,r.Z)(this,Pt)[Pt]),(0,r.Z)(this,zt)[zt](),(0,r.Z)(this,Vt)[Vt](),(0,r.Z)(this,kt)[kt](),(0,r.Z)(this,K)[K]=!1}}),Object.defineProperty(this,Ct,{writable:!0,value:()=>(0,r.Z)(this,K)[K]?((0,r.Z)(this,kt)[kt](),(0,r.Z)(this,Q)[Q]=new o.Z({source:(0,r.Z)(this,L)[L]}),(0,r.Z)(this,Q)[Q].on("modifyend",(0,r.Z)(this,yt)[yt]),(0,r.Z)(this,j)[j].addInteraction((0,r.Z)(this,Q)[Q]),(0,r.Z)(this,j)[j].clickLock.add("coreDrawModel"),(0,r.Z)(this,j)[j].snapHelper.add("coreDrawModel"),{status:"SUCCESS",message:"Modify-interaction enabled."}):{status:"FAILED",message:"Modify-interaction could not be enabled. Edit has to be enabled before enabling."}}),Object.defineProperty(this,kt,{writable:!0,value:()=>{(0,r.Z)(this,Q)[Q]&&((0,r.Z)(this,j)[j].removeInteraction((0,r.Z)(this,Q)[Q]),(0,r.Z)(this,Q)[Q].un("modifyend",(0,r.Z)(this,yt)[yt]),(0,r.Z)(this,j)[j].snapHelper.delete("coreDrawModel"),(0,r.Z)(this,Q)[Q]=null)}}),Object.defineProperty(this,Lt,{writable:!0,value:e=>{var t;(0,r.Z)(this,J)[J]=new a.Z({layers:[(0,r.Z)(this,M)[M]],style:null}),(0,r.Z)(this,J)[J].on("select",(0,r.Z)(this,Ut)[Ut]),(0,r.Z)(this,j)[j].addInteraction((0,r.Z)(this,J)[J]),(0,r.Z)(this,Y)[Y]=!0,(null!==(t=e.translateEnabled)&&void 0!==t?t:(0,r.Z)(this,ee)[ee])&&(0,r.Z)(this,Mt)[Mt](),(0,r.Z)(this,j)[j].clickLock.add("coreDrawModel"),(0,r.Z)(this,j)[j].snapHelper.add("coreDrawModel")}}),Object.defineProperty(this,Mt,{writable:!0,value:()=>{if(!(0,r.Z)(this,Y)[Y])return{status:"FAILED",message:"Translate-interaction could not be enabled. Move has to be enabled before enabling."};(0,r.Z)(this,q)[q]=new l.Z({features:(0,r.Z)(this,J)[J].getFeatures()}),(0,r.Z)(this,j)[j].addInteraction((0,r.Z)(this,q)[q]),(0,r.Z)(this,Dt)[Dt]()}}),Object.defineProperty(this,Rt,{writable:!0,value:()=>{(0,r.Z)(this,j)[j].removeInteraction((0,r.Z)(this,J)[J]),(0,r.Z)(this,J)[J].un("select",(0,r.Z)(this,Ut)[Ut]),(0,r.Z)(this,xt)[xt](),(0,r.Z)(this,J)[J]=null,(0,r.Z)(this,Y)[Y]=!1,(0,r.Z)(this,j)[j].clickLock.delete("coreDrawModel"),(0,r.Z)(this,j)[j].snapHelper.delete("coreDrawModel"),this.refreshDrawLayer()}}),Object.defineProperty(this,xt,{writable:!0,value:()=>{(0,r.Z)(this,q)[q]&&((0,r.Z)(this,j)[j].removeInteraction((0,r.Z)(this,q)[q]),(0,r.Z)(this,q)[q]=null)}}),Object.defineProperty(this,_t,{writable:!0,value:()=>{(0,r.Z)(this,j)[j].clickLock.add("coreDrawModel"),(0,r.Z)(this,he)[he]=!0,(0,r.Z)(this,j)[j].on("singleclick",(0,r.Z)(this,Bt)[Bt])}}),Object.defineProperty(this,Nt,{writable:!0,value:()=>{(0,r.Z)(this,j)[j].clickLock.delete("coreDrawModel"),(0,r.Z)(this,j)[j].un("singleclick",(0,r.Z)(this,Bt)[Bt]),(0,r.Z)(this,he)[he]=!1}}),Object.defineProperty(this,Ht,{writable:!0,value:()=>{(0,r.Z)(this,j)[j].clickLock.add("coreDrawModel"),(0,r.Z)(this,j)[j].on("singleclick",(0,r.Z)(this,Wt)[Wt]),(0,r.Z)(this,ce)[ce]=!0}}),Object.defineProperty(this,Gt,{writable:!0,value:()=>{(0,r.Z)(this,j)[j].clickLock.delete("coreDrawModel"),(0,r.Z)(this,j)[j].un("singleclick",(0,r.Z)(this,Wt)[Wt]),(0,r.Z)(this,ce)[ce]=!0}}),this.drawSelectedFeature=e=>{try{const t=new T.Z({geometry:e.getGeometry().clone()});t.setId(Math.random().toString(36).substring(2,15)),t.set("USER_DRAWN",!0),t.set("DRAW_METHOD",e.get("DRAW_METHOD")),t.set("TEXT_SETTINGS",e.get("TEXT_SETTINGS")),t.setStyle((0,r.Z)(this,Ce)[Ce](t)),(0,r.Z)(this,L)[L].addFeature(t)}catch(t){console.error("Failed to add selected feature. Error: ".concat(t))}},Object.defineProperty(this,Wt,{writable:!0,value:async e=>{try{const t=await new Promise((t=>(0,D.handleClick)(e,e.map,t))),{features:i}=t,s=i.filter((e=>e.getGeometry()));if(1===s.length&&this.drawSelectedFeature(s[0]),s.length>1)return(0,r.Z)(this,ue)[ue]({subject:"drawModel.select.click",payLoad:s})}catch(t){console.error("Failed to select features in drawModel... Error: ".concat(t))}}}),Object.defineProperty(this,Bt,{writable:!0,value:e=>{if(0===(0,r.Z)(this,ne)[ne])return;const t=new T.Z({geometry:new b.Z(e.coordinate,(0,r.Z)(this,ne)[ne])});(0,r.Z)(this,L)[L].addFeature(t),(0,r.Z)(this,ut)[ut]({feature:t})}}),Object.defineProperty(this,Ut,{writable:!0,value:e=>{(0,r.Z)(this,ue)[ue]({subject:"drawModel.move.select",payLoad:e.selected}),e.deselected.forEach((e=>{e.setStyle((0,r.Z)(this,Ce)[Ce](e))}))}}),Object.defineProperty(this,Xt,{writable:!0,value:()=>{(0,r.Z)(this,L)[L].forEachFeature((e=>{e.on("propertychange",(0,r.Z)(this,Kt)[Kt])}))}}),Object.defineProperty(this,Vt,{writable:!0,value:()=>{(0,r.Z)(this,L)[L].forEachFeature((e=>{e.un("propertychange",(0,r.Z)(this,Kt)[Kt])}))}}),Object.defineProperty(this,Kt,{writable:!0,value:e=>this.refreshDrawLayer()}),Object.defineProperty(this,zt,{writable:!0,value:()=>{(0,r.Z)(this,L)[L].forEachFeature((e=>{e.get("EDIT_ACTIVE")&&e.set("EDIT_ACTIVE",!1)}))}}),Object.defineProperty(this,Yt,{writable:!0,value:()=>{(0,r.Z)(this,X)[X]&&this.toggleDrawInteraction((0,r.Z)(this,X)[X].get("DRAW_METHOD"))}}),Object.defineProperty(this,Jt,{writable:!0,value:e=>{switch(e){case"Arrow":return"LineString";case"Rectangle":return"Circle";case"Text":return"Point";default:return e}}}),Object.defineProperty(this,qt,{writable:!0,value:(e,t)=>{var i;return!!["Circle","Rectangle"].includes(e)||null!==(i=t.freehand)&&void 0!==i&&i}}),Object.defineProperty(this,Qt,{writable:!0,value:e=>{try{const t=JSON.parse(e.get("CIRCLE_CENTER")),i=parseFloat(e.get("CIRCLE_RADIUS"));e.setGeometry(new b.Z(t,i))}catch(t){console.error("Failed to create 'real' Circle geometry from supplied feature, error: ".concat(t))}}}),Object.defineProperty(this,$t,{writable:!0,value:(e,t)=>{const i=e.getExtent(),r=(0,P.getCenter)(i),s=null!==t&&void 0!==t?t:(0,P.getWidth)(i)/2;return new b.Z(r,s)}}),this.reBindFeaturePropertyListener=()=>{(0,r.Z)(this,Vt)[Vt](),(0,r.Z)(this,Xt)[Xt]()},this.refreshFeaturesTextStyle=()=>{(0,r.Z)(this,st)[st]()},this.addFeature=(e,t)=>{var i;const s=null!==(i=null===t||void 0===t?void 0:t.silent)&&void 0!==i&&i;try{e.get("CIRCLE_RADIUS")&&(0,r.Z)(this,Qt)[Qt](e);const t=e.get("EXTRACTED_STYLE");if(t){let i=(0,r.Z)(this,Ce)[Ce](e,t);i.getZIndex()||(i.setZIndex((0,r.Z)(this,de)[de]),(0,r.Z)(this,de)[de]++),e.setStyle(i)}(0,r.Z)(this,L)[L].addFeature(e),!s&&(0,r.Z)(this,ue)[ue]({subject:"drawModel.featureAdded",payLoad:e})}catch(o){console.error("Error while adding feature: ".concat(o)),(0,r.Z)(this,ue)[ue]({subject:"drawModel.addFeature.error",payLoad:o})}},this.addKmlFeatures=e=>{const t=(0,r.Z)(this,X)[X]?(0,r.Z)(this,X)[X].get("DRAW_METHOD"):null;t&&this.toggleDrawInteraction(""),e.forEach((e=>{!e.get("DRAW_METHOD")&&e.set("DRAW_METHOD",e.get("geometryType")||e.getGeometry().getType());const t=e.get("EXTRACTED_STYLE"),i=e.get("TEXT_SETTINGS"),r=e.get("USER_DRAWN");"string"===typeof t&&e.set("EXTRACTED_STYLE",JSON.parse(t)),"string"===typeof i&&e.set("TEXT_SETTINGS",JSON.parse(i)),"string"===typeof r&&e.set("USER_DRAWN",JSON.parse(r)),this.addFeature(e,{silent:!0})})),(0,r.Z)(this,st)[st](),t&&this.toggleDrawInteraction(t)},this.toggleKmlFeaturesVisibility=e=>{(0,r.Z)(this,L)[L].getFeatures().forEach((t=>{if(t.get("KML_ID")===e){var i;const e=null!==(i=t.get("HIDDEN"))&&void 0!==i&&i;t.set("HIDDEN",!e),t.setStyle((0,r.Z)(this,Ce)[Ce](t))}}))},this.toggleKmlFeaturesTextVisibility=e=>{(0,r.Z)(this,L)[L].getFeatures().forEach((t=>{if(t.get("KML_ID")===e){var i;const e=null===(i=t.get("SHOW_TEXT"))||void 0===i||i;t.set("SHOW_TEXT",!e),t.setStyle((0,r.Z)(this,Ce)[Ce](t))}}))},this.removeKmlFeaturesById=e=>{(0,r.Z)(this,L)[L].getFeatures().forEach((t=>{t.get("KML_ID")===e&&(0,r.Z)(this,L)[L].removeFeature(t)}))},this.duplicateFeature=e=>{try{const t=(0,r.Z)(this,ei)[ei](e),i=t.getGeometry()instanceof b.Z,s=i?t.getGeometry().getRadius():0;i&&t.setGeometry((0,f.Bb)(t.getGeometry()));const o=(0,r.Z)(this,F)[F].writeFeatureObject(t),a=(0,r.Z)(this,ti)[ti](),l=(0,O.Z)(o,a,140),n=(0,r.Z)(this,F)[F].readGeometry(l.geometry);i?t.setGeometry((0,r.Z)(this,$t)[$t](n,s)):t.setGeometry(n),t.set("EDIT_ACTIVE",!1),this.addFeature(t),this.refreshDrawLayer()}catch(t){console.error("Could not duplicate the supplied feature. Error: ".concat(t))}},this.translateSelectedFeatures=(e,t)=>{(0,r.Z)(this,J)[J].getFeatures().forEach((i=>{try{const s=i.getGeometry()instanceof b.Z,o=s?i.getGeometry().getRadius():0;s&&i.setGeometry((0,f.Bb)(i.getGeometry()));const a=(0,r.Z)(this,F)[F].writeFeatureObject(i),l=(0,O.Z)(a,e/1e3,t),n=(0,r.Z)(this,F)[F].readGeometry(l.geometry);s?i.setGeometry((0,r.Z)(this,$t)[$t](n,o)):i.setGeometry(n)}catch(s){console.error("Failed to translate selected features. Error: ".concat(s))}}))},Object.defineProperty(this,ei,{writable:!0,value:e=>{const t=e.clone(),i="Arrow"===e.get("DRAW_METHOD")?e.getStyle().map((e=>e.clone())):Array.isArray(e.getStyle())?e.getStyle()[0].clone():e.getStyle().clone();return t.setStyle(i),t}}),Object.defineProperty(this,ti,{writable:!0,value:()=>{const e=(0,r.Z)(this,j)[j].getView().calculateExtent((0,r.Z)(this,j)[j].getSize());return 5e-5*Math.sqrt((0,P.getArea)(e))}}),this.removeFeature=e=>{!0!==e.get("HIDDEN")&&((0,r.Z)(this,L)[L].removeFeature(e),(0,r.Z)(this,ue)[ue]({subject:"drawModel.featureRemoved",payLoad:e}))},this.getRGBAString=e=>e?Array.isArray(e)?"rgba(".concat(e[0],",").concat(e[1],",").concat(e[2],",").concat(e[3],")"):"object"===typeof e?"rgba(".concat(e.r,",").concat(e.g,",").concat(e.b,",").concat(e.a,")"):e:null,this.parseColorString=e=>{try{if("string"!==typeof e||e.length<7)return{};if(7===e.length&&e.startsWith("#")){const[t,i,r]=e.match(/\w\w/g).map((e=>parseInt(e,16)));return{r:t,g:i,b:r,a:1}}const t=/\(([^)]+)\)/.exec(e.replace(/\s/g,""))[1].split(",");return{r:parseFloat(t[0]),g:parseFloat(t[1]),b:parseFloat(t[2]),a:parseFloat(t[3])}}catch(t){return console.error("Color-string parsing failed: ".concat(t)),null}},this.toggleDrawInteraction=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((0,r.Z)(oi,St)[St](),!e||""===e)return;if("Delete"===e)return(0,r.Z)(oi,jt)[jt](t);if("Edit"===e)return(0,r.Z)(oi,At)[At](t);if("Move"===e)return(0,r.Z)(oi,Lt)[Lt](t);if("Select"===e)return(0,r.Z)(oi,Ht)[Ht](t);"Circle"===e&&(0,r.Z)(oi,_t)[_t]();const i=(0,r.Z)(oi,Jt)[Jt](e),s=(0,r.Z)(oi,qt)[qt](e,t);(0,r.Z)(oi,X)[X]=new n.ZP({source:(0,r.Z)(oi,L)[L],type:i,freehand:s,stopClick:!0,geometryFunction:"Rectangle"===e?(0,n.dO)():null,style:(0,r.Z)(oi,Je)[Je]()}),(0,r.Z)(oi,X)[X].set("DRAW_METHOD",e),(0,r.Z)(oi,ht)[ht](t),(0,r.Z)(oi,j)[j].addInteraction((0,r.Z)(oi,X)[X]),(0,r.Z)(oi,j)[j].clickLock.add("coreDrawModel"),(0,r.Z)(oi,j)[j].snapHelper.add("coreDrawModel")},this.finishDraw=()=>{(0,r.Z)(this,X)[X]&&(0,r.Z)(this,X)[X].finishDrawing()},this.zoomToCurrentExtent=()=>{null!==(0,r.Z)(this,R)[R]&&!1===(0,r.Z)(this,R)[R].map(Number.isFinite).includes(!1)&&(0,r.Z)(this,lt)[lt]((0,r.Z)(this,R)[R])},this.removeDrawnFeatures=()=>{const e=this.getAllDrawnFeatures();return e.filter((e=>!0!==e.get("HIDDEN"))).forEach((e=>{(0,r.Z)(this,L)[L].removeFeature(e)})),(0,r.Z)(this,de)[de]=1,(0,r.Z)(this,R)[R]=(0,r.Z)(this,L)[L].getExtent(),(0,r.Z)(this,ue)[ue]({subject:"drawModel.featuresRemoved",payLoad:e}),{status:"SUCCESS",removedFeatures:e}},this.setLayer=e=>null!==(0,r.Z)(this,X)[X]?(console.warn("The layer cannot be changed. The draw interaction is currently active. Disable the draw interaction before changing layer."),{status:"FAILED",message:"Disable draw to change layer."}):((0,r.Z)(this,I)[I]=e,(0,r.Z)(this,we)[we](),(0,r.Z)(this,R)[R]=(0,r.Z)(this,L)[L].getExtent(),{status:"SUCCESS",message:"Layer changed to ".concat(e)}),this.setShowDrawTooltip=e=>"boolean"!==typeof e?(0,r.Z)(this,mt)[mt]((0,r.Z)(this,G)[G],e):((0,r.Z)(this,G)[G]=e,{status:"SUCCESS",message:"Draw tooltip is now ".concat(e?"shown":"hidden")}),this.setDrawStyleSettings=e=>{const{fillColor:t,strokeColor:i}=e,s={...e,fillColor:"string"!==typeof t?this.getRGBAString(t):t,strokeColor:"string"!==typeof i?this.getRGBAString(i):i};(0,r.Z)(this,B)[B]=s,(0,r.Z)(this,Yt)[Yt]()},this.refreshDrawLayer=()=>{(0,r.Z)(this,L)[L].forEachFeature((e=>{"Arrow"===e.get("DRAW_METHOD")?(0,r.Z)(this,vt)[vt](e):e.setStyle((0,r.Z)(this,Ce)[Ce](e))}))},this.setFeatureAttribute=(e,t,i)=>{e instanceof T.Z&&e.set(t,i)},this.setTextStyleSettings=e=>{(0,r.Z)(this,U)[U]=e},this.setModifyActive=e=>{(0,r.Z)(this,$)[$]=e,e?(0,r.Z)(this,Ct)[Ct]():(0,r.Z)(this,kt)[kt]()},this.setTranslateActive=e=>{(0,r.Z)(this,ee)[ee]=e,e?(0,r.Z)(this,Mt)[Mt]():(0,r.Z)(this,xt)[xt]()},this.setMeasurementSettings=e=>{(0,r.Z)(this,W)[W]=e,(0,r.Z)(this,st)[st]()},this.setCircleRadius=e=>{(0,r.Z)(this,ne)[ne]=parseInt(e),Number.isNaN((0,r.Z)(this,ne)[ne])&&((0,r.Z)(this,ne)[ne]=0)},this.getMeasurementSettings=()=>(0,r.Z)(this,W)[W],this.getCurrentLayerName=()=>(0,r.Z)(this,I)[I],this.getCurrentVectorSource=()=>(0,r.Z)(this,L)[L],this.getCurrentExtent=()=>(0,r.Z)(this,R)[R],this.getModifyActive=()=>!!(0,r.Z)(this,Q)[Q],this.getTranslateActive=()=>!!(0,r.Z)(this,q)[q],this.getShowDrawTooltip=()=>(0,r.Z)(this,G)[G],this.getDrawStyleSettings=()=>(0,r.Z)(this,B)[B],this.getTextStyleSettings=()=>(0,r.Z)(this,U)[U],this.getCircleRadius=()=>(0,r.Z)(this,ne)[ne],!e.map||!e.layerName)return(0,r.Z)(this,be)[be]();(0,r.Z)(this,j)[j]=e.map,(0,r.Z)(this,I)[I]=e.layerName,(0,r.Z)(this,A)[A]=e.layerCaption,(0,r.Z)(this,F)[F]=new m.Z({featureProjection:(0,r.Z)(this,j)[j].getView().getProjection()}),(0,r.Z)(this,C)[C]=e.observer||null,(0,r.Z)(this,k)[k]=(0,r.Z)(this,Ze)[Ze](e),(0,r.Z)(this,oe)[oe]=e.customGetDrawImageStyle,(0,r.Z)(this,W)[W]=null!==(t=e.measurementSettings)&&void 0!==t?t:(0,r.Z)(this,ve)[ve](),(0,r.Z)(this,B)[B]=null!==(i=e.drawStyleSettings)&&void 0!==i?i:(0,r.Z)(this,ye)[ye](),(0,r.Z)(this,U)[U]=null!==(s=e.textStyleSettings)&&void 0!==s?s:(0,r.Z)(this,ge)[ge](),(0,r.Z)(this,R)[R]=null,(0,r.Z)(this,X)[X]=null,(0,r.Z)(this,V)[V]=!1,(0,r.Z)(this,K)[K]=!1,(0,r.Z)(this,Y)[Y]=!1,(0,r.Z)(this,Q)[Q]=null,(0,r.Z)(this,$)[$]=null!==(ii=e.modifyDefaultEnabled)&&void 0!==ii&&ii,(0,r.Z)(this,q)[q]=null,(0,r.Z)(this,ee)[ee]=null===(ri=e.translateDefaultEnabled)||void 0===ri||ri,(0,r.Z)(this,J)[J]=null,(0,r.Z)(this,z)[z]=null,(0,r.Z)(this,G)[G]=null===(si=e.showDrawTooltip)||void 0===si||si,(0,r.Z)(this,N)[N]=null,(0,r.Z)(this,H)[H]=null,(0,r.Z)(this,x)[x]=null,(0,r.Z)(this,_)[_]="position: relative; background: rgba(0, 0, 0, 0.5); border-radius: 4px; color: white; padding: 4px 8px; opacity: 0.7; white-space: nowrap;",(0,r.Z)(this,te)[te]=null,(0,r.Z)(this,ie)[ie]=null,(0,r.Z)(this,re)[re]=null,(0,r.Z)(this,se)[se]=null,(0,r.Z)(this,ae)[ae]="rgba(35,119,252,1)",(0,r.Z)(this,le)[le]="rgba(255,255,255,1)",(0,r.Z)(this,ne)[ne]=0,(0,r.Z)(this,ce)[ce]=!1,(0,r.Z)(this,de)[de]=1,(0,r.Z)(this,we)[we](),(0,r.Z)(this,Pe)[Pe]()}}}}]);
//# sourceMappingURL=4311.76dff013.chunk.js.map