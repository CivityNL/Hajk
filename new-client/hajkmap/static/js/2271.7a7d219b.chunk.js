"use strict";(self.webpackChunkhajk_client=self.webpackChunkhajk_client||[]).push([[2271,8619,3151,5532,5046,2670],{28619:(t,e,i)=>{i.r(e);var o=i(72791),s=i(66934),r=i(57621),n=i(93044),a=i(66647),l=i(9585),h=i(80184);const c=(0,s.ZP)(r.Z)((t=>{let{theme:e}=t;return{marginBottom:e.spacing(1),width:"210px",[e.breakpoints.down("sm")]:{boxShadow:"none",borderBottom:"1px solid #ccc",borderRadius:0,margin:0,width:"100%",justifyContent:"left"}}})),d=(0,s.ZP)(n.Z)((t=>{let{theme:e}=t;return{background:e.palette.text.primary}}));class p extends o.PureComponent{constructor(){super(...arguments),this.state={open:!1,text:""}}render(){const{abstract:t,icon:e,onClick:i,title:o}=this.props;return(0,h.jsx)(c,{onClick:i,children:(0,h.jsx)(a.Z,{children:(0,h.jsx)(l.Z,{avatar:(0,h.jsx)(d,{children:e}),title:o,subheader:t})})})}}p.defaultProps={abstract:"Beskrivning saknas",title:"Titel saknas"},e.default=p},73151:(t,e,i)=>{i.r(e);var o=i(72791),s=i(85286),r=i(54164),n=i(19538),a=i(45484),l=i(57064),h=i(49900),c=i(26191),d=i(28619),p=i(74599),u=i(80184);class g extends o.PureComponent{constructor(t){var e;super(t),e=this,this.handleButtonClick=t=>{this.showWindow({hideOtherPluginWindows:!0,runCallback:!0}),this.props.app.globalObserver.publish("core.onlyHideDrawerIfNeeded")},this.showWindow=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const i=t.hideOtherPluginWindows||!0,o=t.runCallback||!0;if(e.props.app.activeTool=e.type,e.props.app.globalObserver.publish("analytics.trackEvent",{eventName:"pluginShown",pluginName:e.type,activeMap:e.props.app.config.activeMap}),e.props.app.pushPluginIntoHistory({type:e.type,icon:e.props.custom.icon,title:e.title,description:e.description}),!0===e.state.windowVisible)return null;!0===i&&e.props.app.onWindowOpen(e),e.setState({windowVisible:!0},(()=>{e.props.app.globalObserver.publish("core.pluginVisibilityChanged"),!0===o&&"function"===typeof e.props.custom.onWindowShow&&e.props.custom.onWindowShow()}))},this.closeWindow=()=>{this.type===this.props.app.activeTool&&(this.props.app.activeTool=void 0),this.setState({windowVisible:!1},(()=>{this.props.app.globalObserver.publish("core.pluginVisibilityChanged"),"function"===typeof this.props.custom.onWindowHide&&this.props.custom.onWindowHide()}))},this.type=t.type.toLowerCase()||void 0,this.description=t.options.description||t.custom.description;const i=!1===this.props.app.config.mapConfig.map.clean&&(s.isMobile?t.options.visibleAtStartMobile:t.options.visibleAtStart)||!1;i&&this.props.app.globalObserver.publish("analytics.trackEvent",{eventName:"pluginShown",pluginName:this.type,activeMap:this.props.app.config.activeMap}),this.state={title:t.options.title||t.custom.title||"Unnamed plugin",color:t.options.color||t.custom.color||null,windowVisible:i},this.title=t.options.title||t.custom.title||"Unnamed plugin",this.width=t.options.width||t.custom.width||400,this.height=t.options.height||t.custom.height||"auto",this.position=t.options.position||t.custom.position||"left",t.app.registerWindowPlugin(this);const o="".concat(this.type,".showWindow");t.app.globalObserver.subscribe(o,(t=>{this.showWindow(t)}));const r="".concat(this.type,".closeWindow");t.app.globalObserver.subscribe(r,(()=>{this.closeWindow()}))}componentDidUpdate(t){t.custom.title!==this.props.custom.title&&this.setState({title:this.props.custom.title}),t.custom.color!==this.props.custom.color&&this.setState({color:this.props.custom.color})}pluginIsWidget(t){return["left","right"].includes(t)}renderWindow(t){const{target:e}=this.props.options;return"function"===typeof(null===t||void 0===t?void 0:t.render)?t.render():(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(c.default,{globalObserver:this.props.app.globalObserver,title:this.state.title,color:this.state.color,onClose:this.closeWindow,open:this.state.windowVisible,onResize:this.props.custom.onResize,onMaximize:this.props.custom.onMaximize,onMinimize:this.props.custom.onMinimize,draggingEnabled:this.props.custom.draggingEnabled,customPanelHeaderButtons:this.props.custom.customPanelHeaderButtons,resizingEnabled:this.props.custom.resizingEnabled,scrollable:this.props.custom.scrollable,allowMaximizedWindow:this.props.custom.allowMaximizedWindow,disablePadding:this.props.custom.disablePadding,width:this.width,height:this.height,position:this.position,mode:"window",layerswitcherConfig:this.props.app.config.mapConfig.tools.find((t=>"layerswitcher"===t.type)),children:o.cloneElement(this.props.children,{windowVisible:this.state.windowVisible})}),"hidden"!==e&&this.renderDrawerButton(),this.pluginIsWidget(e)&&this.renderWidgetButton("".concat(e,"-column")),"control"===e&&this.renderControlButton()]})}renderDrawerButton(){return(0,r.createPortal)((0,u.jsx)(n.Z,{mdUp:this.pluginIsWidget(this.props.options.target)||"control"===this.props.options.target,children:(0,u.jsxs)(a.ZP,{button:!0,divider:!0,selected:this.state.windowVisible,onClick:this.handleButtonClick,children:[(0,u.jsx)(l.Z,{children:this.props.custom.icon}),(0,u.jsx)(h.Z,{primary:this.title})]})}),document.getElementById("plugin-buttons"))}renderWidgetButton(t){return(0,r.createPortal)((0,u.jsx)(n.Z,{mdDown:!0,children:(0,u.jsx)(d.default,{icon:this.props.custom.icon,onClick:this.handleButtonClick,title:this.title,abstract:this.description})}),document.getElementById(t))}renderControlButton(){return(0,r.createPortal)((0,u.jsx)(n.Z,{mdDown:!0,children:(0,u.jsx)(p.default,{icon:this.props.custom.icon,onClick:this.handleButtonClick,title:this.title,abstract:this.description})}),document.getElementById("plugin-control-buttons"))}render(){return!0!==this.props.app.config.mapConfig.map.clean&&this.renderWindow(this.props.custom)}}e.default=g},69122:(t,e,i)=>{i.r(e);var o=i(72791),s=i(73151),r=i(41286),n=i(72830),a=i(5532),l=i(85194),h=i.n(l),c=(i(28452),i(80184));class d extends o.PureComponent{constructor(t){super(t),this.onWindowShow=()=>{this.drawModel.setActive(!0),this.drawModel.setDrawMethod()},this.onWindowHide=()=>{this.drawModel.setActive(!1)},this.localObserver=h()(),this.globalObserver=t.app.globalObserver,this.drawModel=new a.default({map:t.map,app:t.app,options:t.options,localObserver:this.localObserver})}render(){return(0,c.jsx)(s.default,{...this.props,type:"Draw",custom:{icon:(0,c.jsx)(r.Z,{}),title:"Rita",description:"Rita, m\xe4t, importera och exportera",height:"dynamic",width:285,top:void 0,left:void 0,onWindowShow:this.onWindowShow,onWindowHide:this.onWindowHide},children:(0,c.jsx)(n.default,{localObserver:this.localObserver,globalObserver:this.globalObserver,model:this.drawModel})})}}e.default=d},5532:(t,e,i)=>{i.r(e);var o=i(90927),s=i(66233),r=i(18029),n=i(5400),a=i(69236),l=i(64665),h=i(5426),c=i(9501),d=i(35844),p=i(56957),u=i(88490),g=i(68789),m=i(56134),f=i(79717),w=i(489),y=i(24673),b=i(42670),v=i(43572),P=i(75690),x=i(64802);e.default=class{constructor(t){this.getStyle=(t,e)=>{var i=t.getGeometryName();function h(){var t=(t,e)=>t.map((t=>e*t)),e=d.call(this),i=[12,7],o=[2,7];switch(c.call(this)){case"dash":return e>3?t(i,2):i;case"dot":return e>3?t(o,2):o;default:return}}function c(){switch(i){case"Polygon":return this.polygonLineStyle;case"Circle":return this.circleLineStyle;case"Square":return this.squareLineStyle;default:return this.lineStyle}}function d(){switch(i){case"Polygon":return this.polygonLineWidth;case"Circle":return this.circleLineWidth;case"Square":return this.squareLineWidth;default:return this.lineWidth}}function p(){if(e)return e.strokeColor;switch(i){case"Polygon":return this.polygonLineColor;case"Circle":return this.circleLineColor;case"Square":return this.squareLineColor;default:return this.lineColor}}const u=t.getGeometryName();return[new l.ZP({stroke:new s.Z({color:"rgba(255, 255, 255, 0.5)",width:"Polygon"===u?this.polygonLineWidth+2:this.lineWidth+2})}),new l.ZP({fill:function(){function t(t){let e=t.replace("#","");if(3===e.length){e=[...e].reduce(((t,e)=>t+(e+e)),"")}const i=parseInt(e,16),o=i>>8&255,s=255&i;return"rgb(".concat(i>>16&255,", ").concat(o,", ").concat(s,")")}var s=e?e.fillColor:function(){switch(i){case"Circle":return t(this.circleFillColor).replace("rgb","rgba").replace(")",", ".concat(this.circleFillOpacity,")"));case"Polygon":return t(this.polygonFillColor).replace("rgb","rgba").replace(")",", ".concat(this.polygonFillOpacity,")"));case"Square":return t(this.squareFillColor).replace("rgb","rgba").replace(")",", ".concat(this.squareFillOpacity,")"));default:return}}.call(this);return new o.Z({color:s})}.call(this),stroke:function(){var t=e?e.strokeColor:p.call(this),i=e?e.strokeWidth:d.call(this),o=e?e.strokeDash:h.call(this);return new s.Z({color:t,width:i,lineDash:o})}.call(this),image:function(){var t="Text"===u?0:e?e.pointRadius:this.pointRadius,i=e&&e.image||this.markerImg,a=new r.Z({anchor:[.5,1],anchorXUnits:"fraction",anchorYUnits:"fraction",src:i}),l=new n.Z({radius:t,fill:new o.Z({color:e?e.pointColor:this.pointColor}),stroke:new s.Z({color:"rgb(255, 255, 255)",width:2})});return e?e.image?a:l:this.pointSymbol&&"Text"!==u?a:l}.call(this),text:function(){var i=e?e.text:this.getLabelText(t);return"Text"===u?new a.Z({textAlign:"center",textBaseline:"middle",font:"".concat(this.fontSize,"px sans-serif"),text:i,fill:new o.Z({color:this.fontTextColor}),stroke:this.fontStroke?null:new s.Z({color:this.fontBackColor,width:1}),offsetX:0,offsetY:(()=>{var t=-15;return this.pointSymbol&&(t=-40),"Text"===u&&(t=0),t})(),rotation:0,scale:1.4}):new a.Z({textAlign:"center",textBaseline:"middle",font:"12pt sans-serif",fill:new o.Z({color:"#FFF"}),text:i,overflow:!0,stroke:new s.Z({color:"rgba(0, 0, 0, 0.5)",width:3}),offsetX:0,offsetY:-10,rotation:0,scale:1})}.call(this)})]},this.createStyle=(t,e)=>{const i=t&&"Text"===t.getProperties().type;return[new l.ZP({fill:new o.Z({color:"rgba(255, 255, 255, 0.3)"}),stroke:new s.Z({color:"rgba(0, 0, 0, 0.5)",width:3}),image:i?null:new n.Z({radius:5,stroke:new s.Z({color:"rgba(0, 0, 0, 0.7)"}),fill:new o.Z({color:"rgba(255, 255, 255, 0.2)"})}),text:new a.Z({textAlign:"center",textBaseline:"middle",font:"12pt sans-serif",fill:new o.Z({color:"#FFF"}),text:t&&this.getLabelText(t),overflow:!0,stroke:new s.Z({color:"rgba(0, 0, 0, 0.5)",width:3}),offsetX:0,offsetY:0,rotation:0,scale:1})})]},this.clear=()=>{this.source.clear(),this.select&&this.select.getFeatures().clear(),this.drawTooltip.setPosition(void 0)},this.handleDrawStart=t=>{this.circleRadius>0&&"Circle"===t.feature.getGeometryName()&&(t.feature.getGeometry().setRadius(this.circleRadius),this.draw.finishDrawing()),t.feature.getGeometry().on("change",(e=>{var i,o="",s=void 0;this.displayText&&(this.setFeaturePropertiesFromGeometry(t.feature),"edit"===this.drawMethod&&this.updateText(t.feature),"add"===this.drawMethod&&(this.pointerPosition&&(i=this.pointerPosition.coordinate),e.target instanceof d.Z&&(o=this.formatLabel("length",e.target.getLength()),s=e.target.getLastCoordinate()),e.target instanceof p.ZP&&(o=this.formatLabel("area",e.target.getArea()),s=i||e.target.getFirstCoordinate()),this.drawTooltipElement.innerHTML=o,this.drawTooltip.setPosition(s)))}))},this.handleDrawEnd=t=>{this.text&&this.localObserver.publish("dialog",t.feature),this.setFeaturePropertiesFromGeometry(t.feature),this.drawTooltip.setPosition(void 0),t.feature.setStyle(this.getStyle(t.feature))},this.removeSelected=t=>{var e=!0;this.map.forEachFeatureAtPixel(t.pixel,(t=>{!0===t.getProperties().user&&e&&this.source.removeFeature(t),e=!1}))},this.import=(t,e)=>{var i=new v.ZP,o=[],s=!1;try{o=i.readFeatures(t)}catch(r){return e(r)}if(!(o.length>0))return e("no-features-found");if(o.forEach((t=>{this.tanslateImportedFeature(t)})),this.source.addFeatures(o),s=this.calculateExtent(o)){let t=this.map.getSize();this.map.getView().fit(s,t)}},this.export=()=>{try{new Blob}catch{return void console.info("KML export not supported on current platform.")}const t=this.source.getFeatures(),e=[];let i;t.forEach((t=>{const i=t.clone();let o=!1;if(i.getGeometry()instanceof u.Z){const e=(0,p.Bb)(t.getGeometry(),96);i.setGeometry(e),o=t.getGeometry().getRadius()}i.getGeometry().transform(this.map.getView().getProjection(),"EPSG:4326"),i.getStyle()[1]&&i.setProperties({style:JSON.stringify(this.extractStyle(i.getStyle()[1]||i.getStyle()[0],o)),geometryType:"geometry"===i.getGeometryName()?i.getProperties().geometryType:i.getGeometryName()}),e.push(i)})),t.length>0&&(i=(0,P.createXML)(e,"ritobjekt"),(0,x.saveAs)(new Blob([i],{type:"application/vnd.google-earth.kml+xml;charset=utf-8"}),"Ritexport - ".concat((new Date).toLocaleString(),".kml")))},this.editText=t=>{this.map.forEachFeatureAtPixel(t.pixel,(t=>{t.getProperties().type&&"Text"===t.getProperties().type&&this.localObserver.publish("dialog",t)}))},this.map=t.map,this.app=t.app,this.options=t.options,this.localObserver=t.localObserver,this.globalObserver=t.app.globalObserver,this.source=new h.Z,this.vector=new c.Z({layerType:"system",zIndex:5e3,name:"pluginDraw",caption:"Draw layer",source:this.source}),this.map.addLayer(this.vector),this.type="LineString",this.displayText=!1,this.createDrawTooltip(),this.fontSize="10",this.fontTextColor="#000000",this.fontBackColor="#FFFFFF",this.fontStroke=!1,this.pointText="Text",this.pointColor="#009CE0",this.pointRadius=7,this.lineColor="#009CE0",this.lineWidth=3,this.lineStyle="solid",this.circleFillColor="#FFF",this.circleLineColor="#009CE0",this.circleFillOpacity=.5,this.circleLineStyle="solid",this.circleLineWidth=3,this.circleRadius=0,this.polygonLineColor="#009CE0",this.polygonLineWidth=3,this.polygonLineStyle="solid",this.polygonFillColor="#FFF",this.polygonFillOpacity=.5,this.squareFillColor="#FFF",this.squareLineColor="#009CE0",this.squareFillOpacity=.5,this.squareLineStyle="solid",this.squareLineWidth=3,this.drawMethod="add",this.pointSettings="point",this.markerImg="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAQAAABIkb+zAAADpElEQVR4Ae3aA9DsSBQF4DNa2+ZvZNL3lNa2d0tr24W1bdu2bdu2beO5l8/InX/6JpmqfKdcgz4dA4VCoVAohNQ7mSwrB8k5cjOf4gcyiL/zA3lcbpZzeIAsyxpyrMLV5Ab+Tj+J/C7XcTVUkDcLTCG7yWf0ushnsnvb5MiNqtuZX9I3mC+5A6rIHtfme/QDzHtuTWSqIifSNxc5IbMtgtPLffTNR+7j9EhffW6+TR8ob0XzIF2cTz6nDxf5nPMhPV0z8336wHm/a2akgzU+TW+Qp1M6TvMieqNcBHvcgN4wG8BW2+TyuWUB+dz4FEP2obeN7Gt76PrNvMBvhoc1OZbePnKM2e5TfqVPIb8Y7U5lHf0gZJBc5TaJ43iGvxO7TeQqGUT9t9eBBblKPYR73PwYh5ufd6sLXA0DJf6kHMCRmLCSHE6vyk8oIbR4MeXsHY5JcEfQaxIvhtDcnrqVJ2HuSryHXpG9EJqcr9l0k8/r++ZVbc7nITR5RFHgMijIZYpfegSh8YNQp2Ka00H5EKHxe/qkRJ1QiDoVU/E9QpMR9EnpnBYKndMqlsBwhMY/6JPSNh0U2qajT8wfCI2f0CfF9UDB9SgKfILQ+EKaGzFfQGiqA9AVUOAVqgNiaHK66kC2IBJEC2oOZHI6QpPNdLcJk04ldLcjZTOEVu9Vn4tOAo+i16Tei+DK/KPJ89GSHEavyh8oIzy5o5kLmv6FeI/2+3InLHCrRi8pXT2egdO7uttEruIQenW2MrqlKyPo7SMjemeCDT5An0IegBW3XSoFtoeVaGoZZD18GcSpYEcuNC9wISzFi1oXiBeFLb5tOv/vwppsZlpgM5irykdmBT5GFfbcFlYF3BYwYr8M7OfffjuQzZGaMt8MXuAtlJEet17oAm49pEteClrgFaTNLR/0+LsC0sdrgxW4FlnonSPMU0v5tW92ZIPb257/2yvJ403P/xMoITtRJ4c1VWBY1IlsydFNzf/RyNo8U/KTARf4dJ4pkb14rQHv/ddCPvCKARW4AnnRNh2/aHj4X7RNh/yIl260gFsK+dLYW9RyEvKGNXlOXeB51pA/9bn5nWr437u5kE/x0jI8+RG2WxL5JQcmFjgQuVbmU5Ms8DTKyLe+eeWHic7+j9E8yD+uOOEtQYZzRbQG2W2CBXaDHfsX1OR8tJSKPDnW8J9EBa0lmk2+HjX8r6PZ0Hoo/z8bHkJBa5Kt6ella7QuHsWjYKZQKBQKhb8AaFXSW3c/idsAAAAASUVORK5CYII=",this.sketchStyle=[new l.ZP({fill:new o.Z({color:"rgba(255, 255, 255, 0.5)"}),stroke:new s.Z({color:"rgba(0, 0, 0, 0.5)",width:4}),image:new n.Z({radius:6,fill:new o.Z({color:"rgba(0, 0, 0, 0.5)"}),stroke:new s.Z({color:"rgba(255, 255, 255, 0.5)",width:2})})})],this.localObserver.subscribe("update",(()=>{this.redraw()}))}redraw(){this.vector.changed(),this.source.getFeatures().forEach((t=>{this.updateText(t)}))}updateText(t){t.getStyle()[1].getText().setText(this.getLabelText(t))}tanslateImportedFeature(t){var e=t.getGeometry().getCoordinates(),i=t.getGeometry().getType(),o=[];t.setProperties({user:!0}),t.getProperties().geometryType&&"Text"!==t.getProperties().geometryType&&t.setProperties({text:""}),"LineString"===i?(e.forEach(((t,e)=>{var i=[];t.forEach((t=>{0!==t&&i.push(t)})),o.push(i)})),t.getGeometry().setCoordinates(o)):"Polygon"===i&&(e.forEach(((t,e)=>{o[e]=[],t.forEach(((t,i)=>{var s=[];t.forEach((t=>{0!==t&&s.push(t)})),o[e].push(s)}))})),t.getGeometry().setCoordinates(o)),t.getGeometry().transform("EPSG:4326",this.map.getView().getProjection()),this.setStyleFromProperties(t),"Circle"===t.getProperties().geometryType&&t.getProperties().style&&t.setProperties({radius:JSON.parse(t.getProperties().style).radius})}extractStyle(t,e){var i={text:"",image:"",pointRadius:0,pointColor:"",fillColor:"",strokeColor:"",strokeWidth:"",strokeDash:""};return i.text=t.getText()?t.getText().getText():"",i.image=t.getImage()instanceof r.Z?t.getImage().getSrc():"",i.pointRadius=t.getImage()instanceof n.Z?t.getImage().getRadius():"",e&&(i.radius=e),i.pointColor=t.getImage()instanceof n.Z?t.getImage().getFill().getColor():"",i.fillColor=t.getFill().getColor(),i.strokeColor=t.getStroke().getColor(),i.strokeWidth=t.getStroke().getWidth(),i.strokeDash=t.getStroke().getLineDash(),i}setType(t){this.type=t,this.removeInteraction(),this.addInteraction(t)}setEditActive(){let t=new g.Z;this.source.getFeatures().forEach((e=>{t.push(e)})),this.edit=new f.Z({features:t}),this.map.addInteraction(this.edit),this.map.snapHelper.add("draw")}setMoveActive(){this.select=new w.Z,this.move=new y.Z({features:this.select.getFeatures()}),this.map.addInteraction(this.move),this.map.addInteraction(this.select),this.map.snapHelper.add("draw")}setDrawMethod(t){t&&(this.drawMethod=t),this.removeInteraction(),"remove"===this.drawMethod&&this.map.on("singleclick",this.removeSelected),"add"===this.drawMethod&&(this.text&&(this.type="Text"),this.setType(this.type)),"edit"===this.drawMethod&&(this.setEditActive(),this.map.on("singleclick",this.editText)),"move"===this.drawMethod&&this.setMoveActive()}removeInteraction(){this.drawTooltip.setPosition(void 0),this.map.un("singleclick",this.removeSelected),this.map.un("singleclick",this.editText),this.draw&&(this.map.snapHelper.delete("draw"),this.map.removeInteraction(this.draw)),this.edit&&(this.map.snapHelper.delete("draw"),this.map.removeInteraction(this.edit)),this.move&&(this.map.snapHelper.delete("draw"),this.map.removeInteraction(this.move)),this.select&&(this.select.getFeatures().forEach((t=>{t.get("_s")&&t.setStyle(t.get("_s"))})),this.map.snapHelper.delete("draw"),this.map.removeInteraction(this.select))}setFeaturePropertiesFromGeometry(t){if(t){var e,i,o=0,s=0,r=0,n={n:0,e:0};switch(i=(e=t.getGeometry()).getType()){case"Point":n={n:Math.round(e.getCoordinates()[1]),e:Math.round(e.getCoordinates()[0])};break;case"LineString":o=e.getLength()<1e3?Math.round(10*e.getLength())/10:Math.round(e.getLength());break;case"Polygon":r=Math.round(e.getArea());break;case"Circle":s=Math.round(e.getRadius())}t.setProperties({type:i,user:!0,length:o,area:r,radius:s,position:n})}}setFeaturePropertiesFromText(t,e){t&&t.setProperties({type:"Text",user:!0,text:e})}formatLabel(t,e){var i;if("text"===t&&(i=e),"point"===t&&(i="Nord: "+e.n+" \xd6st: "+e.e),"number"===typeof e&&(e="length"===t&&e<1e3?Math.round(10*e)/10:Math.round(e)),"circle"===t){let t=" m",o=" m\xb2";e>=1e3&&(t=" km",e/=1e3),i="R = "+e+t+" \nA = "+Math.round(e*e*Math.PI*1e3)/1e3+o}if("area"===t){let t=" m\xb2";e>=1e6&&(t=" km\xb2",e=Math.round(e/1e6*1e3)/1e3),i=e+t}if("length"===t){let t=" m";e>=1e3&&(t=" km",e/=1e3),i=e+t}return i}createDrawTooltip(){this.drawTooltipElement&&this.drawTooltipElement.parentNode.removeChild(this.drawTooltipElement),this.drawTooltipElement=document.createElement("div"),this.drawTooltipElement.className="tooltip-draw tooltip-Draw",this.drawTooltip=new b.Z({element:this.drawTooltipElement,offset:[0,-15],positioning:"bottom-center"}),this.map.addOverlay(this.drawTooltip)}getLabelText(t){const e=t.getProperties();var i=t.getGeometryName();switch("geometry"===i&&(i=t.getProperties().geometryType),i){case"LineString":return this.displayText?this.formatLabel("length",e.length):null;case"Polygon":case"Square":return this.displayText?this.formatLabel("area",e.area):null;case"Circle":return this.displayText?this.formatLabel("circle",e.radius):null;case"Point":return this.displayText?this.formatLabel("point",e.position):null;case"Text":return this.formatLabel("text",e.text);default:return""}}setStyleFromProperties(t){if(t.getProperties().style)try{const e=JSON.parse(t.getProperties().style);"Text"===t.getProperties().geometryType?this.setFeaturePropertiesFromText(t,e.text):this.setFeaturePropertiesFromGeometry(t),t.setStyle(this.getStyle(t,e))}catch(e){console.error("Style attribute could not be parsed.",e)}else{const e=t.getStyleFunction();if(e){let i=e(t,this.map.getView().getResolution());i[0]&&i[0].getFill&&null===i[0].getFill()&&i[0].setFill(new o.Z({color:[0,0,0,0]})),t.setStyle(i)}}}calculateExtent(t){var e=[];return t.forEach(((t,i)=>{var o=t.getGeometry().getExtent();if(0===i)e=o;else{let t=0;for(;t<4;t++)t<2?e[t]>o[t]&&(e[t]=o[t]):e[t]<o[t]&&(e[t]=o[t])}})),!!e.every((t=>t))&&e}addInteraction(){var t,e=this.type.toString();this.text=!1;var i=this.type;this.interactionType=this.type,"Text"===i&&(i="Point",this.text=!0),"Square"===i&&(i="Circle",t=(0,m.dO)()),this.draw=new m.ZP({source:this.source,type:i,style:this.createStyle(),geometryFunction:t,geometryName:e}),this.draw.on("drawstart",this.handleDrawStart),this.draw.on("drawend",this.handleDrawEnd),this.map.addInteraction(this.draw),this.map.snapHelper.add("draw")}setActive(t){t&&!this.active&&(this.map.clickLock.add("draw"),this.addInteraction()),!1===t&&(this.removeInteraction(),this.map.clickLock.delete("draw")),this.active=t}getMap(){return this.map}openDialog(t){this.globalObserver.publish("core.dialogOpen",t)}}},66647:(t,e,i)=>{i.d(e,{Z:()=>b});var o=i(87462),s=i(63366),r=i(72791),n=i(28182),a=i(94419),l=i(31402),h=i(66934),c=i(75878),d=i(21217);function p(t){return(0,d.Z)("MuiCardActionArea",t)}var u=(0,c.Z)("MuiCardActionArea",["root","focusVisible","focusHighlight"]),g=i(50533),m=i(80184);const f=["children","className","focusVisibleClassName"],w=(0,h.ZP)(g.Z,{name:"MuiCardActionArea",slot:"Root",overridesResolver:(t,e)=>e.root})((t=>{let{theme:e}=t;return{display:"block",textAlign:"inherit",width:"100%",["&:hover .".concat(u.focusHighlight)]:{opacity:(e.vars||e).palette.action.hoverOpacity,"@media (hover: none)":{opacity:0}},["&.".concat(u.focusVisible," .").concat(u.focusHighlight)]:{opacity:(e.vars||e).palette.action.focusOpacity}}})),y=(0,h.ZP)("span",{name:"MuiCardActionArea",slot:"FocusHighlight",overridesResolver:(t,e)=>e.focusHighlight})((t=>{let{theme:e}=t;return{overflow:"hidden",pointerEvents:"none",position:"absolute",top:0,right:0,bottom:0,left:0,borderRadius:"inherit",opacity:0,backgroundColor:"currentcolor",transition:e.transitions.create("opacity",{duration:e.transitions.duration.short})}}));var b=r.forwardRef((function(t,e){const i=(0,l.Z)({props:t,name:"MuiCardActionArea"}),{children:r,className:h,focusVisibleClassName:c}=i,d=(0,s.Z)(i,f),u=i,g=(t=>{const{classes:e}=t;return(0,a.Z)({root:["root"],focusHighlight:["focusHighlight"]},p,e)})(u);return(0,m.jsxs)(w,(0,o.Z)({className:(0,n.default)(g.root,h),focusVisibleClassName:(0,n.default)(c,g.focusVisible),ref:e,ownerState:u},d,{children:[r,(0,m.jsx)(y,{className:g.focusHighlight,ownerState:u})]}))}))},9585:(t,e,i)=>{i.d(e,{Z:()=>P});var o=i(63366),s=i(87462),r=i(72791),n=i(28182),a=i(94419),l=i(20890),h=i(31402),c=i(66934),d=i(75878),p=i(21217);function u(t){return(0,p.Z)("MuiCardHeader",t)}var g=(0,d.Z)("MuiCardHeader",["root","avatar","action","content","title","subheader"]),m=i(80184);const f=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],w=(0,c.ZP)("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(t,e)=>(0,s.Z)({["& .".concat(g.title)]:e.title,["& .".concat(g.subheader)]:e.subheader},e.root)})({display:"flex",alignItems:"center",padding:16}),y=(0,c.ZP)("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(t,e)=>e.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),b=(0,c.ZP)("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(t,e)=>e.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),v=(0,c.ZP)("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(t,e)=>e.content})({flex:"1 1 auto"});var P=r.forwardRef((function(t,e){const i=(0,h.Z)({props:t,name:"MuiCardHeader"}),{action:r,avatar:c,className:d,component:p="div",disableTypography:g=!1,subheader:P,subheaderTypographyProps:x,title:C,titleTypographyProps:Z}=i,T=(0,o.Z)(i,f),S=(0,s.Z)({},i,{component:p,disableTypography:g}),F=(t=>{const{classes:e}=t;return(0,a.Z)({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},u,e)})(S);let M=C;null==M||M.type===l.Z||g||(M=(0,m.jsx)(l.Z,(0,s.Z)({variant:c?"body2":"h5",className:F.title,component:"span",display:"block"},Z,{children:M})));let k=P;return null==k||k.type===l.Z||g||(k=(0,m.jsx)(l.Z,(0,s.Z)({variant:c?"body2":"body1",className:F.subheader,color:"text.secondary",component:"span",display:"block"},x,{children:k}))),(0,m.jsxs)(w,(0,s.Z)({className:(0,n.default)(F.root,d),as:p,ref:e,ownerState:S},T,{children:[c&&(0,m.jsx)(y,{className:F.avatar,ownerState:S,children:c}),(0,m.jsxs)(v,{className:F.content,ownerState:S,children:[M,k]}),r&&(0,m.jsx)(b,{className:F.action,ownerState:S,children:r})]}))}))},57621:(t,e,i)=>{i.d(e,{Z:()=>w});var o=i(87462),s=i(63366),r=i(72791),n=i(28182),a=i(94419),l=i(66934),h=i(31402),c=i(35527),d=i(75878),p=i(21217);function u(t){return(0,p.Z)("MuiCard",t)}(0,d.Z)("MuiCard",["root"]);var g=i(80184);const m=["className","raised"],f=(0,l.ZP)(c.Z,{name:"MuiCard",slot:"Root",overridesResolver:(t,e)=>e.root})((()=>({overflow:"hidden"})));var w=r.forwardRef((function(t,e){const i=(0,h.Z)({props:t,name:"MuiCard"}),{className:r,raised:l=!1}=i,c=(0,s.Z)(i,m),d=(0,o.Z)({},i,{raised:l}),p=(t=>{const{classes:e}=t;return(0,a.Z)({root:["root"]},u,e)})(d);return(0,g.jsx)(f,(0,o.Z)({className:(0,n.default)(p.root,r),elevation:l?8:void 0,ref:e,ownerState:d},c))}))},42670:(t,e,i)=>{var o=i(45957),s=i(5989),r=i(99148),n=i(37130),a=i(30923),l=i(1408);const h="element",c="map",d="offset",p="position",u="positioning";class g extends o.Z{constructor(t){super(),this.on,this.once,this.un,this.options=t,this.id=t.id,this.insertFirst=void 0===t.insertFirst||t.insertFirst,this.stopEvent=void 0===t.stopEvent||t.stopEvent,this.element=document.createElement("div"),this.element.className=void 0!==t.className?t.className:"ol-overlay-container "+r.$A,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=!0===t.autoPan?{}:t.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(h,this.handleElementChanged),this.addChangeListener(c,this.handleMapChanged),this.addChangeListener(d,this.handleOffsetChanged),this.addChangeListener(p,this.handlePositionChanged),this.addChangeListener(u,this.handlePositioningChanged),void 0!==t.element&&this.setElement(t.element),this.setOffset(void 0!==t.offset?t.offset:[0,0]),this.setPositioning(t.positioning||"top-left"),void 0!==t.position&&this.setPosition(t.position)}getElement(){return this.get(h)}getId(){return this.id}getMap(){return this.get(c)||null}getOffset(){return this.get(d)}getPosition(){return this.get(p)}getPositioning(){return this.get(u)}handleElementChanged(){(0,l.ep)(this.element);const t=this.getElement();t&&this.element.appendChild(t)}handleMapChanged(){this.mapPostrenderListenerKey&&((0,l.ZF)(this.element),(0,a.bN)(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const t=this.getMap();if(t){this.mapPostrenderListenerKey=(0,a.oL)(t,s.Z.POSTRENDER,this.render,this),this.updatePixelPosition();const e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(t){this.set(h,t)}setMap(t){this.set(c,t)}setOffset(t){this.set(d,t)}setPosition(t){this.set(p,t)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(t){const e=this.getMap();if(!e||!e.getTargetElement()||!this.get(p))return;const i=this.getRect(e.getTargetElement(),e.getSize()),o=this.getElement(),s=this.getRect(o,[(0,l.iO)(o),(0,l.Pb)(o)]),r=void 0===(t=t||{}).margin?20:t.margin;if(!(0,n.containsExtent)(i,s)){const o=s[0]-i[0],n=i[2]-s[2],a=s[1]-i[1],l=i[3]-s[3],h=[0,0];if(o<0?h[0]=o-r:n<0&&(h[0]=Math.abs(n)+r),a<0?h[1]=a-r:l<0&&(h[1]=Math.abs(l)+r),0!==h[0]||0!==h[1]){const i=e.getView().getCenterInternal(),o=e.getPixelFromCoordinateInternal(i);if(!o)return;const s=[o[0]+h[0],o[1]+h[1]],r=t.animation||{};e.getView().animateInternal({center:e.getCoordinateFromPixelInternal(s),duration:r.duration,easing:r.easing})}}}getRect(t,e){const i=t.getBoundingClientRect(),o=i.left+window.pageXOffset,s=i.top+window.pageYOffset;return[o,s,o+e[0],s+e[1]]}setPositioning(t){this.set(u,t)}setVisible(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)}updatePixelPosition(){const t=this.getMap(),e=this.getPosition();if(!t||!t.isRendered()||!e)return void this.setVisible(!1);const i=t.getPixelFromCoordinate(e),o=t.getSize();this.updateRenderedPosition(i,o)}updateRenderedPosition(t,e){const i=this.element.style,o=this.getOffset(),s=this.getPositioning();this.setVisible(!0);const r=Math.round(t[0]+o[0])+"px",n=Math.round(t[1]+o[1])+"px";let a="0%",l="0%";"bottom-right"==s||"center-right"==s||"top-right"==s?a="-100%":"bottom-center"!=s&&"center-center"!=s&&"top-center"!=s||(a="-50%"),"bottom-left"==s||"bottom-center"==s||"bottom-right"==s?l="-100%":"center-left"!=s&&"center-center"!=s&&"center-right"!=s||(l="-50%");const h="translate(".concat(a,", ").concat(l,") translate(").concat(r,", ").concat(n,")");this.rendered.transform_!=h&&(this.rendered.transform_=h,i.transform=h)}getOptions(){return this.options}}e.Z=g}}]);
//# sourceMappingURL=2271.7a7d219b.chunk.js.map