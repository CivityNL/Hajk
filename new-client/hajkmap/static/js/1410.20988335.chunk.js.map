{"version":3,"file":"static/js/1410.20988335.chunk.js","mappings":"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","sources":["plugins/DocumentHandler/panelMenu/PanelList.js","plugins/DocumentHandler/panelMenu/PanelMenuContainerView.js","plugins/DocumentHandler/panelMenu/PanelMenuListItem.js","plugins/DocumentHandler/panelMenu/panelMenuUtils.js","plugins/DocumentHandler/utils/helpers.js","plugins/DocumentHandler/utils/stateConverter.js"],"sourcesContent":["import React from \"react\";\nimport List from \"@mui/material/List\";\nimport PanelMenuListItem from \"./PanelMenuListItem\";\n\nclass PanelList extends React.PureComponent {\n  getMenuItemType = (item, type) => {\n    return (\n      <PanelMenuListItem\n        {...this.props}\n        type={type}\n        menu={item.menu}\n        icon={item.icon}\n        id={item.id}\n        level={item.level}\n        color={item.color}\n        title={item.title}\n        itemRef={item.itemRef}\n        subMenuItems={this.#getSubMenuItems(item)}\n        expanded={item.expandedSubMenu}\n        colored={item.colored}\n        selected={item.selected}\n      ></PanelMenuListItem>\n    );\n  };\n\n  #getSubMenuItems = (item) => {\n    return item.menuItemIds.reduce((subMenuItems, subItemId) => {\n      const subItem = Object.values(this.props.items).find((i) => {\n        return i.id === subItemId;\n      });\n      if (subItem.menuItemIds.length > 0) {\n        subMenuItems = [...subMenuItems, ...this.#getSubMenuItems(subItem)];\n      }\n      return [...subMenuItems, subItem];\n    }, []);\n  };\n\n  #renderMenuItem = (item) => {\n    if (item.menuItemIds && item.menuItemIds.length > 0) {\n      return this.getMenuItemType(item, \"submenu\");\n    } else if (item.document) {\n      return this.getMenuItemType(item, \"document\");\n    } else if (item.link) {\n      return this.getMenuItemType(item, \"link\");\n    } else if (item.maplink) {\n      return this.getMenuItemType(item, \"maplink\");\n    }\n  };\n\n  render() {\n    const { items, level } = this.props;\n    return (\n      <List\n        style={{ position: \"static\" }}\n        disablePadding\n        id={`panellist_${level}`}\n        role=\"navigation\"\n        component=\"nav\"\n      >\n        {Object.values(items)\n          .filter((item) => {\n            return item.level === level;\n          })\n          .map((item) => {\n            return (\n              <React.Fragment key={item.id}>\n                {this.#renderMenuItem(item, item.id)}\n              </React.Fragment>\n            );\n          })}\n      </List>\n    );\n  }\n}\n\nexport default PanelList;\n","import React from \"react\";\nimport PanelList from \"./PanelList\";\nimport Box from \"@mui/material/Box\";\nimport { getIsMobile } from \"../../../utils/IsMobile\";\nimport { delay } from \"../../../utils/Delay\";\nimport { animateScroll as scroll } from \"react-scroll\";\nimport { hasSubMenu } from \"../utils/helpers\";\nimport { getNormalizedMenuState } from \"../utils/stateConverter\";\nimport {\n  isExpandedTopLevelItem,\n  getItemIdsToColor,\n  findMenuItemWithDocumentName,\n} from \"../panelMenu/panelMenuUtils\";\n\nclass PanelMenuView extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.#bindSubscriptions();\n  }\n\n  internalId = 0;\n\n  state = {};\n\n  componentDidMount = () => {\n    this.#initializeItems();\n  };\n\n  #bindSubscriptions = () => {\n    const { localObserver } = this.props;\n    localObserver.subscribe(\"submenu-clicked\", this.#handleSubMenuClicked);\n    localObserver.subscribe(\n      \"document-link-clicked\",\n      this.#handleOpenDocumentFromLink\n    );\n    localObserver.subscribe(\"document-clicked\", this.#openEventualConnections);\n    localObserver.subscribe(\"link-clicked\", this.#handleExternalLinkClicked);\n    localObserver.subscribe(\n      \"document-maplink-clicked\",\n      this.#handleShowMapLayersFromLink\n    );\n    localObserver.subscribe(\n      \"maplink-clicked\",\n      this.#handleShowMapLayersFromPanelMenu\n    );\n    localObserver.subscribe(\"document-window-closed\", this.#clearPanel);\n  };\n\n  #initializeItems = () => {\n    const { options } = this.props;\n    options.menuConfig.menu.forEach(this.#setInitialMenuItemProperties);\n    this.setState(getNormalizedMenuState(options.menuConfig.menu));\n  };\n\n  // Adds highlighting on the selected document by checking if the provided\n  // document (from props) matches the current menu-item.\n  #setInitialMenuItemProperties = (menuItem) => {\n    const { document, options = {} } = this.props;\n    // Since this code only runs on mount, we should be allowed to check\n    // for the selected document by using \"documentOnStart\" instead of the supplied\n    // document. Added this fallback since the document from props is not always\n    // defined, probably because of timing issues...\n    const itemMatchesOpenDocument =\n      (document && menuItem.document === document.documentFileName) ||\n      (options.documentOnStart !== \"\" &&\n        options.documentOnStart === menuItem.document);\n    // Do not use spread because we are mutating original item\n    Object.assign(menuItem, {\n      id: this.#getNextUniqueId(),\n      selected: itemMatchesOpenDocument,\n      colored: itemMatchesOpenDocument,\n    });\n    if (hasSubMenu(menuItem)) {\n      menuItem.hasSubMenu = true;\n      menuItem.menu.forEach((subMenuItem) => {\n        this.#setInitialMenuItemProperties(subMenuItem, menuItem);\n      });\n    }\n  };\n\n  //------------------Handle events-------------------------\n\n  #handleOpenDocumentFromLink = ({ documentName, headerIdentifier }) => {\n    const itemClicked = findMenuItemWithDocumentName(documentName, this.state);\n    this.#setDocument(documentName, headerIdentifier);\n    this.#setItemStateProperties(itemClicked.id).then(() => {\n      this.#scrollToMenuItem(itemClicked.itemRef.current.offsetTop);\n    });\n  };\n\n  #handleOpenDocumentFromPanelMenu = (id) => {\n    const { app } = this.props;\n    const { document } = this.state[id];\n    if (document) {\n      this.#setDocument(document, null);\n      this.#setItemStateProperties(id).then(() => {\n        app.globalObserver.publish(\"core.onlyHideDrawerIfNeeded\");\n      });\n    }\n  };\n\n  // The panel-menu buttons can contain several \"connections\" (external-link, map-link, and document)\n  // Make sure to fire each handler, the handler itself checks if a connection is present.\n  #openEventualConnections = (id) => {\n    // Remember, the handlers below wont do anything if the connection value is nullish.\n    this.#handleOpenDocumentFromPanelMenu(id);\n    this.#handleExternalLinkClicked(id);\n    this.#handleShowMapLayersFromPanelMenu(id);\n  };\n\n  #handleShowMapLayers = (mapLink) => {\n    const { options, localObserver, app } = this.props;\n    if (options.displayLoadingOnMapLinkOpen) {\n      localObserver.publish(\"maplink-loading\");\n    }\n    app.globalObserver.publish(\"core.onlyHideDrawerIfNeeded\");\n    this.#delayAndFlyToMapLink(mapLink);\n  };\n\n  #closeDocumentWindow = () => {\n    const { app } = this.props;\n    this.#setDocument();\n    app.globalObserver.publish(\"documentviewer.closeWindow\");\n  };\n\n  #handleShowMapLayersFromLink = (maplink) => {\n    if (getIsMobile()) {\n      this.#closeDocumentWindow();\n    }\n    this.#handleShowMapLayers(maplink);\n  };\n\n  #handleShowMapLayersFromPanelMenu = (id) => {\n    const { options } = this.props;\n    const { maplink } = this.state[id];\n    if (maplink) {\n      // If we're on small screen, or the admin option is set (no matter screen size),\n      // let's close the DocumentHandler window\n      if (getIsMobile() || options.closePanelOnMapLinkOpen) {\n        this.#closeDocumentWindow();\n      }\n      this.#handleShowMapLayers(this.state[id].maplink);\n    }\n  };\n\n  // The panel-menu buttons can contain several \"connections\" (external-link, map-link, and document)\n  // Make sure to fire each handler, the handler itself checks if a connection is present.\n  #handleSubMenuClicked = (id) => {\n    // Remember, the handlers below wont do anything if the connection value is nullish.\n    this.#handleOpenDocumentFromPanelMenu(id);\n    this.#handleExternalLinkClicked(id);\n    this.#handleShowMapLayersFromPanelMenu(id);\n    this.#setItemStateProperties(id);\n  };\n\n  #handleExternalLinkClicked = (id) => {\n    const { app } = this.props;\n    const { link } = this.state[id];\n    if (link) {\n      window.open(this.state[id].link, \"_blank\");\n      app.globalObserver.publish(\"core.onlyHideDrawerIfNeeded\");\n    }\n  };\n\n  //---------------------------------------------------\n\n  #setClickedItemProperties = (clickedItem) => {\n    let newItem = { ...clickedItem };\n    return {\n      ...clickedItem,\n      colored: !isExpandedTopLevelItem(newItem),\n      selected: !newItem.hasSubMenu,\n      expandedSubMenu: newItem.hasSubMenu\n        ? !newItem.expandedSubMenu\n        : newItem.expandedSubMenu,\n    };\n  };\n\n  #setNonClickedItemProperties = (item, currentState, clickedItem) => {\n    const idsToColor = getItemIdsToColor(clickedItem, currentState);\n    return {\n      ...item,\n      colored: idsToColor.indexOf(item.id) !== -1,\n      expandedSubMenu:\n        clickedItem.allParents.indexOf(item.id) !== -1\n          ? true\n          : item.expandedSubMenu,\n      selected: clickedItem.hasSubMenu ? item.selected : false,\n    };\n  };\n\n  //Important to create new state and items to not mutate state directly\n  #setItemStateProperties = (idClicked) => {\n    return new Promise((resolve) => {\n      const currentState = { ...this.state };\n      const clickedItem = currentState[idClicked];\n      const newState = Object.values(currentState).reduce((items, item) => {\n        const isClickedItem = item.id === idClicked;\n        if (isClickedItem) {\n          return {\n            ...items,\n            [item.id]: this.#setClickedItemProperties(item),\n          };\n        } else {\n          return {\n            ...items,\n            [item.id]: this.#setNonClickedItemProperties(\n              item,\n              currentState,\n              clickedItem\n            ),\n          };\n        }\n      }, {});\n\n      this.setState(newState, resolve);\n    });\n  };\n\n  #clearPanel = () => {\n    let newState = Object.values({ ...this.state }).reduce((state, item) => {\n      let newItem = { ...item };\n      newItem.colored = false;\n      newItem.selected = false;\n      return { ...state, [newItem.id]: newItem };\n    }, {});\n\n    this.setState(newState);\n  };\n\n  #scrollToMenuItem = async (scrollOffset) => {\n    scroll.scrollTo(scrollOffset, {\n      containerId: \"panelListWrapper\",\n      smooth: false,\n      isDynamic: true,\n      delay: 0,\n    });\n  };\n\n  #setDocument = (documentName = null, headerIdentifier = null) => {\n    const { localObserver } = this.props;\n    localObserver.publish(\"set-active-document\", {\n      documentName: documentName,\n      headerIdentifier: headerIdentifier,\n    });\n  };\n\n  /*\n  Large maplinks can be slow and cause the application to hang. This delay is a workaround in order\n  allow the other tasks such as closing the document and displaying a snackbar to run before the\n  application hangs.\n  */\n  #delayAndFlyToMapLink = async (maplink) => {\n    await delay(100);\n    this.props.localObserver.publish(\"fly-to\", maplink);\n  };\n\n  #getNextUniqueId = () => {\n    this.internalId += 1;\n    return this.internalId;\n  };\n\n  render() {\n    const { app, localObserver } = this.props;\n    return (\n      <Box\n        id=\"panelListWrapper\"\n        sx={{ maxHeight: \"100%\", position: \"relative\", overflow: \"auto\" }}\n      >\n        <PanelList\n          app={app}\n          localObserver={localObserver}\n          level={0}\n          items={this.state}\n        ></PanelList>\n      </Box>\n    );\n  }\n}\n\nexport default PanelMenuView;\n","import React from \"react\";\nimport { styled } from \"@mui/material/styles\";\nimport { withTheme } from \"@emotion/react\";\nimport Icon from \"@mui/material/Icon\";\nimport ListItem from \"@mui/material/ListItem\";\nimport Collapse from \"@mui/material/Collapse\";\nimport ListItemText from \"@mui/material/ListItemText\";\nimport ListItemIcon from \"@mui/material/ListItemIcon\";\nimport ExpandLess from \"@mui/icons-material/ExpandLess\";\nimport PanelList from \"./PanelList\";\nimport ExpandMore from \"@mui/icons-material/ExpandMore\";\nimport { visuallyHidden } from \"@mui/utils\";\n\nconst StyledListItemIcon = styled(ListItemIcon)(({ theme }) => ({\n  minWidth: theme.spacing(3),\n}));\n\nconst StyledCollapseIcon = styled(ListItemIcon)(({ theme }) => ({\n  \".MuiListItemIcon-root\": {\n    minWidth: theme.spacing(4),\n  },\n}));\nconst StyledListItem = styled(ListItem)(({ theme }) => ({\n  overflowWrap: \"break-word\",\n  \".MuiListItem-root\": {\n    borderLeft: `${theme.spacing(1)} solid ${theme.palette.background.paper}`,\n    \"&.Mui-selected\": {\n      borderLeftColor: theme.palette.action.selected,\n    },\n    \"&.Mui-selected:hover\": {\n      borderLeftColor: theme.palette.action.selected,\n    },\n    \"&:hover\": {\n      borderColor: theme.palette.action.hover,\n    },\n  },\n}));\n\nclass PanelMenuListItem extends React.PureComponent {\n  #getListTitle = () => {\n    const { title } = this.props;\n    return <ListItemText>{title}</ListItemText>;\n  };\n\n  #getCollapseIcon = () => {\n    const { title, expanded } = this.props;\n\n    return expanded ? (\n      <StyledCollapseIcon>\n        {!title && <span style={visuallyHidden}>Minimera submeny</span>}\n        <ExpandLess />\n      </StyledCollapseIcon>\n    ) : (\n      <StyledCollapseIcon>\n        {!title && <span style={visuallyHidden}>Maximera submeny</span>}\n        <ExpandMore />\n      </StyledCollapseIcon>\n    );\n  };\n\n  #getListIcon = () => {\n    const { title, icon } = this.props;\n    return (\n      <StyledListItemIcon>\n        {!title && <span style={visuallyHidden}>{icon.descriptiveText}</span>}\n        <Icon style={{ fontSize: icon.fontSize }}>\n          {icon.materialUiIconName}\n        </Icon>\n      </StyledListItemIcon>\n    );\n  };\n\n  #hasSubMenu = () => {\n    const { subMenuItems } = this.props;\n    return subMenuItems && subMenuItems.length > 0;\n  };\n\n  #handleMenuButtonClick = (type, id) => {\n    const { localObserver } = this.props;\n    localObserver.publish(`${type}-clicked`, id);\n  };\n\n  #getMenuItemStyle = () => {\n    const { theme, level, color, colored } = this.props;\n    const hasSubMenu = this.#hasSubMenu();\n    return colored\n      ? {\n          paddingLeft: theme.spacing(1 + level * 3),\n          borderLeft: `${theme.spacing(1)} solid ${color}`,\n          paddingRight: hasSubMenu ? 0 : theme.spacing(1),\n        }\n      : {\n          paddingLeft: theme.spacing(1 + level * 3),\n          paddingRight: hasSubMenu ? 0 : theme.spacing(1),\n        };\n  };\n\n  render() {\n    const { type, selected, subMenuItems, expanded, icon, level, title, id } =\n      this.props;\n    const hasSubMenu = this.#hasSubMenu();\n    return (\n      <>\n        <StyledListItem\n          divider\n          selected={selected}\n          button\n          ref={this.props.itemRef}\n          size=\"small\"\n          disableGutters\n          aria-controls={hasSubMenu ? `submenu_${id}` : null}\n          aria-expanded={expanded}\n          onClick={() => {\n            this.#handleMenuButtonClick(type, id);\n          }}\n          sx={this.#getMenuItemStyle()}\n        >\n          {icon ? this.#getListIcon() : null}\n          {title && this.#getListTitle()}\n          {hasSubMenu && this.#getCollapseIcon()}\n        </StyledListItem>\n        {hasSubMenu && (\n          <Collapse id={`submenu_${id}`} in={expanded} timeout={200}>\n            <PanelList\n              {...this.props}\n              level={level + 1}\n              items={subMenuItems}\n            ></PanelList>\n          </Collapse>\n        )}\n      </>\n    );\n  }\n}\n\nexport default withTheme(PanelMenuListItem);\n","const getTopLevelItem = (clickedItem, allItems) => {\n  if (!clickedItem.parentId) {\n    return clickedItem;\n  } else {\n    return Object.values(allItems).find((item) => {\n      return item.allChildren.indexOf(clickedItem.id) > -1;\n    });\n  }\n};\n\nexport const getItemIdsToColor = (clickedItem, allItems) => {\n  const topLevelItem = getTopLevelItem(clickedItem, allItems);\n  return [topLevelItem.id, ...topLevelItem.allChildren];\n};\n\nexport const isExpandedTopLevelItem = (item) => {\n  return item.hasSubMenu && item.expandedSubMenu && item.level === 0;\n};\n\nexport const findMenuItemWithDocumentName = (documentName, itemsToSearch) => {\n  return Object.values(itemsToSearch).find((item) => {\n    return item.document === documentName;\n  });\n};\n","export const splitAndTrimOnCommas = (searchString) => {\n  return searchString.split(\",\").map((string) => {\n    return string.trim();\n  });\n};\n\nexport const getStringArray = (searchString) => {\n  let tempStringArray = splitAndTrimOnCommas(searchString);\n  return tempStringArray.join(\" \").split(\" \");\n};\n\nexport const hasSubMenu = (item) => {\n  return item.menu && item.menu.length > 0;\n};\n\nexport const flattenChaptersTree = (chapters) => {\n  return chapters.reduce((acc, chapter) => {\n    if (chapter.header) {\n      let chapterStrippedFromSubChapters = { ...chapter };\n      chapterStrippedFromSubChapters.chapters = [];\n      acc = [...acc, chapterStrippedFromSubChapters];\n    }\n    if (chapter.chapters && chapter.chapters.length > 0) {\n      return [...acc, ...flattenChaptersTree(chapter.chapters)];\n    }\n    return acc;\n  }, []);\n};\n","import React from \"react\";\nimport { hasSubMenu } from \"../utils/helpers\";\n\nconst getAllChildrenIds = (menu) => {\n  return menu.reduce((allChildren, item) => {\n    if (hasSubMenu(item)) {\n      allChildren = [...allChildren, ...getAllChildrenIds(item.menu)];\n    }\n    return [...allChildren, item.id];\n  }, []);\n};\n/**\n * Function takes the hierarchial menu and flattens it into a normalized state where\n * the objects key is the id of the menu-item. The structure is now flat and every\n * object has references to parents, children etc.\n * While we are normalizing, we are also setting internal properties we later use\n * to make items selected, colored etc.\n */\nexport const getNormalizedMenuState = (\n  menu,\n  parentId = null,\n  level = 0,\n  parentIds = []\n) => {\n  let normalizedItemList = menu.reduce((items, menuItem) => {\n    menuItem = {\n      ...menuItem,\n      ...{\n        parentId,\n        level,\n        menuItemIds: [],\n        allChildren: [],\n        allParents: parentIds,\n        itemRef: React.createRef(),\n      },\n    };\n\n    if (menuItem.menu && menuItem.menu.length > 0) {\n      menuItem.allChildren = [\n        ...menuItem.allChildren,\n        ...getAllChildrenIds(menuItem.menu),\n      ];\n      menuItem.menuItemIds = [\n        ...menuItem.menuItemIds,\n        ...menuItem.menu.map((menuItem) => {\n          return menuItem.id;\n        }),\n      ];\n\n      items = {\n        ...items,\n        ...getNormalizedMenuState(menuItem.menu, menuItem.id, level + 1, [\n          ...parentIds,\n          menuItem.id,\n        ]),\n      };\n    }\n    return { ...items, ...{ [menuItem.id]: menuItem } };\n  }, {});\n  Object.values(normalizedItemList).forEach((n) => {\n    delete n.menu;\n  });\n  return normalizedItemList;\n};\n"],"names":["PanelList","React","getMenuItemType","item","type","this","props","menu","icon","id","level","color","title","itemRef","subMenuItems","expanded","expandedSubMenu","colored","selected","menuItemIds","reduce","subItemId","subItem","Object","values","items","find","i","length","document","link","maplink","render","style","position","disablePadding","role","component","filter","map","PanelMenuView","constructor","super","internalId","state","componentDidMount","localObserver","subscribe","options","menuConfig","forEach","setState","getNormalizedMenuState","menuItem","itemMatchesOpenDocument","documentFileName","documentOnStart","assign","hasSubMenu","subMenuItem","documentName","headerIdentifier","itemClicked","findMenuItemWithDocumentName","then","current","offsetTop","app","globalObserver","publish","mapLink","displayLoadingOnMapLinkOpen","getIsMobile","closePanelOnMapLinkOpen","window","open","clickedItem","newItem","isExpandedTopLevelItem","currentState","idsToColor","getItemIdsToColor","indexOf","allParents","idClicked","Promise","resolve","newState","async","scroll","scrollOffset","containerId","smooth","isDynamic","delay","sx","maxHeight","overflow","StyledListItemIcon","styled","ListItemIcon","theme","minWidth","spacing","StyledCollapseIcon","StyledListItem","ListItem","overflowWrap","borderLeft","palette","background","paper","borderLeftColor","action","borderColor","hover","PanelMenuListItem","visuallyHidden","descriptiveText","fontSize","materialUiIconName","paddingLeft","paddingRight","divider","button","ref","size","disableGutters","onClick","in","timeout","withTheme","allItems","topLevelItem","parentId","allChildren","getTopLevelItem","itemsToSearch","splitAndTrimOnCommas","searchString","split","string","trim","getStringArray","join","flattenChaptersTree","chapters","acc","chapter","header","chapterStrippedFromSubChapters","getAllChildrenIds","parentIds","normalizedItemList","n"],"sourceRoot":""}