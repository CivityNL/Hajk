"use strict";(self.webpackChunkhajk_client=self.webpackChunkhajk_client||[]).push([[4863,2888,768,5896,7836,8043],{84863:(e,t,n)=>{n.r(t);var r=n(72791),a=n(61889),i=n(24518),l=n(20890),s=n(48550),o=n(68096),d=n(30829),c=n(76384),u=n(23786),p=n(20068),x=n(63466),m=n(13400),h=n(70242),f=n(74512),g=n(15825),j=n(29145),b=n(77961),v=n(57482),Z=n(98246),k=n(12888),S=n(98397),E=n(66246),P=n(6744),y=n(98043),C=n(37836),O=n(5896),R=n(80184);t.default=e=>{const{localObserver:t}=e,{model:n}=e,w=e.options.groupDisplayName||"Grupp",[A,I]=r.useState(0),[L,D]=r.useState(""),[_,F]=r.useState(""),[T,M]=r.useState(""),[V,U]=r.useState(!1),[B,N]=r.useState(!1),[G,W]=r.useState(0),[z,K]=r.useState(0),[H,X]=r.useState(!1),[q,Q]=r.useState(n.getActiveUserEmail()),[J,Y]=r.useState("NONE"),[$,ee]=r.useState(!1),[te,ne]=r.useState(null),{enqueueSnackbar:re}=(0,Z.Ds)(),ae=function(){if($)return!1;if(null===te)return!1;if([...O.FME_FAIL_MESSAGES,...O.FME_SUCCESS_MESSAGES].includes(J))return!1;return!0}(),ie=ae||"ORDER_REQUEST_SENT"===J,le=function(){if(null===te)return!1;if(ie)return!1;return!0}(),{error:se,loading:oe,parameters:de,setProductParameters:ce}=(0,y.default)(L,_,n),ue=[{label:"V\xe4lj ".concat(w.toLowerCase()),renderFunction:function(){var t,n;const r=(null===(t=e.options)||void 0===t||null===(n=t.productGroups)||void 0===n?void 0:n.length)>0?e.options.productGroups.sort():[];1===r.length&&""===L&&(D(r[0]),I(A+1));return(0,R.jsxs)(a.ZP,{container:!0,item:!0,xs:12,children:[r.length>0?(0,R.jsx)(a.ZP,{item:!0,xs:12,children:(0,R.jsxs)(o.Z,{fullWidth:!0,children:[(0,R.jsx)(d.Z,{size:"small",id:"fme-server-select-group-label",children:w}),(0,R.jsx)(c.Z,{labelId:"fme-server-select-group-label",id:"fme-server-select-group",value:L,size:"small",label:w,onChange:e=>D(e.target.value),children:r.map(((e,t)=>(0,R.jsx)(u.Z,{value:e,children:e},t)))})]})}):Ze(),je([{type:"next",disabled:""===L}])]})},renderValueFunction:()=>ke(L)},{label:"V\xe4lj produkt",renderFunction:function(){const t=function(){var t,n;if(""===L)return[];const r=(null!==(t=null===(n=e.options)||void 0===n?void 0:n.products)&&void 0!==t?t:[]).filter((e=>e.group===L));return r.sort(((e,t)=>e.name.localeCompare(t.name,void 0,{numeric:!0}))),r}(),r=n.getProduct(L,_),i=(null===r||void 0===r?void 0:r.infoUrl)||"";return(0,R.jsxs)(a.ZP,{container:!0,item:!0,xs:12,children:[t.length>0?(0,R.jsx)(a.ZP,{item:!0,xs:12,children:(0,R.jsx)(o.Z,{fullWidth:!0,children:(0,R.jsx)(s.Z,{select:!0,id:"fme-server-select-product",value:_,size:"small",label:"Produkt",onChange:e=>F(e.target.value),InputProps:i.length>0?{startAdornment:(0,R.jsx)(p.Z,{title:"\xd6ppna l\xe4nk till produktinformation.",children:(0,R.jsx)(x.Z,{position:"start",children:(0,R.jsx)(m.Z,{"aria-label":"Open information page",href:i,target:"_blank",edge:"start",children:(0,R.jsx)(b.Z,{})})})})}:null,children:t.map(((e,t)=>(0,R.jsx)(u.Z,{value:e.name,children:e.name},t)))})})}):Ze(),je([{type:"back",disabled:!1},{type:"next",disabled:""===_}])]})},renderValueFunction:()=>ke(_)},{label:"V\xe4lj omfattning",renderFunction:function(){return(0,R.jsxs)(a.ZP,{container:!0,item:!0,xs:12,children:[B?(0,R.jsxs)(a.ZP,{container:!0,item:!0,xs:12,children:[(0,R.jsx)(a.ZP,{item:!0,xs:12,children:(0,R.jsx)(l.Z,{variant:"caption",children:"V\xe4lj ritverktyg nedan f\xf6r att rita best\xe4llningens omfattning."})}),(0,R.jsx)(a.ZP,{item:!0,xs:12,children:(0,R.jsx)(S.default,{activeDrawButton:T,handleDrawButtonClick:he})}),H&&(0,R.jsx)(a.ZP,{item:!0,xs:12,sx:{marginTop:1},children:(0,R.jsx)(k.default,{type:"error",children:(0,R.jsx)(l.Z,{variant:"caption",children:"Het getekende gebied is te groot. Verwijder deze en probeer \n                   opnieuw om door te gaan met de bestelling! Het getekende \n                   oppervlak is ".concat(z.toLocaleString()," m\xb2, \n                   en de maximaal toegestane oppervlakte is\n                   ").concat(G.toLocaleString()," m\xb2")})})})]}):(0,R.jsx)(a.ZP,{container:!0,item:!0,xs:12,children:(0,R.jsx)(k.default,{children:(0,R.jsx)(l.Z,{children:"Denna produkt kr\xe4ver ingen geometri! Du kan forts\xe4tta till n\xe4sta steg."})})}),je([{type:"back",disabled:!1},{type:"next",disabled:B&&(!V||H)}])]})}},{label:"Fyll i parametrar",renderFunction:function(){return(0,R.jsxs)(a.ZP,{container:!0,item:!0,xs:12,children:[(0,R.jsx)(a.ZP,{item:!0,xs:12,children:be()}),je([{type:"back",disabled:!1},{type:"next",disabled:!fe()}])]})}},{label:"Best\xe4ll",renderFunction:function(){const e=n.shouldPromptForEmail(L,_);return(0,R.jsxs)(a.ZP,{container:!0,item:!0,xs:12,children:[(0,R.jsx)(E.default,{shouldPromptForEmail:e,userEmail:q,setUserEmail:Q,jobId:te,pollError:$,orderStatus:J,orderIsLoading:ie,orderIsCompleted:le}),je(ve(e))]})}}];(0,C.default)((async()=>{const{error:e,status:t}=await n.getJobStatusById(te);if(e)return ee(!0);Y(t)}),ae?O.POLLING_INTERVAL:null);const pe=r.useCallback((e=>{const t=n.getProduct(L,_),{totalArea:r}=e,a=!!(e.error||t.maxArea&&-1!==t.maxArea&&e.totalArea>t.maxArea);U(0!==e.features.length),X(a),K(r),W(t.maxArea)}),[L,_,n]),xe=r.useCallback((()=>{t.publish("map.resetDrawing"),M(""),U(!1),K(0),X(!1)}),[t]);function me(){ne(null),Y("NONE"),ee(null)}function he(e){return"Reset"===e?xe():T===e?(t.publish("map.toggleDrawMethod",""),M("")):(t.publish("map.toggleDrawMethod",e),M(e))}function fe(){if(oe||se)return!1;return!de.some((e=>{if(e.optional)return!1;const t=function(e){if(!e.value||0===e.value.length)return!1;return!0}(e)||function(e){if(!e.defaultValue||0===e.defaultValue.length)return!1;return!0}(e);return!t}))}function ge(e){return!ie&&(!e||n.isValidEmail(q))}function je(e){return(0,R.jsx)(a.ZP,{container:!0,item:!0,justifyContent:"flex-end",children:e.map(((e,r)=>(0,R.jsx)(i.Z,{sx:{marginTop:1,marginLeft:1},disabled:e.disabled,variant:"contained",onClick:()=>function(e){""!==T&&(M(""),t.publish("map.toggleDrawMethod",""));switch(e){case"back":return me(),I(A-1);case"next":return I(A+1);case"order":return async function(){ne(null),Y("ORDER_REQUEST_SENT");const e=await n.makeOrder(L,_,de,q);ne(e.jobId),Y(e.error?"ORDER_REQUEST_FAILED":"POLLING")}();default:return I(0),D(""),F(""),me(),void xe()}}(e.type),children:"back"===e.type?"Tillbaka":"next"===e.type?"N\xe4sta":"order"===e.type?"Best\xe4ll!":"B\xf6rja om!"},r)))})}function be(){if(se)return(0,R.jsx)(k.default,{type:"error",children:(0,R.jsx)(l.Z,{children:"Produktens parametrar kunde inte h\xe4mtas. Kontakta systemadministrat\xf6ren."})});if(oe)return(0,R.jsxs)(a.ZP,{container:!0,children:[(0,R.jsx)(a.ZP,{item:!0,xs:12,children:(0,R.jsx)(l.Z,{children:"F\xf6rs\xf6ker h\xe4mta parametrar..."})}),(0,R.jsx)(a.ZP,{item:!0,xs:12,children:(0,R.jsx)(v.Z,{})})]});const e=n.getParametersToRender(de,L,_),t=n.getInfoUrl(L,_);return(0,R.jsx)(P.default,{parameters:e,model:n,setProductParameters:ce,infoUrl:t})}function ve(e){return le?[{type:"reset",disabled:!1}]:[{type:"back",disabled:ie},{type:"order",disabled:!ge(e)}]}function Ze(){return(0,R.jsx)(a.ZP,{item:!0,xs:12,children:(0,R.jsx)(k.default,{type:"error",children:(0,R.jsx)(l.Z,{children:"Verktyget \xe4r felkonfigurerat, kontakta systemadministrat\xf6ren."})})})}function ke(e){if(e)return(0,R.jsx)("div",{style:{position:"relative",fontWeight:"normal",height:"0"},children:e})}return r.useEffect((()=>(t.subscribe("map.featureAdded",pe),t.subscribe("view.toggleDrawMethod",(()=>{M("")})),t.subscribe("map.maxFeaturesExceeded",(()=>{re("Denna arbetsytan till\xe5ter enbart en geometri. Den tidigare ritade geometrin togs bort.",{anchorOrigin:{vertical:"bottom",horizontal:"left"},variant:"warning"})})),()=>{t.unsubscribe("map.featureAdded"),t.unsubscribe("view.toggleDrawMethod"),t.unsubscribe("map.maxFeaturesExceeded")})),[t,pe,re]),r.useEffect((()=>{const e=n.getProduct(L,_);if(n.noGeomAttributeSupplied(e))return N(!1);N(!0),t.publish("view.activeProductChange",e)}),[L,_,t,n]),r.useEffect((()=>{xe()}),[_,xe]),r.useEffect((()=>{F("")}),[L]),(0,R.jsx)(h.Z,{activeStep:A,orientation:"vertical",sx:{padding:1},children:ue.map(((e,t)=>(0,R.jsxs)(f.Z,{children:[(0,R.jsxs)(g.Z,{children:[e.label,A!==t&&e.renderValueFunction?e.renderValueFunction():null]}),(0,R.jsx)(j.Z,{children:e.renderFunction()})]},t)))})}},98397:(e,t,n)=>{n.r(t);n(72791);var r=n(35527),a=n(61889),i=n(20068),l=n(90388),s=n(41286),o=n(25807),d=n(16378),c=n(40460),u=n(21972),p=n(80184);t.default=e=>{const t=[{type:"Polygon",tooltip:"Teken een gebied op de kaart door \xe9\xe9n keer per knooppunt te klikken, eindig met een dubbelklik.",icon:(0,p.jsx)(s.Z,{})},{type:"Rectangle",tooltip:"Teken een rechthoek op de kaart.",icon:(0,p.jsx)(o.Z,{})},{type:"Circle",tooltip:"Rita en cirkel i kartan.",icon:(0,p.jsx)(d.Z,{})},{type:"Select",tooltip:"Kies uit bestaande objecten op de kaart.",icon:(0,p.jsx)(c.Z,{})},{type:"Reset",tooltip:"Was u niet tevreden? Verwijder alle objecten van de kaart.",icon:(0,p.jsx)(u.Z,{})}];return(0,p.jsx)(r.Z,{sx:{marginTop:1},children:(0,p.jsx)(a.ZP,{container:!0,children:(0,p.jsx)(a.ZP,{container:!0,item:!0,xs:12,justifyContent:"space-between",children:t.map(((t,n)=>function(t,n){const{activeDrawButton:r,handleDrawButtonClick:a}=e;return(0,p.jsx)(i.Z,{title:t.tooltip,children:(0,p.jsx)(l.Z,{selected:t.type===r,onChange:()=>a(t.type),value:t.type,sx:{margin:1},"aria-label":t.tooltip,children:t.icon})},n)}(t,n)))})})})}},12888:(e,t,n)=>{n.r(t);n(72791);var r=n(61889),a=n(66934),i=n(80184);const l=(0,a.ZP)(r.ZP)((e=>{let{type:t,theme:n}=e;return{background:"error"===t?"dark"===n.palette.mode?n.palette.error.dark:n.palette.error.main:"warning"===t?"dark"===n.palette.mode?n.palette.warning.dark:n.palette.warning.main:"dark"===n.palette.mode?n.palette.info.dark:n.palette.info.main,color:n.palette.error.contrastText,padding:n.spacing(1),borderRadius:n.shape.borderRadius,boxShadow:n.shadows[2]}}));t.default=e=>{let{children:t,type:n}=e;return(0,i.jsx)(l,{container:!0,item:!0,xs:12,type:n,children:t})}},768:(e,t,n)=>{n.r(t);n(72791);var r=n(68096),a=n(30829),i=n(81918),l=n(61889),s=n(76384),o=n(23786),d=n(66934),c=n(80184);const u=(0,d.ZP)("div")((()=>({display:"flex",flexWrap:"wrap"}))),p=(0,d.ZP)(i.Z)((()=>({marginRight:2})));t.default=e=>{const{parameter:t,index:n,onChange:i}=e;function d(e){return t.listOptions.find((t=>t.value===e)).caption}return(0,c.jsx)(l.ZP,{container:!0,item:!0,xs:12,sx:{padding:1},children:(0,c.jsxs)(r.Z,{size:"small",fullWidth:!0,required:!t.optional,children:[(0,c.jsx)(a.Z,{variant:"outlined",id:"fme-listbox-label-".concat(n),children:t.description}),(0,c.jsx)(s.Z,{multiple:!0,value:t.value?t.listOptions.reduce(((e,n)=>(t.value.includes(n.value)&&e.push(n.value),e)),[]):t.defaultValue,onChange:e=>i(e.target.value,n),input:(0,c.jsx)(s.Z,{labelId:"fme-listbox-label-".concat(n),label:t.description,variant:"outlined"}),renderValue:e=>(0,c.jsx)(u,{children:e.map(((e,t)=>(0,c.jsx)(p,{label:d(e),size:"small"},t)))}),children:t.listOptions.map(((e,t)=>(0,c.jsx)(o.Z,{value:e.value,children:e.caption},t)))})]})})}},66246:(e,t,n)=>{n.r(t);n(72791);var r=n(20890),a=n(61889),i=n(48550),l=n(57482),s=n(12888),o=n(5896),d=n(80184);t.default=e=>{const{shouldPromptForEmail:t,userEmail:n,setUserEmail:c}=e,{orderIsLoading:u,orderIsCompleted:p,orderStatus:x}=e,m=t?"Best\xe4llningen \xe4r redo att skickas! Fyll i din epost och klicka sedan p\xe5 best\xe4ll-knappen.":"Best\xe4llningen \xe4r redo att skickas! Klicka nedan f\xf6r att skicka iv\xe4g den.";return(0,d.jsxs)(a.ZP,{container:!0,item:!0,xs:12,children:[u&&(0,d.jsxs)(a.ZP,{container:!0,children:[(0,d.jsx)(a.ZP,{item:!0,xs:12,children:(0,d.jsx)(r.Z,{children:"Din best\xe4llning bearbetas..."})}),(0,d.jsx)(a.ZP,{item:!0,xs:12,children:(0,d.jsx)(l.Z,{})})]}),p&&function(){const e=function(e){return o.FME_FAIL_MESSAGES.includes(e)}(x);return(0,d.jsx)(s.default,{type:e?"error":"info",children:(0,d.jsx)(r.Z,{children:"Din best\xe4llning \xe4r klar! ".concat(e?"Tyv\xe4rr s\xe5 kunde FME inte slutf\xf6ra best\xe4llningen. Kontakta systemadministrat\xf6ren.":"Resultatet har skickats till din epost!")})})}(),!u&&!p&&(0,d.jsxs)(a.ZP,{container:!0,item:!0,xs:12,children:[(0,d.jsx)(a.ZP,{item:!0,xs:12,sx:{marginBottom:1},children:(0,d.jsx)(r.Z,{children:m})}),t&&(0,d.jsx)(a.ZP,{item:!0,xs:12,children:(0,d.jsx)(i.Z,{id:"fme-user-email",size:"small",label:"Epost",onChange:e=>c(e.target.value),fullWidth:!0,value:n})})]})]})}},6744:(e,t,n)=>{n.r(t);n(72791);var r=n(61889),a=n(20890),i=n(13400),l=n(48550),s=n(68096),o=n(30829),d=n(76384),c=n(23786),u=n(20431),p=n(77961),x=n(12888),m=n(768),h=n(5896),f=n(80184);t.default=e=>{const{model:t}=e;function n(t,n){const{parameters:r}=e;r[n].value=t,e.setProductParameters(r)}function g(e,t){var a,i;return(0,f.jsx)(r.ZP,{item:!0,xs:12,sx:{padding:1},children:(0,f.jsxs)(s.Z,{fullWidth:!0,size:"small",required:!e.optional,children:[(0,f.jsx)(o.Z,{variant:"outlined",id:"fme-lookup-choice-label-".concat(t),children:e.description}),(0,f.jsx)(d.Z,{labelId:"fme-lookup-choice-label-".concat(t),id:"fme-lookup-choice-".concat(t),variant:"outlined",value:null!==(a=null!==(i=e.value)&&void 0!==i?i:e.defaultValue)&&void 0!==a?a:"",label:e.description,onChange:e=>n(e.target.value,t),children:e.listOptions.map(((e,t)=>(0,f.jsx)(c.Z,{value:e.value,children:e.caption},t)))})]})},"".concat(e.type,"-").concat(t))}function j(e,t){return(0,f.jsx)(m.default,{parameter:e,index:t,onChange:n},"".concat(e.type,"-").concat(t))}return(0,f.jsxs)(r.ZP,{container:!0,children:[function(){var t;return(null===(t=e.infoUrl)||void 0===t?void 0:t.length)>0}()&&(0,f.jsxs)(r.ZP,{container:!0,item:!0,xs:12,wrap:"nowrap",justifyContent:"space-between",children:[(0,f.jsx)(a.Z,{sx:{alignSelf:"center",marginLeft:1},children:"Oklart hur produkten fungerar? Tryck p\xe5 fr\xe5getecknet f\xf6r mer information."}),(0,f.jsx)(i.Z,{"aria-label":"Hj\xe4lp",onClick:()=>window.open(e.infoUrl,"_blank"),children:(0,f.jsx)(p.Z,{})})]}),e.parameters.some((e=>!h.ALLOWED_FME_PARAMETERS.includes(e.type)))&&(0,f.jsx)(r.ZP,{item:!0,xs:12,sx:{padding:1},children:(0,f.jsx)(x.default,{type:"error",children:(0,f.jsx)(a.Z,{children:"Observera att vissa publicerade parametrar inte kunde renderas! Det \xe4r inte s\xe4kert att best\xe4llningen g\xe5r att genomf\xf6ra."})})}),0===e.parameters.length&&(0,f.jsx)(r.ZP,{item:!0,xs:12,sx:{padding:1},children:(0,f.jsx)(x.default,{type:"info",children:(0,f.jsx)(a.Z,{children:"Det finns inga publicerade parametrar att rendera! Du kan forts\xe4tta direkt till n\xe4sta steg!"})})}),(0,f.jsx)(r.ZP,{container:!0,children:e.parameters.map(((e,i)=>{switch(e.type){case"CHOICE":case"LOOKUP_CHOICE":return g(e,i);case"LISTBOX":case"LOOKUP_LISTBOX":return j(e,i);case"RANGE_SLIDER":return function(e,i){const{value:l,step:s}=t.getRangeSliderValueAndStep(e),o=t.getRangeSliderMinimum(e,s),d=t.getRangeSliderMaximum(e,s);return(0,f.jsxs)(r.ZP,{item:!0,xs:12,sx:{padding:1},children:[(0,f.jsx)(r.ZP,{item:!0,xs:12,children:(0,f.jsx)(a.Z,{variant:"caption",children:e.description})}),(0,f.jsx)(r.ZP,{item:!0,xs:12,children:(0,f.jsx)(u.ZP,{value:l,min:o,max:d,step:s,marks:[{value:o,label:o.toString()},{value:d,label:d.toString()}],valueLabelDisplay:"auto",onChange:(e,t)=>n(t,i)})})]},"".concat(e.type,"-").concat(i))}(e,i);case"STRING":case"TEXT":case"PASSWORD":return function(e,t){var a,i;return(0,f.jsx)(r.ZP,{item:!0,xs:12,sx:{padding:1},children:(0,f.jsx)(l.Z,{id:"fme-text-".concat(t),size:"small",type:"PASSWORD"===e.type?"password":"text",required:!e.optional,label:e.description,onChange:e=>n(e.target.value,t),fullWidth:!0,value:null!==(a=null!==(i=e.value)&&void 0!==i?i:e.defaultValue)&&void 0!==a?a:""})},"".concat(e.type,"-").concat(t))}(e,i);default:return null}}))})]})}},5896:(e,t,n)=>{n.r(t),n.d(t,{ALLOWED_FME_PARAMETERS:()=>r,FME_FAIL_MESSAGES:()=>i,FME_SUCCESS_MESSAGES:()=>l,POLLING_INTERVAL:()=>a});const r=["CHOICE","LOOKUP_CHOICE","LISTBOX","LOOKUP_LISTBOX","RANGE_SLIDER","PASSWORD","STRING","TEXT"],a=5e3,i=["ABORTED","FME_FAILURE","JOB_FAILURE"],l=["SUCCESS"]},37836:(e,t,n)=>{n.r(t),n.d(t,{default:()=>a});var r=n(72791);function a(e,t){const n=(0,r.useRef)();(0,r.useEffect)((()=>{n.current=e}),[e]),(0,r.useEffect)((()=>{if(null!==t){const e=setInterval((function(){n.current()}),t);return()=>clearInterval(e)}}),[t])}},98043:(e,t,n)=>{n.r(t),n.d(t,{default:()=>a});var r=n(72791);function a(e,t,n){const[a,i]=(0,r.useState)(!1),[l,s]=(0,r.useState)(!1),[o,d]=(0,r.useState)([]);return(0,r.useEffect)((()=>{(async()=>{s(!0),i(!1);const{error:r,parameters:a}=await n.getProductParameters(e,t);r&&i(!0),s(!1),d(a)})()}),[n,e,t]),{error:a,loading:l,parameters:o,setProductParameters:d}}}}]);
//# sourceMappingURL=4863.8c13da7e.chunk.js.map