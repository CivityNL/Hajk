"use strict";(self.webpackChunkhajk_client=self.webpackChunkhajk_client||[]).push([[2432,5806],{28619:(t,i,e)=>{e.r(i);var s=e(72791),o=e(66934),n=e(57621),r=e(93044),p=e(66647),l=e(9585),a=e(80184);const c=(0,o.ZP)(n.Z)((t=>{let{theme:i}=t;return{marginBottom:i.spacing(1),width:"210px",[i.breakpoints.down("sm")]:{boxShadow:"none",borderBottom:"1px solid #ccc",borderRadius:0,margin:0,width:"100%",justifyContent:"left"}}})),h=(0,o.ZP)(r.Z)((t=>{let{theme:i}=t;return{background:i.palette.text.primary}}));class d extends s.PureComponent{constructor(){super(...arguments),this.state={open:!1,text:""}}render(){const{abstract:t,icon:i,onClick:e,title:s}=this.props;return(0,a.jsx)(c,{onClick:e,children:(0,a.jsx)(p.Z,{children:(0,a.jsx)(l.Z,{avatar:(0,a.jsx)(h,{children:i}),title:s,subheader:t})})})}}d.defaultProps={abstract:"Beskrivning saknas",title:"Titel saknas"},i.default=d},73151:(t,i,e)=>{e.r(i);var s=e(72791),o=e(85286),n=e(54164),r=e(19538),p=e(45484),l=e(57064),a=e(49900),c=e(26191),h=e(28619),d=e(74599),u=e(80184);class m extends s.PureComponent{constructor(t){var i;super(t),i=this,this.handleButtonClick=t=>{this.showWindow({hideOtherPluginWindows:!0,runCallback:!0}),this.props.app.globalObserver.publish("core.onlyHideDrawerIfNeeded")},this.showWindow=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=t.hideOtherPluginWindows||!0,s=t.runCallback||!0;if(i.props.app.activeTool=i.type,i.props.app.globalObserver.publish("analytics.trackEvent",{eventName:"pluginShown",pluginName:i.type,activeMap:i.props.app.config.activeMap}),i.props.app.pushPluginIntoHistory({type:i.type,icon:i.props.custom.icon,title:i.title,description:i.description}),!0===i.state.windowVisible)return null;!0===e&&i.props.app.onWindowOpen(i),i.setState({windowVisible:!0},(()=>{i.props.app.globalObserver.publish("core.pluginVisibilityChanged"),!0===s&&"function"===typeof i.props.custom.onWindowShow&&i.props.custom.onWindowShow()}))},this.closeWindow=()=>{this.type===this.props.app.activeTool&&(this.props.app.activeTool=void 0),this.setState({windowVisible:!1},(()=>{this.props.app.globalObserver.publish("core.pluginVisibilityChanged"),"function"===typeof this.props.custom.onWindowHide&&this.props.custom.onWindowHide()}))},this.type=t.type.toLowerCase()||void 0,this.description=t.options.description||t.custom.description;const e=!1===this.props.app.config.mapConfig.map.clean&&(o.isMobile?t.options.visibleAtStartMobile:t.options.visibleAtStart)||!1;e&&this.props.app.globalObserver.publish("analytics.trackEvent",{eventName:"pluginShown",pluginName:this.type,activeMap:this.props.app.config.activeMap}),this.state={title:t.options.title||t.custom.title||"Unnamed plugin",color:t.options.color||t.custom.color||null,windowVisible:e},this.title=t.options.title||t.custom.title||"Unnamed plugin",this.width=t.options.width||t.custom.width||400,this.height=t.options.height||t.custom.height||"auto",this.position=t.options.position||t.custom.position||"left",t.app.registerWindowPlugin(this);const s="".concat(this.type,".showWindow");t.app.globalObserver.subscribe(s,(t=>{this.showWindow(t)}));const n="".concat(this.type,".closeWindow");t.app.globalObserver.subscribe(n,(()=>{this.closeWindow()}))}componentDidUpdate(t){t.custom.title!==this.props.custom.title&&this.setState({title:this.props.custom.title}),t.custom.color!==this.props.custom.color&&this.setState({color:this.props.custom.color})}pluginIsWidget(t){return["left","right"].includes(t)}renderWindow(t){const{target:i}=this.props.options;return"function"===typeof(null===t||void 0===t?void 0:t.render)?t.render():(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(c.default,{globalObserver:this.props.app.globalObserver,title:this.state.title,color:this.state.color,onClose:this.closeWindow,open:this.state.windowVisible,onResize:this.props.custom.onResize,onMaximize:this.props.custom.onMaximize,onMinimize:this.props.custom.onMinimize,draggingEnabled:this.props.custom.draggingEnabled,customPanelHeaderButtons:this.props.custom.customPanelHeaderButtons,resizingEnabled:this.props.custom.resizingEnabled,scrollable:this.props.custom.scrollable,allowMaximizedWindow:this.props.custom.allowMaximizedWindow,disablePadding:this.props.custom.disablePadding,width:this.width,height:this.height,position:this.position,mode:"window",layerswitcherConfig:this.props.app.config.mapConfig.tools.find((t=>"layerswitcher"===t.type)),children:s.cloneElement(this.props.children,{windowVisible:this.state.windowVisible})}),"hidden"!==i&&this.renderDrawerButton(),this.pluginIsWidget(i)&&this.renderWidgetButton("".concat(i,"-column")),"control"===i&&this.renderControlButton()]})}renderDrawerButton(){return(0,n.createPortal)((0,u.jsx)(r.Z,{mdUp:this.pluginIsWidget(this.props.options.target)||"control"===this.props.options.target,children:(0,u.jsxs)(p.ZP,{button:!0,divider:!0,selected:this.state.windowVisible,onClick:this.handleButtonClick,children:[(0,u.jsx)(l.Z,{children:this.props.custom.icon}),(0,u.jsx)(a.Z,{primary:this.title})]})}),document.getElementById("plugin-buttons"))}renderWidgetButton(t){return(0,n.createPortal)((0,u.jsx)(r.Z,{mdDown:!0,children:(0,u.jsx)(h.default,{icon:this.props.custom.icon,onClick:this.handleButtonClick,title:this.title,abstract:this.description})}),document.getElementById(t))}renderControlButton(){return(0,n.createPortal)((0,u.jsx)(r.Z,{mdDown:!0,children:(0,u.jsx)(d.default,{icon:this.props.custom.icon,onClick:this.handleButtonClick,title:this.title,abstract:this.description})}),document.getElementById("plugin-control-buttons"))}render(){return!0!==this.props.app.config.mapConfig.map.clean&&this.renderWindow(this.props.custom)}}i.default=m},2432:(t,i,e)=>{e.r(i),e.d(i,{default:()=>h});var s=e(72791),o=e(73151),n=e(50224),r=e(49008),p=e(15806),l=e(85194),a=e.n(l),c=e(80184);class h extends s.PureComponent{constructor(t){super(t),this.localObserver=a()(),this.layerSwitcherModel=new p.default({map:t.map,app:t.app,observer:this.localObserver})}render(){return(0,c.jsx)(o.default,{...this.props,type:"LayerSwitcher",custom:{icon:(0,c.jsx)(n.Z,{}),title:"Visa",description:"V\xe4lj vad du vill se i kartan",height:"auto",width:400},children:(0,c.jsx)(r.default,{app:this.props.app,map:this.props.map,model:this.layerSwitcherModel,observer:this.localObserver,options:this.props.options})})}}},15806:(t,i,e)=>{e.r(i);i.default=class{constructor(t){this.olMap=t.map,this.observer=t.observer,this.globalObserver=t.app.globalObserver,this.layerMap=this.olMap.getLayers().getArray().reduce(((t,i)=>(t[i.get("name")]=i,t)),{})}getBaseLayers(){return this.olMap.getLayers().getArray().filter((t=>"base"===t.get("layerType"))).map((t=>t.getProperties()))}}}}]);
//# sourceMappingURL=2432.efbbcd95.chunk.js.map