"use strict";(self.webpackChunkhajk_client=self.webpackChunkhajk_client||[]).push([[5959,5931,4769],{5931:(e,t,r)=>{r.r(t),r.d(t,{default:()=>f});var a=r(66274),i=r(99359),s=r(75742),l=r(75004),n=(0,i.Z)("container"),o=(0,i.Z)("divider"),d=(0,i.Z)("range"),c=(0,i.Z)("addEvents"),u=(0,i.Z)("getPosition"),p=(0,i.Z)("prerenderLeft"),h=(0,i.Z)("prerenderRight"),g=(0,i.Z)("postrender"),v=(0,i.Z)("unsetLayers");class f extends s.Z{constructor(){const e=document.createElement("div"),t=document.createElement("div");t.className="ol-side-by-side-divider";const r=document.createElement("input");r.type="range",r.min=0,r.max=1,r.step="any",r.value=.5,r.className="ol-side-by-side-range",super({element:e}),Object.defineProperty(this,g,{value:y}),Object.defineProperty(this,u,{value:b}),Object.defineProperty(this,c,{value:m}),Object.defineProperty(this,n,{writable:!0,value:null}),Object.defineProperty(this,o,{writable:!0,value:null}),Object.defineProperty(this,d,{writable:!0,value:null}),Object.defineProperty(this,p,{writable:!0,value:e=>{const t=e.context,r=this.getMap().getSize(),i=(0,a.Z)(this,u)[u](),s=(0,l.getRenderPixel)(e,[0,0]),n=(0,l.getRenderPixel)(e,[i,0]),o=(0,l.getRenderPixel)(e,[i,r[1]]),d=(0,l.getRenderPixel)(e,[0,r[1]]);t.save(),t.beginPath(),t.moveTo(s[0],s[1]),t.lineTo(n[0],n[1]),t.lineTo(o[0],o[1]),t.lineTo(d[0],d[1]),t.closePath(),t.clip()}}),Object.defineProperty(this,h,{writable:!0,value:e=>{const t=e.context,r=this.getMap().getSize(),i=(0,a.Z)(this,u)[u](),s=(0,l.getRenderPixel)(e,[i,0]),n=(0,l.getRenderPixel)(e,[r[0],0]),o=(0,l.getRenderPixel)(e,r),d=(0,l.getRenderPixel)(e,[i,r[1]]);t.save(),t.beginPath(),t.moveTo(s[0],s[1]),t.lineTo(n[0],n[1]),t.lineTo(o[0],o[1]),t.lineTo(d[0],d[1]),t.closePath(),t.clip()}}),Object.defineProperty(this,v,{writable:!0,value:()=>{this.getMap().getLayers().getArray().filter((e=>!0===e.get("isLeftCompareLayer")||!0===e.get("isRightCompareLayer"))).forEach((e=>{e.set("visible",!1,!0),!0===e.get("isLeftCompareLayer")?(e.set("isLeftCompareLayer",!1),e.un("prerender",(0,a.Z)(this,p)[p])):(e.set("isRightCompareLayer",!1),e.un("prerender",(0,a.Z)(this,h)[h])),e.un("postrender",(0,a.Z)(this,g)[g])}))}}),(0,a.Z)(this,n)[n]=e,(0,a.Z)(this,o)[o]=t,(0,a.Z)(this,d)[d]=r}updateClip(){(0,a.Z)(this,o)[o].style.left=(0,a.Z)(this,u)[u]()+"px",this.getMap().render()}setCompareLayers(e,t){(0,a.Z)(this,v)[v](),e.set("visible",!0,!0),e.set("isLeftCompareLayer",!0),e.on("prerender",(0,a.Z)(this,p)[p]),e.on("postrender",(0,a.Z)(this,g)[g]),t.set("visible",!0,!0),t.set("isRightCompareLayer",!0),t.on("prerender",(0,a.Z)(this,h)[h]),t.on("postrender",(0,a.Z)(this,g)[g])}remove(){(0,a.Z)(this,v)[v]();try{(0,a.Z)(this,n)[n].removeChild((0,a.Z)(this,o)[o]),(0,a.Z)(this,n)[n].removeChild((0,a.Z)(this,d)[d])}catch(e){}}open(){(0,a.Z)(this,n)[n].appendChild((0,a.Z)(this,o)[o]),(0,a.Z)(this,n)[n].appendChild((0,a.Z)(this,d)[d]),(0,a.Z)(this,c)[c]()}}function m(){(0,a.Z)(this,d)[d].addEventListener("input",(()=>{this.updateClip()}))}function b(){const e=(0,a.Z)(this,d)[d].value,t=42*(.5-e);return this.getMap().getSize()[0]*Number(e)+t}function y(e){e.context.restore()}},55959:(e,t,r)=>{r.r(t);var a=r(72791),i=r(24518),s=r(1582),l=r(94070),n=r(50576),o=r(19737),d=r(98246),c=r(24769),u=r(5931),p=r(80184);t.default=e=>{const[t,r]=(0,a.useState)(""),[h,g]=(0,a.useState)(""),[v,f]=(0,a.useState)([]),[m,b]=(0,a.useState)([]),y=(0,a.useRef)(),Z=(0,a.useRef)(),{closeSnackbar:x,enqueueSnackbar:j}=(0,d.Ds)(),L=a.useRef(null);(0,a.useEffect)((()=>{const t=e.map.getAllLayers(),r=t.filter((e=>"base"===e.get("layerType"))).map((e=>({id:e.ol_uid,label:e.get("caption")})));if(e.options.showNonBaseLayersInSelect){const e=t.filter((e=>["layer","group"].includes(e.get("layerType")))).map((e=>({id:e.ol_uid,label:e.get("caption")})));f(e)}b(r)}),[e.map,e.options.showNonBaseLayersInSelect]),(0,a.useEffect)((()=>{y.current=new u.default,e.map.addControl(y.current)}),[e.map]),(0,a.useEffect)((()=>{e.app.globalObserver.on("core.drawerToggled",(()=>{y.current.updateClip()}))}),[e.app.globalObserver]),(0,a.useEffect)((()=>{if(""===t||""===h){var r;null===(r=Z.current)||void 0===r||r.setVisible(!0),y.current.remove(),x(L.current)}else{var a;const r=e.map.getAllLayers().find((e=>e.ol_uid===t)),s=e.map.getAllLayers().find((e=>e.ol_uid===h));Z.current=e.map.getAllLayers().find((e=>!0===e.getVisible()&&"base"===e.get("layerType"))),null===(a=Z.current)||void 0===a||a.setVisible(!1),y.current.open(),y.current.setCompareLayers(r,s),x(L.current),L.current=j("Avsluta j\xe4mf\xf6ringsl\xe4get genom att trycka p\xe5 knappen",{variant:"default",persist:!0,anchorOrigin:{vertical:"bottom",horizontal:"center"},sx:{".SnackbarItem-contentRoot":{flexWrap:"inherit !important"}},action:e=>(0,p.jsx)(i.Z,{variant:"contained",color:"error",onClick:()=>{C(),x(e)},children:"Sluta j\xe4mf\xf6ra"})})}}),[t,h,e.map,x,j]);const C=()=>{var e;y.current.remove(),null===(e=Z.current)||void 0===e||e.setVisible(!0),r(""),g("")};return(0,p.jsx)(n.default,{options:e.options,map:e.map,app:e.app,type:"LayerComparer",defaults:{icon:(0,p.jsx)(o.Z,{}),title:"Lagerj\xe4mf\xf6rare",description:"J\xe4mf\xf6r lager sida vid sida",headerText:"J\xe4mf\xf6r lager sida vid sida",buttonText:"J\xe4mf\xf6r",primaryButtonVariant:"contained",abortText:"Nollst\xe4ll & st\xe4ng",onAbort:C},children:(0,p.jsxs)(s.Z,{spacing:2,children:[(0,p.jsxs)(l.Z,{icon:(0,p.jsx)(o.Z,{}),variant:"info",children:["V\xe4lj tv\xe5 lager att j\xe4mf\xf6ra och tryck p\xe5 ",(0,p.jsx)("i",{children:"J\xe4mf\xf6r"}),"."]}),(0,p.jsx)(c.default,{setter:r,value:t,counterValue:h,baseLayers:m,layers:v,label:"V\xe4nster sida"}),(0,p.jsx)(c.default,{setter:g,value:h,counterValue:t,baseLayers:m,layers:v,label:"H\xf6ger sida"})]})})}},24769:(e,t,r)=>{r.r(t);r(72791);var a=r(68870),i=r(68096),s=r(30829),l=r(76384),n=r(23786),o=r(79834),d=r(80184);t.default=e=>{const{setter:t,value:r,counterValue:c,baseLayers:u,layers:p,label:h}=e;return(0,d.jsx)(a.Z,{sx:{minWidth:120},children:(0,d.jsxs)(i.Z,{fullWidth:!0,children:[(0,d.jsx)(s.Z,{id:"layer-1-label",children:h}),(0,d.jsxs)(l.Z,{labelId:"layer-1-label",id:"layer-1-select",label:"Lager 1",value:r,onChange:e=>((e,t)=>{e(t)})(t,e.target.value),children:[(0,d.jsx)(n.Z,{value:"",children:"Inget lager valt"}),u.length>0&&p.length>0&&(0,d.jsx)(o.Z,{children:"Bakgrundslager"}),u.map(((e,t)=>(0,d.jsx)(n.Z,{value:e.id,disabled:e.id===c,children:e.label},t))),u.length>0&&p.length>0&&(0,d.jsx)(o.Z,{children:"Lager"}),p.map(((e,t)=>(0,d.jsx)(n.Z,{value:e.id,children:e.label},t)))]})]})})}},19737:(e,t,r)=>{var a=r(64836);t.Z=void 0;var i=a(r(45649)),s=r(80184),l=(0,i.default)((0,s.jsx)("path",{d:"M10 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h5v2h2V1h-2v2zm0 15H5l5-6v6zm9-15h-5v2h5v13l-5-6v9h5c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"Compare");t.Z=l}}]);
//# sourceMappingURL=5959.674b0cd9.chunk.js.map