"use strict";(self.webpackChunkhajk_client=self.webpackChunkhajk_client||[]).push([[9565,2670],{69565:(e,t,i)=>{i.r(t);var n=i(64665),s=i(90927),o=i(66233),r=i(5400),a=i(69236),h=i(5426),l=i(9501),d=i(35844),c=i(56957),g=i(88490),m=i(56134),p=i(42670);t.default=class{constructor(e){this.createStyle=(e,t)=>{const i="rgba(255, 255, 255, 0.3)",h="rgba(0, 0, 0, 0.5)";return[new n.ZP({fill:new s.Z({color:i}),stroke:new o.Z({color:h,width:3}),image:new r.Z({radius:5,stroke:new o.Z({color:h}),fill:new s.Z({color:i})}),text:new a.Z({textAlign:"center",textBaseline:"middle",font:"12pt sans-serif",fill:new s.Z({color:"#FFF"}),text:this.getLabelText(e),overflow:!0,stroke:new o.Z({color:h,width:3}),offsetX:0,offsetY:-10,rotation:0,scale:1})})]},this.clear=()=>{this.source.clear(),this.measureTooltip.setPosition(void 0)},this.handleDrawStart=e=>{e.feature.getGeometry().on("change",(e=>{var t,i="",n=void 0;this.active&&(this.pointerPosition&&(t=this.pointerPosition.coordinate),e.target instanceof d.Z&&(i=this.formatLabel("length",e.target.getLength()),n=e.target.getLastCoordinate()),e.target instanceof c.ZP&&(i=this.formatLabel("area",e.target.getArea()),n=t||e.target.getFirstCoordinate()),e.target instanceof g.Z&&(i=this.formatLabel("circle",e.target.getRadius()),n=t||e.target.getFirstCoordinate()),this.measureTooltipElement.innerHTML=i,this.measureTooltip.setPosition(n))}))},this.handleDrawEnd=e=>{this.setFeaturePropertiesFromGeometry(e.feature),this.measureTooltip.setPosition(void 0)},this.eventHandler=e=>{"Escape"===e.key&&this.draw.finishDrawing()},this.map=e.map,this.app=e.app,this.localObserver=e.localObserver,this.source=new h.Z,this.vector=new l.Z({layerType:"system",zIndex:5e3,name:"pluginMeasure",caption:"Measure layer",source:this.source,style:this.createStyle}),this.map.addLayer(this.vector),this.type="LineString",this.createMeasureTooltip()}setType(e){this.type=e,this.removeInteraction(),this.addInteraction()}getType(){return this.type}setFeaturePropertiesFromGeometry(e){if(e){var t,i,n=0,s=0,o=0,r={n:0,e:0};switch(i=(t=e.getGeometry()).getType()){case"Point":r={n:Math.round(t.getCoordinates()[1]),e:Math.round(t.getCoordinates()[0])};break;case"LineString":n=t.getLength()<1e3?Math.round(10*t.getLength())/10:Math.round(t.getLength());break;case"Polygon":o=Math.round(t.getArea());break;case"Circle":s=Math.round(t.getRadius())}e.setProperties({type:i,length:n,area:o,radius:s,position:r})}}formatLabel(e,t){let i;if("point"===e&&(i="Nord: "+t.n+" \xd6st: "+t.e),"number"===typeof t&&(t="length"===e&&t<1e3?Math.round(10*t)/10:Math.round(t)),"circle"===e){let e=" m",n=" m\xb2";t>=1e3&&(e=" km",t/=1e3),i="R = "+Number(t).toLocaleString()+e+" \nA = "+(Math.round(t*t*Math.PI*1e3)/1e3).toLocaleString()+n}if("area"===e&&(i=t>1e5?Number(Math.round(t/1e6*100)/100).toLocaleString()+" km\xb2":Number(Math.round(100*t)/100).toLocaleString()+" m\xb2"),"length"===e){let e=" m";t>=1e3&&(e=" km",t/=1e3),i=Number(t).toLocaleString()+e}return i}createMeasureTooltip(){this.measureTooltipElement&&this.measureTooltipElement.parentNode.removeChild(this.measureTooltipElement),this.measureTooltipElement=document.createElement("div"),this.measureTooltipElement.className="tooltip-draw tooltip-measure",this.measureTooltip=new p.Z({element:this.measureTooltipElement,offset:[0,-15],positioning:"bottom-center"}),this.map.addOverlay(this.measureTooltip)}getLabelText(e){const t=e.getProperties();switch(e.getProperties().type){case"Point":return this.formatLabel("point",t.position);case"LineString":return this.formatLabel("length",t.length);case"Circle":return this.formatLabel("circle",t.radius);case"Polygon":return this.formatLabel("area",t.area);default:return""}}addInteraction(){this.draw=new m.ZP({source:this.source,type:this.type,style:new n.ZP({fill:new s.Z({color:"rgba(255, 255, 255, 0.2)"}),stroke:new o.Z({color:"rgba(0, 0, 0, 0.5)",lineDash:[10,10],width:2}),image:new r.Z({radius:5,stroke:new o.Z({color:"rgba(0, 0, 0, 0.7)"}),fill:new s.Z({color:"rgba(255, 255, 255, 0.2)"})})})}),this.draw.on("drawstart",this.handleDrawStart),this.draw.on("drawend",this.handleDrawEnd),this.map.addInteraction(this.draw),this.map.snapHelper.add("measure")}removeInteraction(){this.measureTooltip.setPosition(void 0),this.map.snapHelper.delete("measure"),this.map.removeInteraction(this.draw)}setActive(e){e&&!this.active&&(document.addEventListener("keydown",this.eventHandler),this.addInteraction(),this.map.clickLock.add("measure")),!1===e&&(document.removeEventListener("keydown",this.eventHandler),this.removeInteraction(),this.map.clickLock.delete("measure")),this.active=e}getMap(){return this.map}}},42670:(e,t,i)=>{var n=i(45957),s=i(5989),o=i(99148),r=i(37130),a=i(30923),h=i(1408);const l="element",d="map",c="offset",g="position",m="positioning";class p extends n.Z{constructor(e){super(),this.on,this.once,this.un,this.options=e,this.id=e.id,this.insertFirst=void 0===e.insertFirst||e.insertFirst,this.stopEvent=void 0===e.stopEvent||e.stopEvent,this.element=document.createElement("div"),this.element.className=void 0!==e.className?e.className:"ol-overlay-container "+o.$A,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=!0===e.autoPan?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(l,this.handleElementChanged),this.addChangeListener(d,this.handleMapChanged),this.addChangeListener(c,this.handleOffsetChanged),this.addChangeListener(g,this.handlePositionChanged),this.addChangeListener(m,this.handlePositioningChanged),void 0!==e.element&&this.setElement(e.element),this.setOffset(void 0!==e.offset?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),void 0!==e.position&&this.setPosition(e.position)}getElement(){return this.get(l)}getId(){return this.id}getMap(){return this.get(d)||null}getOffset(){return this.get(c)}getPosition(){return this.get(g)}getPositioning(){return this.get(m)}handleElementChanged(){(0,h.ep)(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){this.mapPostrenderListenerKey&&((0,h.ZF)(this.element),(0,a.bN)(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const e=this.getMap();if(e){this.mapPostrenderListenerKey=(0,a.oL)(e,s.Z.POSTRENDER,this.render,this),this.updatePixelPosition();const t=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?t.insertBefore(this.element,t.childNodes[0]||null):t.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set(l,e)}setMap(e){this.set(d,e)}setOffset(e){this.set(c,e)}setPosition(e){this.set(g,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const t=this.getMap();if(!t||!t.getTargetElement()||!this.get(g))return;const i=this.getRect(t.getTargetElement(),t.getSize()),n=this.getElement(),s=this.getRect(n,[(0,h.iO)(n),(0,h.Pb)(n)]),o=void 0===(e=e||{}).margin?20:e.margin;if(!(0,r.containsExtent)(i,s)){const n=s[0]-i[0],r=i[2]-s[2],a=s[1]-i[1],h=i[3]-s[3],l=[0,0];if(n<0?l[0]=n-o:r<0&&(l[0]=Math.abs(r)+o),a<0?l[1]=a-o:h<0&&(l[1]=Math.abs(h)+o),0!==l[0]||0!==l[1]){const i=t.getView().getCenterInternal(),n=t.getPixelFromCoordinateInternal(i);if(!n)return;const s=[n[0]+l[0],n[1]+l[1]],o=e.animation||{};t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(s),duration:o.duration,easing:o.easing})}}}getRect(e,t){const i=e.getBoundingClientRect(),n=i.left+window.pageXOffset,s=i.top+window.pageYOffset;return[n,s,n+t[0],s+t[1]]}setPositioning(e){this.set(m,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),t=this.getPosition();if(!e||!e.isRendered()||!t)return void this.setVisible(!1);const i=e.getPixelFromCoordinate(t),n=e.getSize();this.updateRenderedPosition(i,n)}updateRenderedPosition(e,t){const i=this.element.style,n=this.getOffset(),s=this.getPositioning();this.setVisible(!0);const o=Math.round(e[0]+n[0])+"px",r=Math.round(e[1]+n[1])+"px";let a="0%",h="0%";"bottom-right"==s||"center-right"==s||"top-right"==s?a="-100%":"bottom-center"!=s&&"center-center"!=s&&"top-center"!=s||(a="-50%"),"bottom-left"==s||"bottom-center"==s||"bottom-right"==s?h="-100%":"center-left"!=s&&"center-center"!=s&&"center-right"!=s||(h="-50%");const l="translate(".concat(a,", ").concat(h,") translate(").concat(o,", ").concat(r,")");this.rendered.transform_!=l&&(this.rendered.transform_=l,i.transform=l)}getOptions(){return this.options}}t.Z=p}}]);
//# sourceMappingURL=9565.7b268d4c.chunk.js.map