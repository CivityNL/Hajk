{"version":3,"file":"static/js/3190.cf1a0f1f.chunk.js","mappings":"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","sources":["plugins/LayerSwitcher/components/BreadCrumb.js","../node_modules/@mui/icons-material/CallMade.js","../node_modules/@mui/icons-material/Visibility.js"],"sourcesContent":["import React, { Component } from \"react\";\nimport CloseIcon from \"@mui/icons-material/Close\";\nimport VisibilityIcon from \"@mui/icons-material/Visibility\";\nimport VisibilityOffIcon from \"@mui/icons-material/VisibilityOff\";\nimport LaunchIcon from \"@mui/icons-material/Launch\";\nimport { Button, IconButton, Grid, Typography, Paper } from \"@mui/material\";\nimport CallMadeIcon from \"@mui/icons-material/CallMade\";\nimport { styled } from \"@mui/material/styles\";\nimport Popover from \"@mui/material/Popover\";\n\nconst StyledPaper = styled(Paper)(({ theme }) => ({\n  marginRight: theme.spacing(0.5),\n  border: `${theme.spacing(0.1)} solid ${theme.palette.divider}`,\n}));\n\nconst ContentGridContainer = styled(Grid)(({ theme }) => ({\n  padding: theme.spacing(1),\n}));\n\nconst TitleGridContainer = styled(Grid)(({ theme }) => ({\n  paddingLeft: theme.spacing(0.5),\n}));\n\nconst LinkContainer = styled(\"div\")(({ theme }) => ({\n  padding: theme.spacing(0.5),\n}));\n\nclass BreadCrumb extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      hidden: props.layer.getOpacity() === 0,\n      anchorEl: null,\n      popoverOpen: false,\n    };\n    this.chapters = this.findChapters(\n      this.props.layer.get(\"name\"),\n      this.props.chapters\n    );\n  }\n\n  setHidden = (e) => {\n    var o = e.target.getOpacity();\n    this.setState({\n      hidden: o === 0,\n    });\n  };\n\n  componentDidMount() {\n    this.props.layer.on(\"change:opacity\", this.setHidden);\n  }\n\n  componentWillUnmount() {\n    this.props.layer.un(\"change:opacity\", this.setHidden);\n  }\n\n  setLayerOpacity = (layer) => (event) => {\n    this.setState(\n      {\n        hidden: !this.state.hidden,\n      },\n      () => {\n        layer.setOpacity(this.state.hidden ? 0 : 1);\n      }\n    );\n  };\n\n  setLayerVisibility = (layer) => (event) => {\n    if (layer.get(\"visible\")) {\n      layer.setOpacity(1);\n      this.props.app.globalObserver.publish(\"layerswitcher.hideLayer\", layer);\n    }\n    layer.set(\"visible\", !layer.get(\"visible\"));\n  };\n\n  isOverflow(el) {\n    if (!el) return false;\n    let original = el.scrollLeft++;\n    let overflow = el.scrollLeft-- > original;\n    return overflow;\n  }\n\n  findChapters(id, chapters) {\n    if (!chapters) {\n      return [];\n    }\n    return chapters.reduce((chaptersWithLayer, chapter) => {\n      if (Array.isArray(chapter.layers)) {\n        if (chapter.layers.some((layerId) => layerId === id)) {\n          chaptersWithLayer = [...chaptersWithLayer, chapter];\n        }\n        if (chapter.chapters.length > 0) {\n          chaptersWithLayer = [\n            ...chaptersWithLayer,\n            ...this.findChapters(id, chapter.chapters),\n          ];\n        }\n      }\n      return chaptersWithLayer;\n    }, []);\n  }\n\n  renderChapterLinks() {\n    if (this.chapters && this.chapters.length > 0) {\n      if (this.chapters.length > 0) {\n        return (\n          <LinkContainer>\n            {this.chapters.map((chapter, i) => {\n              return (\n                <div key={i}>\n                  <Button\n                    size=\"small\"\n                    onClick={() => {\n                      this.setState({\n                        popoverOpen: false,\n                      });\n                      this.openInformative(chapter);\n                    }}\n                  >\n                    {chapter.header}\n                    <CallMadeIcon />\n                  </Button>\n                </div>\n              );\n            })}\n          </LinkContainer>\n        );\n      } else {\n        return null;\n      }\n    } else {\n      return null;\n    }\n  }\n\n  openInformative = (chapter) => {\n    const informativeWindow = this.props.app.windows.find(\n      (window) => window.type === \"informative\"\n    );\n    informativeWindow.props.custom.open(chapter);\n  };\n\n  handleClose = () => {\n    this.setState({\n      anchorEl: null,\n      popoverOpen: false,\n    });\n  };\n\n  renderChaptersPopover(target) {\n    this.setState({\n      anchorEl: target,\n      popoverOpen: true,\n    });\n  }\n\n  renderInformativeIcon() {\n    if (!this.props.chapters) {\n      return null;\n    }\n    if (this.chapters && this.chapters.length > 0) {\n      return (\n        <IconButton\n          size=\"small\"\n          onClick={(e) => {\n            this.chapters.length === 1\n              ? this.openInformative(this.chapters[0])\n              : this.renderChaptersPopover(e.target);\n          }}\n        >\n          <LaunchIcon />\n        </IconButton>\n      );\n    } else {\n      return null;\n    }\n  }\n\n  render() {\n    const { layer, title, type } = this.props;\n    const { hidden } = this.state;\n    return (\n      <StyledPaper square={type === \"flat\"} elevation={0}>\n        <ContentGridContainer\n          container\n          data-type=\"bread-crumb\"\n          justifyContent=\"space-between\"\n          alignItems=\"center\"\n        >\n          <Grid item>\n            <IconButton\n              size=\"small\"\n              onClick={this.setLayerOpacity(layer)}\n              aria-label=\"Visa/dölj lagret tillfälligt\"\n            >\n              {!hidden ? <VisibilityIcon /> : <VisibilityOffIcon />}\n            </IconButton>\n          </Grid>\n          {this.renderInformativeIcon()}\n          <TitleGridContainer item>\n            <Typography variant=\"body2\" noWrap>\n              {title}\n            </Typography>\n          </TitleGridContainer>\n          <Grid item>\n            <IconButton\n              size=\"small\"\n              onClick={this.setLayerVisibility(layer)}\n              aria-label=\"Verwijder de laag van de kaart\"\n            >\n              <CloseIcon />\n            </IconButton>\n          </Grid>\n        </ContentGridContainer>\n        <Popover\n          id=\"simple-popper\"\n          open={this.state.popoverOpen}\n          anchorEl={this.state.anchorEl}\n          onClose={this.handleClose}\n          anchorOrigin={{\n            vertical: \"top\",\n            horizontal: \"center\",\n          }}\n          transformOrigin={{\n            vertical: \"bottom\",\n            horizontal: \"center\",\n          }}\n        >\n          {this.renderChapterLinks()}\n        </Popover>\n      </StyledPaper>\n    );\n  }\n}\n\nexport default BreadCrumb;\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5z\"\n}), 'CallMade');\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z\"\n}), 'Visibility');\nexports.default = _default;"],"names":["StyledPaper","styled","Paper","theme","marginRight","spacing","border","palette","divider","ContentGridContainer","Grid","padding","TitleGridContainer","paddingLeft","LinkContainer","BreadCrumb","Component","constructor","props","super","setHidden","e","o","target","getOpacity","this","setState","hidden","setLayerOpacity","layer","event","state","setOpacity","setLayerVisibility","get","app","globalObserver","publish","set","openInformative","chapter","windows","find","window","type","custom","open","handleClose","anchorEl","popoverOpen","chapters","findChapters","componentDidMount","on","componentWillUnmount","un","isOverflow","el","original","scrollLeft","id","reduce","chaptersWithLayer","Array","isArray","layers","some","layerId","length","renderChapterLinks","map","i","size","onClick","header","renderChaptersPopover","renderInformativeIcon","render","title","square","elevation","container","justifyContent","alignItems","item","variant","noWrap","onClose","anchorOrigin","vertical","horizontal","transformOrigin","_interopRequireDefault","require","exports","_createSvgIcon","_jsxRuntime","_default","default","jsx","d"],"sourceRoot":""}