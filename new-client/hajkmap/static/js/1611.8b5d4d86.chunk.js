"use strict";(self.webpackChunkhajk_client=self.webpackChunkhajk_client||[]).push([[1611,1566,2130],{41566:(e,t,r)=>{r.r(t);var i=r(72791),a=r(30829),n=r(77196),s=r(63466),l=r(20068),o=r(13400),d=r(43950),p=r(80184);t.default=e=>{var t;let{layer:r}=e;const h=r.getSource(),c="function"===typeof h.getParams&&(null===(t=h.getParams())||void 0===t?void 0:t.CQL_FILTER)||"",[u,g]=(0,i.useState)(c);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(a.Z,{htmlFor:"cqlfilter",children:"Ange CQL-filter"}),(0,p.jsx)(n.Z,{id:"cqlfilter",type:"text",multiline:!0,fullWidth:!0,placeholder:"foo='bar' AND fii='baz'",value:u,onChange:e=>g(e.target.value),endAdornment:(0,p.jsx)(s.Z,{position:"end",children:(0,p.jsx)(l.Z,{disableInteractive:!0,title:"Tryck f\xf6r att ladda om lagret med angivet filter",children:(0,p.jsx)(o.Z,{edge:"end",onClick:()=>{let e=u.trim();0===e.length&&(e=void 0),r.getSource().updateParams({CQL_FILTER:e})},size:"large",children:(0,p.jsx)(d.Z,{})})})})})]})}},61611:(e,t,r)=>{r.r(t);var i=r(72791),a=r(72130),n=r(41566),s=r(20890),l=r(20431),o=r(66934),d=r(80184);const p=(0,o.ZP)("div")((e=>{let{theme:t}=e;return{overflow:"hidden",paddingLeft:"45px",paddingRight:"30px",paddingBottom:"10px",paddingTop:"10px"}})),h=(0,o.ZP)("div")((e=>{let{theme:t}=e;return{display:"flex",flexFlow:"row nowrap",alignItems:"center"}})),c=(0,o.ZP)("div")((e=>{let{theme:t}=e;return{flex:"0 1 auto",minWidth:"40px"}})),u=(0,o.ZP)("div")((e=>{let{theme:t}=e;return{padding:"0 16px",flex:"1 1 auto","& > span":{top:"4px"}}}));class g extends i.PureComponent{constructor(e){var t;super(e),this.updateOpacity=e=>{const t=e.target.getOpacity();this.setState({opacityValue:t})},this.opacitySliderChanged=(e,t)=>{this.props.layer.setOpacity(t)},this.toggle=e=>{this.setState({toggled:!this.state.toggled})};const{layer:r}=e,i=r.get("layerInfo");this.state={opacityValue:r.get("opacity"),legend:i.legend},null===(t=r.on)||void 0===t||t.call(r,"change:opacity",this.updateOpacity)}renderOpacitySlider(){const e=this.state.opacityValue;return(0,d.jsxs)(h,{children:[(0,d.jsx)(c,{children:(0,d.jsx)(s.Z,{variant:"subtitle2",children:"Opacitet:"})}),(0,d.jsx)(u,{children:(0,d.jsx)(l.ZP,{size:"small",value:e,min:0,max:1,step:.05,onChange:this.opacitySliderChanged})}),(0,d.jsx)(c,{children:(0,d.jsxs)(s.Z,{variant:"subtitle2",children:[Math.trunc(100*e.toFixed(2))," %"]})})]})}renderSettings(){var e;return(0,d.jsx)("div",{children:(0,d.jsxs)(p,{children:[!1!==(null===(e=this.props.options)||void 0===e?void 0:e.enableTransparencySlider)&&this.props.showOpacity?this.renderOpacitySlider():null,this.props.showLegend?this.renderLegendImage():null,this.props.layer.getProperties().filterable?(0,d.jsx)(a.default,{layer:this.props.layer}):null,this.props.cqlFilterVisible&&(0,d.jsx)(n.default,{layer:this.props.layer})]})})}renderLegendImage(){var e,t,r;const i=this.props.index?this.props.index:0,a=null!==(e=null===(t=this.state.legend)||void 0===t||null===(r=t[i])||void 0===r?void 0:r.url)&&void 0!==e?e:"";return a?(0,d.jsx)("div",{children:(0,d.jsx)("img",{"max-width":"250px",alt:"Teckenf\xf6rklaring",src:a})}):null}render(){return(0,d.jsx)("div",{children:(0,d.jsx)("div",{children:this.props.toggled?this.renderSettings():null})})}}t.default=g},72130:(e,t,r)=>{r.r(t);var i=r(72791),a=r(66934),n=r(76384),s=r(23786),l=r(30829),o=r(68096),d=r(4110),p=r(24518),h=r(20890),c=r(9501),u=r(25806),g=r(80184);const m=(0,a.ZP)(o.Z)((e=>{let{theme:t}=e;return{margin:t.spacing(1),minWidth:120}})),v=(0,a.ZP)(h.Z)((e=>{let{theme:t}=e;return{fontWeight:500}}));class f extends i.PureComponent{constructor(e){super(e),this.loadFeatureInfo=()=>{const{url:e,featureType:t}=this.props.layer.getProperties();(0,u.hfetch)(e+"?service=WFS&request=describeFeatureType&outputFormat=application/json&typename=".concat(t)).then((e=>{e.json().then((e=>{const r=e.featureTypes.find((e=>e.typeName===t));if(r&&Array.isArray(r.properties)){const e=r.properties.filter((e=>"gml:Geometry"!==e.type)).map((e=>e.name));this.setState({layerProperties:e})}}))}))},this.handleChange=e=>{this.setState({[e.target.name]:e.target.value})},this.setFilter=e=>{this.props.layer.set("filterAttribute",this.state.filterAttribute),this.props.layer.set("filterComparer",this.state.filterComparer),this.props.layer.set("filterValue",this.state.filterValue),this.props.layer.getSource().refresh()},this.resetFilter=e=>{this.setState({filterAttribute:"",filterValue:"",filterComparer:""}),this.props.layer.set("filterAttribute",""),this.props.layer.set("filterComparer",""),this.props.layer.set("filterValue",""),this.props.layer.getSource().refresh()},this.state={filterAttribute:e.layer.get("filterAttribute")||"",filterValue:e.layer.get("filterValue")||"",filterComparer:e.layer.get("filterComparer")||"",layerProperties:[]},this.loadFeatureInfo()}render(){const{layer:e}=this.props;return e instanceof c.Z?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(v,{variant:"subtitle2",children:"Filtrera inneh\xe5ll baserat p\xe5 attribut"}),(0,g.jsxs)(m,{children:[(0,g.jsx)(l.Z,{htmlFor:"attribute",children:"Attribut"}),(0,g.jsx)(n.Z,{value:this.state.filterAttribute,onChange:this.handleChange,inputProps:{name:"filterAttribute",id:"attribute"},children:this.state.layerProperties.map(((e,t)=>(0,g.jsx)(s.Z,{value:e,children:e},t)))})]}),(0,g.jsxs)(m,{children:[(0,g.jsx)(l.Z,{htmlFor:"comparer",children:"J\xe4mf\xf6rare"}),(0,g.jsxs)(n.Z,{value:this.state.filterComparer,onChange:this.handleChange,inputProps:{name:"filterComparer",id:"comparer"},children:[(0,g.jsx)(s.Z,{value:"gt",children:"St\xf6rre \xe4n"}),(0,g.jsx)(s.Z,{value:"lt",children:"Mindre \xe4n"}),(0,g.jsx)(s.Z,{value:"eq",children:"Lika med"}),(0,g.jsx)(s.Z,{value:"not",children:"Skilt fr\xe5n"})]})]}),(0,g.jsx)(m,{children:(0,g.jsx)(d.Z,{value:this.state.filterValue,onChange:this.handleChange,placeholder:"Filterv\xe4rde",inputProps:{name:"filterValue","aria-label":"V\xe4rde"}})}),(0,g.jsx)(p.Z,{variant:"contained",color:"primary",onClick:this.setFilter,children:"Aktivera"}),(0,g.jsx)(p.Z,{onClick:this.resetFilter,children:"\xc5terst\xe4ll"})]}):null}}t.default=f},43950:(e,t,r)=>{var i=r(64836);t.Z=void 0;var a=i(r(45649)),n=r(80184),s=(0,a.default)((0,n.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"}),"Refresh");t.Z=s},63466:(e,t,r)=>{r.d(t,{Z:()=>b});var i=r(63366),a=r(87462),n=r(72791),s=r(28182),l=r(94419),o=r(14036),d=r(20890),p=r(93840),h=r(52930),c=r(66934),u=r(75878),g=r(21217);function m(e){return(0,g.Z)("MuiInputAdornment",e)}var v,f=(0,u.Z)("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]),x=r(31402),y=r(80184);const j=["children","className","component","disablePointerEvents","disableTypography","position","variant"],Z=(0,c.ZP)("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t["position".concat((0,o.Z)(r.position))],!0===r.disablePointerEvents&&t.disablePointerEvents,t[r.variant]]}})((e=>{let{theme:t,ownerState:r}=e;return(0,a.Z)({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(t.vars||t).palette.action.active},"filled"===r.variant&&{["&.".concat(f.positionStart,"&:not(.").concat(f.hiddenLabel,")")]:{marginTop:16}},"start"===r.position&&{marginRight:8},"end"===r.position&&{marginLeft:8},!0===r.disablePointerEvents&&{pointerEvents:"none"})}));var b=n.forwardRef((function(e,t){const r=(0,x.Z)({props:e,name:"MuiInputAdornment"}),{children:c,className:u,component:g="div",disablePointerEvents:f=!1,disableTypography:b=!1,position:P,variant:C}=r,S=(0,i.Z)(r,j),F=(0,h.Z)()||{};let A=C;C&&F.variant,F&&!A&&(A=F.variant);const L=(0,a.Z)({},r,{hiddenLabel:F.hiddenLabel,size:F.size,disablePointerEvents:f,position:P,variant:A}),k=(e=>{const{classes:t,disablePointerEvents:r,hiddenLabel:i,position:a,size:n,variant:s}=e,d={root:["root",r&&"disablePointerEvents",a&&"position".concat((0,o.Z)(a)),s,i&&"hiddenLabel",n&&"size".concat((0,o.Z)(n))]};return(0,l.Z)(d,m,t)})(L);return(0,y.jsx)(p.Z.Provider,{value:null,children:(0,y.jsx)(Z,(0,a.Z)({as:g,ownerState:L,className:(0,s.default)(k.root,u),ref:t},S,{children:"string"!==typeof c||b?(0,y.jsxs)(n.Fragment,{children:["start"===P?v||(v=(0,y.jsx)("span",{className:"notranslate",children:"\u200b"})):null,c]}):(0,y.jsx)(d.Z,{color:"text.secondary",children:c})}))})}))}}]);
//# sourceMappingURL=1611.8b5d4d86.chunk.js.map