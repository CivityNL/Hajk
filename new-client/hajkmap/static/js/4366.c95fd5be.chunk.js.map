{"version":3,"file":"static/js/4366.c95fd5be.chunk.js","mappings":"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","sources":["plugins/Collector/components/Toolbar.js","../node_modules/@mui/icons-material/BorderStyle.js","../node_modules/@mui/icons-material/LinearScale.js","../node_modules/@mui/icons-material/ScatterPlot.js"],"sourcesContent":["import React, { Component } from \"react\";\nimport { styled } from \"@mui/material/styles\";\nimport Button from \"@mui/material/Button\";\nimport ScatterPlotIcon from \"@mui/icons-material/ScatterPlot\";\nimport BorderStyleIcon from \"@mui/icons-material/BorderStyle\";\nimport LinearScaleIcon from \"@mui/icons-material/LinearScale\";\nimport Typography from \"@mui/material/Typography\";\nimport WKT from \"ol/format/WKT\";\n\nconst StyledButton = styled(Button)(({ theme }) => ({\n  margin: theme.spacing(1),\n  width: \"115px\",\n}));\n\nconst ToolbarDiv = styled(\"div\")(({ theme }) => ({\n  margin: \"5px\",\n}));\n\nclass Toolbar extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      activeTool: undefined,\n    };\n    this.props.model.observer.subscribe(\"abortInteraction\", () => {\n      this.setState({\n        activeTool: undefined,\n      });\n    });\n\n    // Clear layer and attempt to read saved values\n    if (this.props.model.wkt) {\n      this.props.model.vectorSource.clear();\n\n      const format = new WKT();\n      const WKTString = this.props.model.formValues[this.props.field];\n      if (WKTString && WKTString.length > 0) {\n        let features = format.readFeatures(WKTString);\n        features.forEach((feature) => {\n          this.props.model.vectorSource.addFeature(feature);\n        });\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    this.props.model.observer.unsubscribe(\"abortInteraction\");\n    this.props.model.deactivateInteraction();\n  }\n\n  changeTool(type, geometryType) {\n    const { model } = this.props;\n    this.props.onChangeTool();\n    if (geometryType && this.state.activeTool === geometryType.toLowerCase()) {\n      model.deactivateInteraction();\n      return this.setState({\n        activeTool: undefined,\n      });\n    }\n    if (this.state.activeTool === type) {\n      model.deactivateInteraction();\n      return this.setState({\n        activeTool: undefined,\n      });\n    }\n    model.deactivateInteraction();\n\n    switch (type) {\n      case \"add\":\n        model.activateInteraction(\"add\", geometryType);\n        break;\n      case \"remove\":\n        model.activateInteraction(\"remove\");\n        break;\n      case \"modify\":\n        model.activateInteraction(\"modify\");\n        break;\n      case \"move\":\n        model.activateInteraction(\"move\");\n        break;\n      default:\n        break;\n    }\n  }\n\n  onAddPointClicked() {\n    this.setState({ activeTool: \"point\" });\n    this.changeTool(\"add\", \"Point\");\n  }\n\n  onAddLineClicked() {\n    this.setState({ activeTool: \"linestring\" });\n    this.changeTool(\"add\", \"LineString\");\n  }\n\n  onAddPolygonClicked() {\n    this.setState({ activeTool: \"polygon\" });\n    this.changeTool(\"add\", \"Polygon\");\n  }\n\n  getStatusMessage(data) {\n    if (!data) {\n      return (\n        <Typography>\n          Uppdateringen lyckades men det upptäcktes inte några ändringar.\n        </Typography>\n      );\n    }\n    if (data.ExceptionReport) {\n      return (\n        <Typography>\n          Uppdateringen misslyckades:{\" \"}\n          {data.ExceptionReport.Exception.ExceptionText.toString()}\n        </Typography>\n      );\n    }\n    if (\n      data.TransactionResponse &&\n      data.TransactionResponse.TransactionSummary\n    ) {\n      return (\n        <div>\n          <Typography>Uppdateringen lyckades.</Typography>\n          <Typography>\n            Antal skapade objekt:{\" \"}\n            {data.TransactionResponse.TransactionSummary.totalInserted.toString()}\n          </Typography>\n          <Typography>\n            Antal borttagna objekt:{\" \"}\n            {data.TransactionResponse.TransactionSummary.totalDeleted.toString()}\n          </Typography>\n          <Typography>\n            Antal uppdaterade objekt:{\" \"}\n            {data.TransactionResponse.TransactionSummary.totalUpdated.toString()}\n          </Typography>\n        </div>\n      );\n    } else {\n      return (\n        <Typography>\n          Status för uppdateringen kunde inte avläsas ur svaret från servern.\n        </Typography>\n      );\n    }\n  }\n\n  onSaveClicked() {\n    if (!this.props.model.editSource) {\n      return;\n    }\n    this.props.model.save((response) => {\n      this.props.model.filty = false;\n      this.props.model.refreshEditingLayer();\n      this.props.app.globalObserver.publish(\n        \"core.alert\",\n        this.getStatusMessage(response)\n      );\n    });\n  }\n\n  onCancelClicked() {\n    this.props.model.deactivate();\n    this.props.panel.setState({\n      checked: false,\n      enabled: false,\n      selectedSource: false,\n    });\n    this.setState({\n      activeTool: undefined,\n    });\n  }\n\n  getSelectedStyle(type) {\n    var style = {};\n    if (type === this.state.activeTool) {\n      style.backgroundColor = \"#ccc\";\n    }\n    return style;\n  }\n\n  storeValues() {\n    // Stores any potential features found on the map as WKT before taking the next or previous step.\n    //These are later pushed to the server on submission.\n    //They are also put on the map again if the user comes back to this step.\n    if (!this.props.model.wkt) {\n      return;\n    }\n    const format = new WKT();\n    let wkt = \"\";\n\n    if (this.props.model.vectorSource.getFeatures().length > 0) {\n      wkt = format.writeFeatures(this.props.model.vectorSource.getFeatures());\n    }\n\n    // Store the converted features in the model\n    let formValues = Object.assign({}, this.props.model.formValues);\n    formValues[this.props.field] = wkt;\n    this.props.model.formValues = formValues;\n    // Clear layer\n    this.props.model.vectorSource.clear();\n  }\n\n  render() {\n    const source = this.props.serviceConfig;\n    var disabled = !this.props.enabled,\n      editPoint = false,\n      editPolygon = false,\n      editLine = false;\n\n    if (this.props.model.wkt) {\n      // WKT gets the information from the tag since there is support for multiple toolbars\n      // Different toolbars can therefore support different types of geometries\n      editPoint = this.props.geotype.indexOf(\"point\") !== -1;\n      editPolygon = this.props.geotype.indexOf(\"polygon\") !== -1;\n      editLine = this.props.geotype.indexOf(\"line\") !== -1;\n    } else if (source) {\n      // Non-WKT only supports insertion of one geometry so it can be retrieved from the source\n      editPoint = source.editPoint;\n      editLine = source.editLine;\n      editPolygon = source.editPolygon;\n    }\n\n    return (\n      <div>\n        <ToolbarDiv>\n          <div>\n            <StyledButton\n              variant=\"contained\"\n              disabled={disabled === false ? !editPoint : disabled}\n              onClick={() => {\n                this.onAddPointClicked();\n              }}\n              type=\"button\"\n              title=\"Lägg till plats\"\n              style={this.getSelectedStyle(\"point\")}\n            >\n              Plats\n              <ScatterPlotIcon sx={{ marginLeft: 1 }} />\n            </StyledButton>\n            <StyledButton\n              variant=\"contained\"\n              disabled={disabled === false ? !editLine : disabled}\n              onClick={() => {\n                this.onAddLineClicked();\n              }}\n              type=\"button\"\n              title=\"Lägg till sträcka\"\n              style={this.getSelectedStyle(\"linestring\")}\n            >\n              Sträcka\n              <LinearScaleIcon sx={{ marginLeft: 1 }} />\n            </StyledButton>\n            <StyledButton\n              variant=\"contained\"\n              disabled={disabled === false ? !editPolygon : disabled}\n              onClick={() => {\n                this.onAddPolygonClicked();\n              }}\n              type=\"button\"\n              title=\"Lägg till område\"\n              style={this.getSelectedStyle(\"polygon\")}\n            >\n              Område\n              <BorderStyleIcon sx={{ marginLeft: 1 }} />\n            </StyledButton>\n          </div>\n        </ToolbarDiv>\n      </div>\n    );\n  }\n}\n\nexport default Toolbar;\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M15 21h2v-2h-2v2zm4 0h2v-2h-2v2zM7 21h2v-2H7v2zm4 0h2v-2h-2v2zm8-4h2v-2h-2v2zm0-4h2v-2h-2v2zM3 3v18h2V5h16V3H3zm16 6h2V7h-2v2z\"\n}), 'BorderStyle');\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M19.5 9.5c-1.03 0-1.9.62-2.29 1.5h-2.92c-.39-.88-1.26-1.5-2.29-1.5s-1.9.62-2.29 1.5H6.79c-.39-.88-1.26-1.5-2.29-1.5C3.12 9.5 2 10.62 2 12s1.12 2.5 2.5 2.5c1.03 0 1.9-.62 2.29-1.5h2.92c.39.88 1.26 1.5 2.29 1.5s1.9-.62 2.29-1.5h2.92c.39.88 1.26 1.5 2.29 1.5 1.38 0 2.5-1.12 2.5-2.5s-1.12-2.5-2.5-2.5z\"\n}), 'LinearScale');\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = (0, _createSvgIcon.default)([/*#__PURE__*/(0, _jsxRuntime.jsx)(\"circle\", {\n  cx: \"7\",\n  cy: \"14\",\n  r: \"3\"\n}, \"0\"), /*#__PURE__*/(0, _jsxRuntime.jsx)(\"circle\", {\n  cx: \"11\",\n  cy: \"6\",\n  r: \"3\"\n}, \"1\"), /*#__PURE__*/(0, _jsxRuntime.jsx)(\"circle\", {\n  cx: \"16.6\",\n  cy: \"17.6\",\n  r: \"3\"\n}, \"2\")], 'ScatterPlot');\nexports.default = _default;"],"names":["StyledButton","styled","Button","theme","margin","spacing","width","ToolbarDiv","Toolbar","Component","constructor","props","super","this","state","activeTool","undefined","model","observer","subscribe","setState","wkt","vectorSource","clear","format","WKT","WKTString","formValues","field","length","readFeatures","forEach","feature","addFeature","componentWillUnmount","unsubscribe","deactivateInteraction","changeTool","type","geometryType","onChangeTool","toLowerCase","activateInteraction","onAddPointClicked","onAddLineClicked","onAddPolygonClicked","getStatusMessage","data","ExceptionReport","Exception","ExceptionText","toString","TransactionResponse","TransactionSummary","totalInserted","totalDeleted","totalUpdated","onSaveClicked","editSource","save","response","filty","refreshEditingLayer","app","globalObserver","publish","onCancelClicked","deactivate","panel","checked","enabled","selectedSource","getSelectedStyle","style","backgroundColor","storeValues","getFeatures","writeFeatures","Object","assign","render","source","serviceConfig","disabled","editPoint","editPolygon","editLine","geotype","indexOf","variant","onClick","title","sx","marginLeft","_interopRequireDefault","require","exports","_createSvgIcon","_jsxRuntime","_default","default","jsx","d","cx","cy","r"],"sourceRoot":""}