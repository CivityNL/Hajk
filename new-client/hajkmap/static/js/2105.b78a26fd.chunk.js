"use strict";(self.webpackChunkhajk_client=self.webpackChunkhajk_client||[]).push([[2105,8619,3151,8702,4513],{28619:(t,e,i)=>{i.r(e);var s=i(72791),o=i(66934),r=i(57621),a=i(93044),n=i(66647),l=i(9585),c=i(80184);const h=(0,o.ZP)(r.Z)((t=>{let{theme:e}=t;return{marginBottom:e.spacing(1),width:"210px",[e.breakpoints.down("sm")]:{boxShadow:"none",borderBottom:"1px solid #ccc",borderRadius:0,margin:0,width:"100%",justifyContent:"left"}}})),d=(0,o.ZP)(a.Z)((t=>{let{theme:e}=t;return{background:e.palette.text.primary}}));class p extends s.PureComponent{constructor(){super(...arguments),this.state={open:!1,text:""}}render(){const{abstract:t,icon:e,onClick:i,title:s}=this.props;return(0,c.jsx)(h,{onClick:i,children:(0,c.jsx)(n.Z,{children:(0,c.jsx)(l.Z,{avatar:(0,c.jsx)(d,{children:e}),title:s,subheader:t})})})}}p.defaultProps={abstract:"Beskrivning saknas",title:"Titel saknas"},e.default=p},73151:(t,e,i)=>{i.r(e);var s=i(72791),o=i(85286),r=i(54164),a=i(19538),n=i(45484),l=i(57064),c=i(49900),h=i(26191),d=i(28619),p=i(74599),u=i(80184);class g extends s.PureComponent{constructor(t){var e;super(t),e=this,this.handleButtonClick=t=>{this.showWindow({hideOtherPluginWindows:!0,runCallback:!0}),this.props.app.globalObserver.publish("core.onlyHideDrawerIfNeeded")},this.showWindow=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const i=t.hideOtherPluginWindows||!0,s=t.runCallback||!0;if(e.props.app.activeTool=e.type,e.props.app.globalObserver.publish("analytics.trackEvent",{eventName:"pluginShown",pluginName:e.type,activeMap:e.props.app.config.activeMap}),e.props.app.pushPluginIntoHistory({type:e.type,icon:e.props.custom.icon,title:e.title,description:e.description}),!0===e.state.windowVisible)return null;!0===i&&e.props.app.onWindowOpen(e),e.setState({windowVisible:!0},(()=>{e.props.app.globalObserver.publish("core.pluginVisibilityChanged"),!0===s&&"function"===typeof e.props.custom.onWindowShow&&e.props.custom.onWindowShow()}))},this.closeWindow=()=>{this.type===this.props.app.activeTool&&(this.props.app.activeTool=void 0),this.setState({windowVisible:!1},(()=>{this.props.app.globalObserver.publish("core.pluginVisibilityChanged"),"function"===typeof this.props.custom.onWindowHide&&this.props.custom.onWindowHide()}))},this.type=t.type.toLowerCase()||void 0,this.description=t.options.description||t.custom.description;const i=!1===this.props.app.config.mapConfig.map.clean&&(o.isMobile?t.options.visibleAtStartMobile:t.options.visibleAtStart)||!1;i&&this.props.app.globalObserver.publish("analytics.trackEvent",{eventName:"pluginShown",pluginName:this.type,activeMap:this.props.app.config.activeMap}),this.state={title:t.options.title||t.custom.title||"Unnamed plugin",color:t.options.color||t.custom.color||null,windowVisible:i},this.title=t.options.title||t.custom.title||"Unnamed plugin",this.width=t.options.width||t.custom.width||400,this.height=t.options.height||t.custom.height||"auto",this.position=t.options.position||t.custom.position||"left",t.app.registerWindowPlugin(this);const s="".concat(this.type,".showWindow");t.app.globalObserver.subscribe(s,(t=>{this.showWindow(t)}));const r="".concat(this.type,".closeWindow");t.app.globalObserver.subscribe(r,(()=>{this.closeWindow()}))}componentDidUpdate(t){t.custom.title!==this.props.custom.title&&this.setState({title:this.props.custom.title}),t.custom.color!==this.props.custom.color&&this.setState({color:this.props.custom.color})}pluginIsWidget(t){return["left","right"].includes(t)}renderWindow(t){const{target:e}=this.props.options;return"function"===typeof(null===t||void 0===t?void 0:t.render)?t.render():(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(h.default,{globalObserver:this.props.app.globalObserver,title:this.state.title,color:this.state.color,onClose:this.closeWindow,open:this.state.windowVisible,onResize:this.props.custom.onResize,onMaximize:this.props.custom.onMaximize,onMinimize:this.props.custom.onMinimize,draggingEnabled:this.props.custom.draggingEnabled,customPanelHeaderButtons:this.props.custom.customPanelHeaderButtons,resizingEnabled:this.props.custom.resizingEnabled,scrollable:this.props.custom.scrollable,allowMaximizedWindow:this.props.custom.allowMaximizedWindow,disablePadding:this.props.custom.disablePadding,width:this.width,height:this.height,position:this.position,mode:"window",layerswitcherConfig:this.props.app.config.mapConfig.tools.find((t=>"layerswitcher"===t.type)),children:s.cloneElement(this.props.children,{windowVisible:this.state.windowVisible})}),"hidden"!==e&&this.renderDrawerButton(),this.pluginIsWidget(e)&&this.renderWidgetButton("".concat(e,"-column")),"control"===e&&this.renderControlButton()]})}renderDrawerButton(){return(0,r.createPortal)((0,u.jsx)(a.Z,{mdUp:this.pluginIsWidget(this.props.options.target)||"control"===this.props.options.target,children:(0,u.jsxs)(n.ZP,{button:!0,divider:!0,selected:this.state.windowVisible,onClick:this.handleButtonClick,children:[(0,u.jsx)(l.Z,{children:this.props.custom.icon}),(0,u.jsx)(c.Z,{primary:this.title})]})}),document.getElementById("plugin-buttons"))}renderWidgetButton(t){return(0,r.createPortal)((0,u.jsx)(a.Z,{mdDown:!0,children:(0,u.jsx)(d.default,{icon:this.props.custom.icon,onClick:this.handleButtonClick,title:this.title,abstract:this.description})}),document.getElementById(t))}renderControlButton(){return(0,r.createPortal)((0,u.jsx)(a.Z,{mdDown:!0,children:(0,u.jsx)(p.default,{icon:this.props.custom.icon,onClick:this.handleButtonClick,title:this.title,abstract:this.description})}),document.getElementById("plugin-control-buttons"))}render(){return!0!==this.props.app.config.mapConfig.map.clean&&this.renderWindow(this.props.custom)}}e.default=g},92105:(t,e,i)=>{i.r(e);var s=i(72791),o=i(73151),r=i(85194),a=i.n(r),n=i(65097),l=i(94513),c=i(38702),h=i(80184);class d extends s.PureComponent{constructor(t){super(t),this.onWindowShow=()=>{this.BufferModel.setActive(!0)},this.onWindowHide=()=>{this.BufferModel.setActive(!1),this.localObserver.publish("resetView"),this.BufferModel.highlightSource.clear()},this.localObserver=new(a()),this.BufferModel=new c.default({map:t.map,localObserver:this.localObserver})}render(){return(0,h.jsx)(o.default,{...this.props,type:"Buffer",custom:{icon:(0,h.jsx)(n.Z,{}),title:"Buffra",description:"Skapa en buffer runt objekt utvalda objekt i kartan",height:650,width:400,top:void 0,left:void 0,onWindowShow:this.onWindowShow,onWindowHide:this.onWindowHide},children:(0,h.jsx)(l.default,{model:this.BufferModel,app:this.props.app,localObserver:this.localObserver})})}}e.default=d},38702:(t,e,i)=>{i.r(e);var s=i(66274),o=i(99359),r=i(64665),a=i(90927),n=i(66233),l=i(5400),c=i(5426),h=i(9501),d=i(60313),p=i(78550),u=i(25806),g=(0,o.Z)("HT");e.default=class{constructor(t){Object.defineProperty(this,g,{writable:!0,value:void 0}),this.activateSelecting=t=>{!0===t?(this.map.on("click",this.handleClick),this.map.clickLock.add("buffer")):(this.map.un("click",this.handleClick),this.map.clickLock.delete("buffer"))},this.handleClick=t=>{this.map.getFeaturesAtPixel(t.pixel,{layerFilter:function(t){const e=t.get("name");return"pluginBuffer"!==e&&"pluginBufferSelection"!==e}}).forEach((t=>{const e=t.clone();e.setStyle(),this.highlightSource.addFeature(e)})),this.map.getLayers().getArray().filter((t=>t.getVisible())).filter((t=>t.layersInfo)).map((async e=>{try{const i=Object.values(e.layersInfo).filter((t=>!0===t.queryable)).map((t=>t.id));if(void 0!==t.coordinate){const s=this.map.getView(),o=e.getSource().getFeatureInfoUrl(t.coordinate,s.getResolution(),s.getProjection().getCode(),{INFO_FORMAT:"application/json",QUERY_LAYERS:i.join(",")}),r=await(0,u.hfetch)(o),a=await r.json(),n=(new d.Z).readFeatures(a);this.highlightSource.addFeatures(n)}}catch(i){}}))},this.bufferFeatures=t=>{const e=[];for(const i of this.highlightSource.getFeatures()){const o=(0,s.Z)(this,g)[g].getBuffered(i,t);e.push(o)}this.bufferSource.addFeatures(e)},this.clear=()=>{this.highlightSource.clear(),this.bufferSource.clear()},this.map=t.map,(0,s.Z)(this,g)[g]=new p.default({projection:t.map.getView().getProjection().getCode()}),this.highlightSource=new c.Z,this.highlightLayer=new h.Z({source:this.highlightSource,layerType:"system",zIndex:5e3,name:"pluginBufferSelection",caption:"Buffer selection layer",style:new r.ZP({fill:new a.Z({color:"rgba(255, 168, 231, 0.47)"}),stroke:new n.Z({color:"rgba(255, 168, 231, 1)",width:4}),image:new l.Z({radius:6,fill:new a.Z({color:"rgba(255, 168, 231, 0.47)"}),stroke:new n.Z({color:"rgba(255, 168, 231, 1)",width:1})})})}),this.bufferSource=new c.Z,this.bufferLayer=new h.Z({source:this.bufferSource,layerType:"system",zIndex:5e3,name:"pluginBuffer",caption:"Buffer layer",style:new r.ZP({fill:new a.Z({color:"rgba(255, 255, 255, 0.5)"}),stroke:new n.Z({color:"rgba(75, 100, 115, 1.5)",width:4}),image:new l.Z({radius:6,fill:new a.Z({color:"rgba(255, 255, 255, 0.5)"}),stroke:new n.Z({color:"rgba(75, 100, 115, 1.5)",width:2})})})}),this.map.addLayer(this.highlightLayer),this.map.addLayer(this.bufferLayer)}setActive(t){!1===t&&this.activateSelecting(!1)}}},94513:(t,e,i)=>{i.r(e);var s=i(72791),o=i(66934),r=i(61889),a=i(5936),n=i(96587),l=i(48550),c=i(24518),h=i(90388),d=i(20068),p=i(70242),u=i(74512),g=i(15825),m=i(29145),f=i(98246),v=i(80184);const b=(0,o.ZP)(h.Z)((t=>{let{theme:e}=t;return{width:"100%",paddingTop:5,paddingBottom:5,color:e.palette.text.primary,backgroundColor:e.palette.primary}}));class w extends s.PureComponent{constructor(t){super(t),this.state={name:"",isSelecting:!1,distance:1e3,activeStep:0},this.setSelecting=()=>{this.setState({isSelecting:!this.state.isSelecting},(()=>{this.props.model.activateSelecting(this.state.isSelecting)}))},this.setDistance=t=>{this.setState({distance:t.target.value})},this.handleNext=()=>{let t=null;if(0===this.state.activeStep){if(0===this.props.model.highlightSource.getFeatures().length)return void this.props.enqueueSnackbar("Du m\xe5ste markera minst ett objekt i kartan f\xf6r att kunna buffra",{variant:"error"});this.props.model.activateSelecting(!1),t=!1}const e=this.state.activeStep+1;this.setState({activeStep:e,...null!==t&&{isSelecting:t}})},this.handlePrev=()=>{const t=this.state.activeStep-1;this.setState({activeStep:t})},this.getNextButtonLabel=()=>{let t=null;switch(this.state.activeStep){case 1:t="Buffra";break;case 2:t="B\xf6rja om";break;default:t="N\xe4sta"}return t},this.renderPrevButton=()=>(0,v.jsx)(r.ZP,{item:!0,xs:6,children:(0,v.jsx)(c.Z,{fullWidth:!0,disabled:0===this.state.activeStep,onClick:this.handlePrev,children:"F\xf6reg\xe5ende"})}),this.renderClearButton=()=>(0!==this.model.highlightSource.getFeatures().length||0!==this.model.bufferSource.getFeatures().length)&&(0,v.jsx)(r.ZP,{item:!0,xs:12,children:(0,v.jsxs)(c.Z,{fullWidth:!0,onClick:()=>{this.model.clear(),this.forceUpdate()},children:[(0,v.jsx)(n.Z,{})," Rensa"]})}),this.model=this.props.model,this.app=this.props.app,this.globalObserver=this.props.app.globalObserver,this.props.localObserver.subscribe("resetView",(()=>{this.setState({activeStep:0,isSelecting:!1})}))}render(){return(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)(p.Z,{activeStep:this.state.activeStep,orientation:"vertical",children:[(0,v.jsxs)(u.Z,{children:[(0,v.jsx)(g.Z,{children:"V\xe4lj objekt att buffra"}),(0,v.jsx)(m.Z,{children:(0,v.jsxs)(r.ZP,{container:!0,spacing:2,direction:"row",children:[this.renderClearButton(),(0,v.jsx)(r.ZP,{item:!0,xs:12,children:(0,v.jsx)(d.Z,{disableInteractive:!0,title:"Markera flera objekt",children:(0,v.jsxs)(b,{onChange:this.setSelecting,selected:this.state.isSelecting,value:"isSelecting",children:[(0,v.jsx)(a.Z,{}),"V\xe4lj objekt"]})})}),this.renderPrevButton(),(0,v.jsx)(r.ZP,{item:!0,xs:6,children:(0,v.jsx)(c.Z,{fullWidth:!0,variant:"contained",color:"primary",onClick:this.handleNext,children:"N\xe4sta"})})]})})]},"1"),(0,v.jsxs)(u.Z,{children:[(0,v.jsx)(g.Z,{children:"Ange bufferavst\xe5nd"}),(0,v.jsx)(m.Z,{children:(0,v.jsxs)(r.ZP,{container:!0,spacing:2,direction:"row",children:[(0,v.jsx)(r.ZP,{item:!0,xs:12,children:(0,v.jsx)(l.Z,{variant:"outlined",fullWidth:!0,value:this.state.distance,onChange:this.setDistance,label:"Bufferavst\xe5nd (i meter)"})}),this.renderPrevButton(),(0,v.jsx)(r.ZP,{item:!0,xs:6,children:(0,v.jsx)(c.Z,{fullWidth:!0,variant:"contained",color:"primary",onClick:()=>{this.handleNext(),this.props.model.bufferFeatures(this.state.distance)},children:"Buffra"})})]})})]},"2"),(0,v.jsxs)(u.Z,{children:[(0,v.jsx)(g.Z,{children:"Klart"}),(0,v.jsx)(m.Z,{children:(0,v.jsxs)(r.ZP,{container:!0,spacing:2,direction:"row",children:[this.renderPrevButton(),(0,v.jsx)(r.ZP,{item:!0,xs:6,children:(0,v.jsx)(c.Z,{fullWidth:!0,variant:"contained",color:"primary",onClick:()=>{this.props.model.clear(),this.setState({activeStep:0})},children:"Rensa"})})]})})]},"3")]})})}}e.default=(0,f.RM)(w)},5936:(t,e,i)=>{var s=i(64836);e.Z=void 0;var o=s(i(45649)),r=i(80184),a=(0,o.default)((0,r.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"}),"AddBox");e.Z=a},65097:(t,e,i)=>{var s=i(64836);e.Z=void 0;var o=s(i(45649)),r=i(80184),a=(0,o.default)((0,r.jsx)("path",{d:"M12 2C6.49 2 2 6.49 2 12s4.49 10 10 10 10-4.49 10-10S17.51 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm3-8c0 1.66-1.34 3-3 3s-3-1.34-3-3 1.34-3 3-3 3 1.34 3 3z"}),"Adjust");e.Z=a},96587:(t,e,i)=>{var s=i(64836);e.Z=void 0;var o=s(i(45649)),r=i(80184),a=(0,o.default)((0,r.jsx)("path",{d:"m19.81 14.99 1.19-.92-1.43-1.43-1.19.92 1.43 1.43zm-.45-4.72L21 9l-9-7-2.91 2.27 7.87 7.88 2.4-1.88zM3.27 1 2 2.27l4.22 4.22L3 9l1.63 1.27L12 16l2.1-1.63 1.43 1.43L12 18.54l-7.37-5.73L3 14.07l9 7 4.95-3.85L20.73 21 22 19.73 3.27 1z"}),"LayersClear");e.Z=a},66647:(t,e,i)=>{i.d(e,{Z:()=>w});var s=i(87462),o=i(63366),r=i(72791),a=i(28182),n=i(94419),l=i(31402),c=i(66934),h=i(75878),d=i(21217);function p(t){return(0,d.Z)("MuiCardActionArea",t)}var u=(0,h.Z)("MuiCardActionArea",["root","focusVisible","focusHighlight"]),g=i(50533),m=i(80184);const f=["children","className","focusVisibleClassName"],v=(0,c.ZP)(g.Z,{name:"MuiCardActionArea",slot:"Root",overridesResolver:(t,e)=>e.root})((t=>{let{theme:e}=t;return{display:"block",textAlign:"inherit",width:"100%",["&:hover .".concat(u.focusHighlight)]:{opacity:(e.vars||e).palette.action.hoverOpacity,"@media (hover: none)":{opacity:0}},["&.".concat(u.focusVisible," .").concat(u.focusHighlight)]:{opacity:(e.vars||e).palette.action.focusOpacity}}})),b=(0,c.ZP)("span",{name:"MuiCardActionArea",slot:"FocusHighlight",overridesResolver:(t,e)=>e.focusHighlight})((t=>{let{theme:e}=t;return{overflow:"hidden",pointerEvents:"none",position:"absolute",top:0,right:0,bottom:0,left:0,borderRadius:"inherit",opacity:0,backgroundColor:"currentcolor",transition:e.transitions.create("opacity",{duration:e.transitions.duration.short})}}));var w=r.forwardRef((function(t,e){const i=(0,l.Z)({props:t,name:"MuiCardActionArea"}),{children:r,className:c,focusVisibleClassName:h}=i,d=(0,o.Z)(i,f),u=i,g=(t=>{const{classes:e}=t;return(0,n.Z)({root:["root"],focusHighlight:["focusHighlight"]},p,e)})(u);return(0,m.jsxs)(v,(0,s.Z)({className:(0,a.default)(g.root,c),focusVisibleClassName:(0,a.default)(h,g.focusVisible),ref:e,ownerState:u},d,{children:[r,(0,m.jsx)(b,{className:g.focusHighlight,ownerState:u})]}))}))},9585:(t,e,i)=>{i.d(e,{Z:()=>x});var s=i(63366),o=i(87462),r=i(72791),a=i(28182),n=i(94419),l=i(20890),c=i(31402),h=i(66934),d=i(75878),p=i(21217);function u(t){return(0,p.Z)("MuiCardHeader",t)}var g=(0,d.Z)("MuiCardHeader",["root","avatar","action","content","title","subheader"]),m=i(80184);const f=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],v=(0,h.ZP)("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(t,e)=>(0,o.Z)({["& .".concat(g.title)]:e.title,["& .".concat(g.subheader)]:e.subheader},e.root)})({display:"flex",alignItems:"center",padding:16}),b=(0,h.ZP)("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(t,e)=>e.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),w=(0,h.ZP)("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(t,e)=>e.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),Z=(0,h.ZP)("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(t,e)=>e.content})({flex:"1 1 auto"});var x=r.forwardRef((function(t,e){const i=(0,c.Z)({props:t,name:"MuiCardHeader"}),{action:r,avatar:h,className:d,component:p="div",disableTypography:g=!1,subheader:x,subheaderTypographyProps:y,title:j,titleTypographyProps:S}=i,C=(0,s.Z)(i,f),k=(0,o.Z)({},i,{component:p,disableTypography:g}),P=(t=>{const{classes:e}=t;return(0,n.Z)({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},u,e)})(k);let B=j;null==B||B.type===l.Z||g||(B=(0,m.jsx)(l.Z,(0,o.Z)({variant:h?"body2":"h5",className:P.title,component:"span",display:"block"},S,{children:B})));let M=x;return null==M||M.type===l.Z||g||(M=(0,m.jsx)(l.Z,(0,o.Z)({variant:h?"body2":"body1",className:P.subheader,color:"text.secondary",component:"span",display:"block"},y,{children:M}))),(0,m.jsxs)(v,(0,o.Z)({className:(0,a.default)(P.root,d),as:p,ref:e,ownerState:k},C,{children:[h&&(0,m.jsx)(b,{className:P.avatar,ownerState:k,children:h}),(0,m.jsxs)(Z,{className:P.content,ownerState:k,children:[B,M]}),r&&(0,m.jsx)(w,{className:P.action,ownerState:k,children:r})]}))}))},57621:(t,e,i)=>{i.d(e,{Z:()=>v});var s=i(87462),o=i(63366),r=i(72791),a=i(28182),n=i(94419),l=i(66934),c=i(31402),h=i(35527),d=i(75878),p=i(21217);function u(t){return(0,p.Z)("MuiCard",t)}(0,d.Z)("MuiCard",["root"]);var g=i(80184);const m=["className","raised"],f=(0,l.ZP)(h.Z,{name:"MuiCard",slot:"Root",overridesResolver:(t,e)=>e.root})((()=>({overflow:"hidden"})));var v=r.forwardRef((function(t,e){const i=(0,c.Z)({props:t,name:"MuiCard"}),{className:r,raised:l=!1}=i,h=(0,o.Z)(i,m),d=(0,s.Z)({},i,{raised:l}),p=(t=>{const{classes:e}=t;return(0,n.Z)({root:["root"]},u,e)})(d);return(0,g.jsx)(f,(0,s.Z)({className:(0,a.default)(p.root,r),elevation:l?8:void 0,ref:e,ownerState:d},h))}))}}]);
//# sourceMappingURL=2105.b78a26fd.chunk.js.map