"use strict";(self.webpackChunkhajk_client=self.webpackChunkhajk_client||[]).push([[6430],{16430:(t,e,s)=>{s.r(e);var o=s(72791),i=s(20890),a=s(48550),r=s(30948),n=s(42708),l=s(98246),d=s(61889),h=s(80184);class c extends o.PureComponent{constructor(t){super(t),this.state={errorX:"",errorY:"",coordinateX:"",coordinateY:"",coordinateXFloat:0,coordinateYFloat:0,wasLastChanged:!1,wasModified:!1},this.model=this.props.model,this.transformation=this.props.transformation,this.localObserver=this.props.model.localObserver,this.localObserver.subscribe("newCoordinates",(t=>{if(t.proj!==this.transformation.code||t.force){const e=(0,n.vs)(t.coordinates,t.proj,this.props.transformation.code);this.setState({errorX:"",errorY:"",wasModified:!0,coordinateX:e[0].toFixed(this.transformation.precision),coordinateY:e[1].toFixed(this.transformation.precision),coordinateXFloat:e[0],coordinateYFloat:e[1],wasLastChanged:!1})}else this.setState({wasLastChanged:!0,wasModified:!0})})),this.localObserver.subscribe("resetCoordinates",(()=>{this.setState({errorX:"",errorY:"",coordinateX:"",coordinateY:"",coordinateXFloat:0,coordinateYFloat:0})}))}handleInputX(t){if(!(!this.props.inverseAxis&&t.value===this.state.coordinateX||this.props.inverseAxis&&t.value===this.state.coordinateY))if(this.props.inverseAxis?this.setState({coordinateY:t.value,coordinateYFloat:t.floatValue,wasModified:!0}):this.setState({coordinateX:t.value,coordinateXFloat:t.floatValue,wasModified:!0}),isNaN(t.floatValue)||!isFinite(t.floatValue))this.setState({errorX:"Ange ett decimaltal"});else{this.setState({errorX:""});const e=t.floatValue;this.props.inverseAxis?this.localObserver.publish("newCoordinates",{coordinates:[this.state.coordinateXFloat,e],proj:this.props.transformation.code,force:!1}):this.localObserver.publish("newCoordinates",{coordinates:[e,this.state.coordinateYFloat],proj:this.props.transformation.code,force:!1})}}handleInputY(t){if(!(!this.props.inverseAxis&&t.value===this.state.coordinateY||this.props.inverseAxis&&t.value===this.state.coordinateX))if(this.props.inverseAxis?this.setState({coordinateX:t.value,coordinateXFloat:t.floatValue,wasModified:!0}):this.setState({coordinateY:t.value,coordinateYFloat:t.floatValue,wasModified:!0}),isNaN(t.floatValue)||!isFinite(t.floatValue))this.setState({errorY:"Ange ett decimaltal"});else{this.setState({errorY:""});const e=t.floatValue;this.props.inverseAxis?this.localObserver.publish("newCoordinates",{coordinates:[e,this.state.coordinateYFloat],proj:this.props.transformation.code,force:!1}):this.localObserver.publish("newCoordinates",{coordinates:[this.state.coordinateXFloat,e],proj:this.props.transformation.code,force:!1})}}componentWillUnmount(){}render(){let t=this.props.inverseAxis?this.state.coordinateY:this.state.coordinateX,e=this.props.inverseAxis?this.state.coordinateX:this.state.coordinateY;return this.model.showFieldsOnStart||this.state.wasModified?(0,h.jsxs)(d.ZP,{container:!0,item:!0,spacing:2,rowSpacing:1,children:[(0,h.jsx)(d.ZP,{item:!0,xs:12,children:(0,h.jsx)(i.Z,{variant:"body2",style:{fontWeight:600},children:this.transformation?this.transformation.title+" ("+this.transformation.code+")":""})}),(0,h.jsx)(d.ZP,{item:!0,xs:12,md:6,children:(0,h.jsx)(r.Z,{label:this.props.transformation.xtitle,margin:"dense",variant:"outlined",size:"small",value:t,name:"numberformatX",type:"text",onValueChange:t=>{this.handleInputX(t)},axis:this.props.transformation.inverseAxis?"X":"Y",error:""!==this.state.errorX,helperText:this.state.errorX,thousandSeparator:!!this.model.thousandSeparator&&" ",customInput:a.Z,fullWidth:!0})}),(0,h.jsx)(d.ZP,{item:!0,xs:12,md:6,children:(0,h.jsx)(r.Z,{label:this.props.transformation.ytitle,margin:"dense",size:"small",variant:"outlined",value:e,name:"numberformatY",type:"text",onValueChange:t=>{this.handleInputY(t)},axis:this.props.transformation.inverseAxis?"Y":"X",error:""!==this.state.errorY,helperText:this.state.errorY,thousandSeparator:!!this.model.thousandSeparator&&" ",customInput:a.Z,fullWidth:!0})})]}):(0,h.jsx)(h.Fragment,{})}}e.default=(0,l.RM)(c)}}]);
//# sourceMappingURL=6430.41c7af84.chunk.js.map