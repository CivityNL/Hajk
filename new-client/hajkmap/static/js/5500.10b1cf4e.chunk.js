"use strict";(self.webpackChunkhajk_client=self.webpackChunkhajk_client||[]).push([[5500],{5500:(e,t,a)=>{a.r(t);var r=a(72791),i=a(66934),s=a(61889),n=a(4110),l=a(48550),o=a(94454),u=a(84795),d=a(17133),h=a(68096),m=a(79012),c=a(85523),F=a(47071),p=a(24518),f=a(81918),v=a(80184);const g=(0,i.ZP)(s.ZP)((e=>{let{theme:t}=e;return{textAlign:"center",padding:t.spacing(1)}}));class x extends r.Component{constructor(e){var t,a,r,i;super(e),this.initFormValues=e=>{const{editSource:t}=this.props;if(!e||!t)return;const a=e.getProperties();let r={};return t.editableFields.forEach((e=>{if(null!==a[e.name])if("flerval"===e.textType&&""!==a[e.name])r[e.name]=e.values.map((t=>({name:t,checked:"string"===typeof a[e.name]&&void 0!==a[e.name].split(";").find((e=>e===t))})));else if("boolean"===e.textType)"boolean"===e.dataType?r[e.name]=a[e.name]||"ja"===e.defaultValue||!1:r[e.name]=a[e.name]||1===e.defaultValue||0;else{var t;"true"===(null===(t=a[e.name])||void 0===t?void 0:t["xsi:nil"])?r[e.name]="":r[e.name]=a[e.name]||e.defaultValue||""}})),r},this.state={formValues:void 0,feature:void 0},this.formErrors={},e.observer.subscribe("feature-to-update-view",(e=>{this.setState({formValues:this.initFormValues(e),feature:e})})),null===(t=e.editSource)||void 0===t||null===(a=t.editableFields)||void 0===a||a.forEach(((e,t)=>{e.initialRender=!0})),null===(r=e.editSource)||void 0===r||null===(i=r.nonEditableFields)||void 0===i||i.forEach(((e,t)=>{e.initialRender=!0}))}componentWillUnmount(){this.props.observer.unsubscribe("feature-to-update-view")}updateFeature(){var e,t;const a=this.props.model.editFeature.getProperties();Object.keys(this.state.formValues).forEach((e=>{let t=this.state.formValues[e];""===t&&(t=null),Array.isArray(t)&&(t=t.filter((e=>e.checked)).map((e=>e.name)).join(";")),a[e]=t})),null===(e=this.props.editSource)||void 0===e||null===(t=e.nonEditableFields)||void 0===t||t.forEach((e=>{let t=e.defaultValue;""===t&&(t=null),Array.isArray(t)&&(t=t.filter((e=>e.checked)).map((e=>e.name)).join(";"));let r=this.props.model.editFeature.getGeometryName();r||(r="geom"),e.name!==r&&(a[e.name]=t)})),this.props.model.editFeature.setProperties(a)}checkInteger(e,t){let a=Object.assign({},this.state.formValues);/^\d+$/.test(t)||""===t?a[e]=t:this.state.formValues[e]||(a[e]=""),this.setState({formValues:a},(()=>{this.updateFeature()}))}checkBoolean(e,t){let a=Object.assign({},this.state.formValues);"ja"===t?t=!0:"nej"===t&&(t=!1),a[e]=t,this.setState({formValues:a},(()=>{this.updateFeature()}))}checkNumber(e,t){let a=Object.assign({},this.state.formValues);/^\d+([.,](\d+)?)?$/.test(t)||""===t?(t=t.replace(",","."),a[e]=t):this.state.formValues[e]||(a[e]=""),this.setState({formValues:a},(()=>{this.updateFeature()}))}checkUrl(e,t){let a=/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!$&'()*+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!$&'()*+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!$&'()*+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!$&'()*+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!$&'()*+,;=]|:|@)|\/|\?)*)?$/i.test(t),r=Object.assign({},this.state.formValues);a||""===t?(r[e]=t,delete this.formErrors[e]):(r[e]="",this.formErrors[e]="Ange en giltig url. t.ex. https://www.example.com"),this.setState({formValues:r},(()=>{this.updateFeature()}))}checkText(e,t){let a=Object.assign({},this.state.formValues);a[e]=t,this.setState({formValues:a},(()=>{this.updateFeature()}))}checkSelect(e,t){let a=Object.assign({},this.state.formValues);a[e]=t,this.setState({formValues:a},(()=>{this.updateFeature()}))}checkMultiple(e,t,a,r){let i=Object.assign({},this.state.formValues);i[e][r].checked=t,this.setState({formValues:i},(()=>{this.updateFeature()}))}checkDate(e,t){let a=Object.assign({},this.state.formValues);a[e]=t,this.updateFeature(),this.setState({formValues:a},(()=>{this.updateFeature()}))}setChanged(){"added"!==this.props.model.editFeature.modification&&"removed"!==this.props.model.editFeature.modification&&(this.props.model.editFeature.modification="updated")}getValueMarkup(e,t){var a,r,i,s,p,f;"undefined"!==typeof e.alias&&""!==e.alias||(e.alias=e.name),e.textType&&""!==e.textType||("int"!==e.dataType&&"integer"!==e.dataType||(e.textType="heltal"),"number"!==e.dataType&&"decimal"!==e.dataType||(e.textType="nummer"),"date"===e.dataType&&(e.textType="datum"),"date-time"!==e.dataType&&"dateTime"!==e.dataType||(e.textType="date-time"),"boolean"===e.dataType&&(e.textType="boolean"));let g=this.state.formValues[e.name];switch(void 0!==g&&null!==g||(g=""),""===g&&e.initialRender&&null!==e.defaultValue&&(g=e.defaultValue),e.textType){case"heltal":return(0,v.jsx)(l.Z,{id:e.id,label:e.alias,fullWidth:!0,margin:"normal",variant:"outlined",disabled:!t,value:g,error:this.formErrors.hasOwnProperty(e.name),helperText:(null===(a=this.formErrors[e.name])||void 0===a?void 0:a.length)>=0?this.formErrors[e.name]:e.description,onChange:t=>{this.setChanged(),this.checkInteger(e.name,t.target.value),e.initialRender=!1}});case"nummer":return(0,v.jsx)(l.Z,{id:e.id,label:e.alias,fullWidth:!0,margin:"normal",variant:"outlined",disabled:!t,value:g,error:this.formErrors.hasOwnProperty(e.name),helperText:(null===(r=this.formErrors[e.name])||void 0===r?void 0:r.length)>=0?this.formErrors[e.name]:e.description,onChange:t=>{this.setChanged(),this.checkNumber(e.name,t.target.value),e.initialRender=!1}});case"datum":return(0,v.jsx)(l.Z,{id:e.id,label:e.alias,fullWidth:!0,margin:"normal",type:"date",variant:"outlined",disabled:!t,value:g,error:this.formErrors.hasOwnProperty(e.name),helperText:(null===(i=this.formErrors[e.name])||void 0===i?void 0:i.length)>=0?this.formErrors[e.name]:e.description,onChange:t=>{this.setChanged(),this.checkDate(e.name,t.target.value),e.initialRender=!1},InputLabelProps:{shrink:!0}});case"date-time":return(0,v.jsx)(l.Z,{id:e.id,label:e.name,fullWidth:!0,margin:"normal",type:"datetime-local",variant:"outlined",disabled:!t,value:g,error:this.formErrors.hasOwnProperty(e.name),helperText:(null===(s=this.formErrors[e.name])||void 0===s?void 0:s.length)>=0?this.formErrors[e.name]:e.description,onChange:t=>{this.setChanged(),this.checkDate(e.name,t.target.value),e.initialRender=!1},InputLabelProps:{shrink:!0}});case"url":return(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(l.Z,{id:e.id,label:e.alias,size:"small",fullWidth:!0,margin:"normal",variant:"outlined",disabled:!t,error:this.formErrors.hasOwnProperty(e.name),helperText:(null===(p=this.formErrors[e.name])||void 0===p?void 0:p.length)>=0?this.formErrors[e.name]:e.description,value:g,onChange:t=>{this.setChanged(),this.checkText(e.name,t.target.value),e.initialRender=!1},onBlur:t=>{this.setChanged(),"url"===e.textType&&this.checkUrl(e.name,t.target.value),e.initialRender=!1}})});case"fritext":return(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(l.Z,{id:e.id,label:e.alias,size:"small",fullWidth:!0,margin:"normal",variant:"outlined",disabled:!t,multiline:!0,error:this.formErrors.hasOwnProperty(e.name),helperText:(null===(f=this.formErrors[e.name])||void 0===f?void 0:f.length)>=0?this.formErrors[e.name]:e.description,value:g,onChange:t=>{this.setChanged(),this.checkText(e.name,t.target.value),e.initialRender=!1},onBlur:t=>{this.setChanged(),"url"===e.textType&&this.checkUrl(e.name,t.target.value),e.initialRender=!1}})});case"flerval":let x=[];"string"===typeof e.defaultValue&&(x=e.defaultValue.split(",")),e.initialRender&&x.forEach((e=>{g.forEach((t=>{e===t.name&&(t.checked=!0)}))}));let b=e.values.map(((a,r)=>{let i=e.name+r,s=g.find((e=>e.name===a))||{checked:!1};return(0,v.jsx)(c.Z,{control:(0,v.jsx)(o.Z,{checked:s.checked,disabled:!t,color:"primary",onChange:t=>{this.setChanged(),this.checkMultiple(e.name,t.target.checked,a,r),e.initialRender=!1}}),label:a},i)}));return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(h.Z,{fullWidth:!0,margin:"normal",component:"fieldset",children:[(0,v.jsx)(d.Z,{component:"legend",children:e.alias}),(0,v.jsx)(m.Z,{children:b}),(0,v.jsx)(F.Z,{style:{marginTop:"0px",marginBottom:"10px"}})]}),(0,v.jsx)("br",{})]});case"lista":let j=null;return Array.isArray(e.values)&&(j=e.values.map(((e,t)=>(0,v.jsx)("option",{value:e,children:e},t)))),(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)(h.Z,{fullWidth:!0,component:"fieldset",children:[(0,v.jsx)(d.Z,{component:"legend",children:e.alias}),(0,v.jsxs)(u.Z,{value:g,variant:"outlined",disabled:!t,input:(0,v.jsx)(n.Z,{name:e.name,id:e.name}),onChange:t=>{this.setChanged(),this.checkSelect(e.name,t.target.value),e.initialRender=!1},children:[(0,v.jsx)("option",{value:"",children:"-V\xe4lj v\xe4rde-"}),j]}),(0,v.jsx)(F.Z,{children:e.description})]})});case"boolean":return(0,v.jsx)(c.Z,{control:(0,v.jsx)(o.Z,{checked:"boolean"===e.dataType&&"ja"===e.value||"int"===e.dataType&&1===e.value,color:"primary",disabled:!t,onChange:t=>{this.setChanged(),t.target.checked?"boolean"===e.dataType?e.value="ja":e.value=1:"boolean"===e.dataType?e.value="nej":e.value=0,e.initialRender=!1,this.checkBoolean(e.name,e.value),this.forceUpdate()}}),label:e.name});default:return(0,v.jsx)("span",{children:g})}}render(){var e,t,a,r;const{formValues:i}=this.state,{model:n}=this.props;if(!i||void 0===this.props.editSource)return null;const l=null===(e=this.props.editSource)||void 0===e||null===(t=e.editableFields)||void 0===t?void 0:t.map(((e,t)=>{const a=this.getValueMarkup(e,!0);return(0,v.jsx)(s.ZP,{item:!0,xs:12,ref:e.name,children:a},t)})),o=null===(a=this.props.editSource)||void 0===a||null===(r=a.nonEditableFields)||void 0===r?void 0:r.filter((e=>!1===e.hidden)).map(((e,t)=>{const a=this.getValueMarkup(e,!1);return(0,v.jsx)(s.ZP,{item:!0,xs:12,ref:e.name,children:a},t)}));return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(g,{item:!0,xs:12,children:(0,v.jsx)(f.Z,{variant:"outlined",color:"primary",label:"Voer het attribuut van het object in:"})}),(0,v.jsxs)(g,{item:!0,xs:12,children:[(0,v.jsx)("p",{children:"Bewerkbare velden:"}),l,(null===o||void 0===o?void 0:o.length)>2?"Niet-bewerkbare velden:":"",o]}),(0,v.jsx)(g,{item:!0,xs:12,children:(0,v.jsx)(p.Z,{color:"primary",sx:{width:"100px"},variant:"contained",onClick:n.resetEditFeature,children:"OK"})})]})}}t.default=x},84795:(e,t,a)=>{var r=a(87462),i=a(63366),s=a(72791),n=a(28182),l=a(94419),o=a(29916),u=a(76147),d=a(52930),h=a(89059),m=a(4110),c=a(31402),F=a(41797),p=a(80184);const f=["className","children","classes","IconComponent","input","inputProps","variant"],v=["root"],g=(0,p.jsx)(m.Z,{}),x=s.forwardRef((function(e,t){const a=(0,c.Z)({name:"MuiNativeSelect",props:e}),{className:m,children:x,classes:b={},IconComponent:j=h.Z,input:y=g,inputProps:E}=a,k=(0,i.Z)(a,f),C=(0,d.Z)(),D=(0,u.Z)({props:a,muiFormControl:C,states:["variant"]}),V=(e=>{const{classes:t}=e;return(0,l.Z)({root:["root"]},F.f,t)})((0,r.Z)({},a,{classes:b})),Z=(0,i.Z)(b,v);return(0,p.jsx)(s.Fragment,{children:s.cloneElement(y,(0,r.Z)({inputComponent:o.ZP,inputProps:(0,r.Z)({children:x,classes:Z,IconComponent:j,variant:D.variant,type:void 0},E,y?y.props.inputProps:{}),ref:t},k,{className:(0,n.default)(V.root,y.props.className,m)}))})}));x.muiName="Select",t.Z=x}}]);
//# sourceMappingURL=5500.10b1cf4e.chunk.js.map