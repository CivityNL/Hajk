"use strict";(self.webpackChunkhajk_client=self.webpackChunkhajk_client||[]).push([[3530,8619,3151,2670,9565,2201],{28619:(t,e,i)=>{i.r(e);var s=i(72791),o=i(66934),n=i(57621),r=i(93044),a=i(66647),l=i(9585),h=i(80184);const c=(0,o.ZP)(n.Z)((t=>{let{theme:e}=t;return{marginBottom:e.spacing(1),width:"210px",[e.breakpoints.down("sm")]:{boxShadow:"none",borderBottom:"1px solid #ccc",borderRadius:0,margin:0,width:"100%",justifyContent:"left"}}})),d=(0,o.ZP)(r.Z)((t=>{let{theme:e}=t;return{background:e.palette.text.primary}}));class p extends s.PureComponent{constructor(){super(...arguments),this.state={open:!1,text:""}}render(){const{abstract:t,icon:e,onClick:i,title:s}=this.props;return(0,h.jsx)(c,{onClick:i,children:(0,h.jsx)(a.Z,{children:(0,h.jsx)(l.Z,{avatar:(0,h.jsx)(d,{children:e}),title:s,subheader:t})})})}}p.defaultProps={abstract:"Beskrivning saknas",title:"Titel saknas"},e.default=p},73151:(t,e,i)=>{i.r(e);var s=i(72791),o=i(85286),n=i(54164),r=i(19538),a=i(45484),l=i(57064),h=i(49900),c=i(26191),d=i(28619),p=i(74599),u=i(80184);class m extends s.PureComponent{constructor(t){var e;super(t),e=this,this.handleButtonClick=t=>{this.showWindow({hideOtherPluginWindows:!0,runCallback:!0}),this.props.app.globalObserver.publish("core.onlyHideDrawerIfNeeded")},this.showWindow=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const i=t.hideOtherPluginWindows||!0,s=t.runCallback||!0;if(e.props.app.activeTool=e.type,e.props.app.globalObserver.publish("analytics.trackEvent",{eventName:"pluginShown",pluginName:e.type,activeMap:e.props.app.config.activeMap}),e.props.app.pushPluginIntoHistory({type:e.type,icon:e.props.custom.icon,title:e.title,description:e.description}),!0===e.state.windowVisible)return null;!0===i&&e.props.app.onWindowOpen(e),e.setState({windowVisible:!0},(()=>{e.props.app.globalObserver.publish("core.pluginVisibilityChanged"),!0===s&&"function"===typeof e.props.custom.onWindowShow&&e.props.custom.onWindowShow()}))},this.closeWindow=()=>{this.type===this.props.app.activeTool&&(this.props.app.activeTool=void 0),this.setState({windowVisible:!1},(()=>{this.props.app.globalObserver.publish("core.pluginVisibilityChanged"),"function"===typeof this.props.custom.onWindowHide&&this.props.custom.onWindowHide()}))},this.type=t.type.toLowerCase()||void 0,this.description=t.options.description||t.custom.description;const i=!1===this.props.app.config.mapConfig.map.clean&&(o.isMobile?t.options.visibleAtStartMobile:t.options.visibleAtStart)||!1;i&&this.props.app.globalObserver.publish("analytics.trackEvent",{eventName:"pluginShown",pluginName:this.type,activeMap:this.props.app.config.activeMap}),this.state={title:t.options.title||t.custom.title||"Unnamed plugin",color:t.options.color||t.custom.color||null,windowVisible:i},this.title=t.options.title||t.custom.title||"Unnamed plugin",this.width=t.options.width||t.custom.width||400,this.height=t.options.height||t.custom.height||"auto",this.position=t.options.position||t.custom.position||"left",t.app.registerWindowPlugin(this);const s="".concat(this.type,".showWindow");t.app.globalObserver.subscribe(s,(t=>{this.showWindow(t)}));const n="".concat(this.type,".closeWindow");t.app.globalObserver.subscribe(n,(()=>{this.closeWindow()}))}componentDidUpdate(t){t.custom.title!==this.props.custom.title&&this.setState({title:this.props.custom.title}),t.custom.color!==this.props.custom.color&&this.setState({color:this.props.custom.color})}pluginIsWidget(t){return["left","right"].includes(t)}renderWindow(t){const{target:e}=this.props.options;return"function"===typeof(null===t||void 0===t?void 0:t.render)?t.render():(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(c.default,{globalObserver:this.props.app.globalObserver,title:this.state.title,color:this.state.color,onClose:this.closeWindow,open:this.state.windowVisible,onResize:this.props.custom.onResize,onMaximize:this.props.custom.onMaximize,onMinimize:this.props.custom.onMinimize,draggingEnabled:this.props.custom.draggingEnabled,customPanelHeaderButtons:this.props.custom.customPanelHeaderButtons,resizingEnabled:this.props.custom.resizingEnabled,scrollable:this.props.custom.scrollable,allowMaximizedWindow:this.props.custom.allowMaximizedWindow,disablePadding:this.props.custom.disablePadding,width:this.width,height:this.height,position:this.position,mode:"window",layerswitcherConfig:this.props.app.config.mapConfig.tools.find((t=>"layerswitcher"===t.type)),children:s.cloneElement(this.props.children,{windowVisible:this.state.windowVisible})}),"hidden"!==e&&this.renderDrawerButton(),this.pluginIsWidget(e)&&this.renderWidgetButton("".concat(e,"-column")),"control"===e&&this.renderControlButton()]})}renderDrawerButton(){return(0,n.createPortal)((0,u.jsx)(r.Z,{mdUp:this.pluginIsWidget(this.props.options.target)||"control"===this.props.options.target,children:(0,u.jsxs)(a.ZP,{button:!0,divider:!0,selected:this.state.windowVisible,onClick:this.handleButtonClick,children:[(0,u.jsx)(l.Z,{children:this.props.custom.icon}),(0,u.jsx)(h.Z,{primary:this.title})]})}),document.getElementById("plugin-buttons"))}renderWidgetButton(t){return(0,n.createPortal)((0,u.jsx)(r.Z,{mdDown:!0,children:(0,u.jsx)(d.default,{icon:this.props.custom.icon,onClick:this.handleButtonClick,title:this.title,abstract:this.description})}),document.getElementById(t))}renderControlButton(){return(0,n.createPortal)((0,u.jsx)(r.Z,{mdDown:!0,children:(0,u.jsx)(p.default,{icon:this.props.custom.icon,onClick:this.handleButtonClick,title:this.title,abstract:this.description})}),document.getElementById("plugin-control-buttons"))}render(){return!0!==this.props.app.config.mapConfig.map.clean&&this.renderWindow(this.props.custom)}}e.default=m},43530:(t,e,i)=>{i.r(e),i.d(e,{default:()=>u});var s=i(72791),o=i(73151),n=i(99259),r=i(22201),a=i(69565),l=i(85194),h=i.n(l),c=i(80184);function d(t){return(0,c.jsx)(n.Z,{...t,width:"20pt",height:"20pt",viewBox:"0 0 1000 1000",children:(0,c.jsx)("path",{d:"M732.1,10L500.9,241.3l84.9,84.9l-34,34l-84.9-84.9l-91,91l84.9,84.9l-34,34l-84.9-84.9l-99.3,99.3l84.9,84.9l-34,34l-84.9-84.9L10,732.1L267.9,990L990,267.9L732.1,10z M230.8,819.7c-13.9,13.9-36.5,13.9-50.4,0c-13.9-13.9-13.9-36.5,0-50.4c13.9-13.9,36.5-13.9,50.4,0C244.7,783.2,244.7,805.8,230.8,819.7z"})})}class p extends s.PureComponent{constructor(t){super(t),this.onWindowShow=()=>{this.model.setActive(!0)},this.onWindowHide=()=>{this.model.setActive(!1)},this.localObserver=h()(),this.model=new a.default({map:t.map,app:t.app,localObserver:this.localObserver})}render(){return(0,c.jsx)(o.default,{...this.props,type:"Measure",custom:{icon:(0,c.jsx)(d,{}),title:"M\xe4t",description:"M\xe4t l\xe4ngder och ytor",height:"dynamic",width:300,top:void 0,left:void 0,onWindowShow:this.onWindowShow,onWindowHide:this.onWindowHide},children:(0,c.jsx)(r.default,{model:this.model,app:this.props.app,localObserver:this.localObserver})})}}var u=p},69565:(t,e,i)=>{i.r(e);var s=i(64665),o=i(90927),n=i(66233),r=i(5400),a=i(69236),l=i(5426),h=i(9501),c=i(35844),d=i(56957),p=i(88490),u=i(56134),m=i(42670);e.default=class{constructor(t){this.createStyle=(t,e)=>{const i="rgba(255, 255, 255, 0.3)",l="rgba(0, 0, 0, 0.5)";return[new s.ZP({fill:new o.Z({color:i}),stroke:new n.Z({color:l,width:3}),image:new r.Z({radius:5,stroke:new n.Z({color:l}),fill:new o.Z({color:i})}),text:new a.Z({textAlign:"center",textBaseline:"middle",font:"12pt sans-serif",fill:new o.Z({color:"#FFF"}),text:this.getLabelText(t),overflow:!0,stroke:new n.Z({color:l,width:3}),offsetX:0,offsetY:-10,rotation:0,scale:1})})]},this.clear=()=>{this.source.clear(),this.measureTooltip.setPosition(void 0)},this.handleDrawStart=t=>{t.feature.getGeometry().on("change",(t=>{var e,i="",s=void 0;this.active&&(this.pointerPosition&&(e=this.pointerPosition.coordinate),t.target instanceof c.Z&&(i=this.formatLabel("length",t.target.getLength()),s=t.target.getLastCoordinate()),t.target instanceof d.ZP&&(i=this.formatLabel("area",t.target.getArea()),s=e||t.target.getFirstCoordinate()),t.target instanceof p.Z&&(i=this.formatLabel("circle",t.target.getRadius()),s=e||t.target.getFirstCoordinate()),this.measureTooltipElement.innerHTML=i,this.measureTooltip.setPosition(s))}))},this.handleDrawEnd=t=>{this.setFeaturePropertiesFromGeometry(t.feature),this.measureTooltip.setPosition(void 0)},this.eventHandler=t=>{"Escape"===t.key&&this.draw.finishDrawing()},this.map=t.map,this.app=t.app,this.localObserver=t.localObserver,this.source=new l.Z,this.vector=new h.Z({layerType:"system",zIndex:5e3,name:"pluginMeasure",caption:"Measure layer",source:this.source,style:this.createStyle}),this.map.addLayer(this.vector),this.type="LineString",this.createMeasureTooltip()}setType(t){this.type=t,this.removeInteraction(),this.addInteraction()}getType(){return this.type}setFeaturePropertiesFromGeometry(t){if(t){var e,i,s=0,o=0,n=0,r={n:0,e:0};switch(i=(e=t.getGeometry()).getType()){case"Point":r={n:Math.round(e.getCoordinates()[1]),e:Math.round(e.getCoordinates()[0])};break;case"LineString":s=e.getLength()<1e3?Math.round(10*e.getLength())/10:Math.round(e.getLength());break;case"Polygon":n=Math.round(e.getArea());break;case"Circle":o=Math.round(e.getRadius())}t.setProperties({type:i,length:s,area:n,radius:o,position:r})}}formatLabel(t,e){let i;if("point"===t&&(i="Nord: "+e.n+" \xd6st: "+e.e),"number"===typeof e&&(e="length"===t&&e<1e3?Math.round(10*e)/10:Math.round(e)),"circle"===t){let t=" m",s=" m\xb2";e>=1e3&&(t=" km",e/=1e3),i="R = "+Number(e).toLocaleString()+t+" \nA = "+(Math.round(e*e*Math.PI*1e3)/1e3).toLocaleString()+s}if("area"===t&&(i=e>1e5?Number(Math.round(e/1e6*100)/100).toLocaleString()+" km\xb2":Number(Math.round(100*e)/100).toLocaleString()+" m\xb2"),"length"===t){let t=" m";e>=1e3&&(t=" km",e/=1e3),i=Number(e).toLocaleString()+t}return i}createMeasureTooltip(){this.measureTooltipElement&&this.measureTooltipElement.parentNode.removeChild(this.measureTooltipElement),this.measureTooltipElement=document.createElement("div"),this.measureTooltipElement.className="tooltip-draw tooltip-measure",this.measureTooltip=new m.Z({element:this.measureTooltipElement,offset:[0,-15],positioning:"bottom-center"}),this.map.addOverlay(this.measureTooltip)}getLabelText(t){const e=t.getProperties();switch(t.getProperties().type){case"Point":return this.formatLabel("point",e.position);case"LineString":return this.formatLabel("length",e.length);case"Circle":return this.formatLabel("circle",e.radius);case"Polygon":return this.formatLabel("area",e.area);default:return""}}addInteraction(){this.draw=new u.ZP({source:this.source,type:this.type,style:new s.ZP({fill:new o.Z({color:"rgba(255, 255, 255, 0.2)"}),stroke:new n.Z({color:"rgba(0, 0, 0, 0.5)",lineDash:[10,10],width:2}),image:new r.Z({radius:5,stroke:new n.Z({color:"rgba(0, 0, 0, 0.7)"}),fill:new o.Z({color:"rgba(255, 255, 255, 0.2)"})})})}),this.draw.on("drawstart",this.handleDrawStart),this.draw.on("drawend",this.handleDrawEnd),this.map.addInteraction(this.draw),this.map.snapHelper.add("measure")}removeInteraction(){this.measureTooltip.setPosition(void 0),this.map.snapHelper.delete("measure"),this.map.removeInteraction(this.draw)}setActive(t){t&&!this.active&&(document.addEventListener("keydown",this.eventHandler),this.addInteraction(),this.map.clickLock.add("measure")),!1===t&&(document.removeEventListener("keydown",this.eventHandler),this.removeInteraction(),this.map.clickLock.delete("measure")),this.active=t}getMap(){return this.map}}},22201:(t,e,i)=>{i.r(e);var s=i(72791),o=i(66934),n=i(24518),r=i(84795),a=i(68096),l=i(61889),h=i(4110),c=i(30829),d=i(98246),p=i(20890),u=i(80184);const m=(0,o.ZP)(n.Z)((t=>{let{theme:e}=t;return{marginTop:e.spacing(1)}}));class g extends s.PureComponent{constructor(t){super(t),this.handleChange=t=>e=>{this.setState({[t]:e.target.value}),this.model.setType(e.target.value)},this.model=t.model,this.app=t.app,this.localObserver=t.localObserver,this.state={shape:this.model.getType()}}render(){return(0,u.jsxs)(l.ZP,{container:!0,spacing:1,children:[(0,u.jsx)(l.ZP,{item:!0,xs:12,children:(0,u.jsxs)(p.Z,{variant:"body1",children:["Vid ritning av str\xe4ckor och arealer \xe4r det m\xf6jligt att h\xe5lla ner Shift-tangenten. D\xe5 kan man rita str\xe4ckan/arealen p\xe5 fri hand.",(0,u.jsx)("br",{}),(0,u.jsx)("br",{}),"F\xf6r att avsluta en m\xe4tning, klicka igen p\xe5 sista punkten eller tryck p\xe5 Esc-tangenten."]})}),(0,u.jsx)(l.ZP,{item:!0,xs:12,children:(0,u.jsxs)(a.Z,{fullWidth:!0,children:[(0,u.jsx)(c.Z,{variant:"standard",htmlFor:"measure-native-helper",children:"Typ av m\xe4tning"}),(0,u.jsxs)(r.Z,{value:this.state.shape,onChange:this.handleChange("shape"),input:(0,u.jsx)(h.Z,{name:"shape",id:"measure-native-helper"}),children:[(0,u.jsx)("option",{value:"Point",children:"Punkt"}),(0,u.jsx)("option",{value:"LineString",children:"Str\xe4cka"}),(0,u.jsx)("option",{value:"Circle",children:"Cirkel"}),(0,u.jsx)("option",{value:"Polygon",children:"Areal"})]})]})}),(0,u.jsx)(l.ZP,{item:!0,xs:12,children:(0,u.jsx)(m,{variant:"contained",fullWidth:!0,onClick:this.model.clear,children:"Rensa m\xe4tning"})})]})}}e.default=(0,d.RM)(g)},66647:(t,e,i)=>{i.d(e,{Z:()=>w});var s=i(87462),o=i(63366),n=i(72791),r=i(28182),a=i(94419),l=i(31402),h=i(66934),c=i(75878),d=i(21217);function p(t){return(0,d.Z)("MuiCardActionArea",t)}var u=(0,c.Z)("MuiCardActionArea",["root","focusVisible","focusHighlight"]),m=i(50533),g=i(80184);const v=["children","className","focusVisibleClassName"],f=(0,h.ZP)(m.Z,{name:"MuiCardActionArea",slot:"Root",overridesResolver:(t,e)=>e.root})((t=>{let{theme:e}=t;return{display:"block",textAlign:"inherit",width:"100%",["&:hover .".concat(u.focusHighlight)]:{opacity:(e.vars||e).palette.action.hoverOpacity,"@media (hover: none)":{opacity:0}},["&.".concat(u.focusVisible," .").concat(u.focusHighlight)]:{opacity:(e.vars||e).palette.action.focusOpacity}}})),b=(0,h.ZP)("span",{name:"MuiCardActionArea",slot:"FocusHighlight",overridesResolver:(t,e)=>e.focusHighlight})((t=>{let{theme:e}=t;return{overflow:"hidden",pointerEvents:"none",position:"absolute",top:0,right:0,bottom:0,left:0,borderRadius:"inherit",opacity:0,backgroundColor:"currentcolor",transition:e.transitions.create("opacity",{duration:e.transitions.duration.short})}}));var w=n.forwardRef((function(t,e){const i=(0,l.Z)({props:t,name:"MuiCardActionArea"}),{children:n,className:h,focusVisibleClassName:c}=i,d=(0,o.Z)(i,v),u=i,m=(t=>{const{classes:e}=t;return(0,a.Z)({root:["root"],focusHighlight:["focusHighlight"]},p,e)})(u);return(0,g.jsxs)(f,(0,s.Z)({className:(0,r.default)(m.root,h),focusVisibleClassName:(0,r.default)(c,m.focusVisible),ref:e,ownerState:u},d,{children:[n,(0,g.jsx)(b,{className:m.focusHighlight,ownerState:u})]}))}))},9585:(t,e,i)=>{i.d(e,{Z:()=>P});var s=i(63366),o=i(87462),n=i(72791),r=i(28182),a=i(94419),l=i(20890),h=i(31402),c=i(66934),d=i(75878),p=i(21217);function u(t){return(0,p.Z)("MuiCardHeader",t)}var m=(0,d.Z)("MuiCardHeader",["root","avatar","action","content","title","subheader"]),g=i(80184);const v=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],f=(0,c.ZP)("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(t,e)=>(0,o.Z)({["& .".concat(m.title)]:e.title,["& .".concat(m.subheader)]:e.subheader},e.root)})({display:"flex",alignItems:"center",padding:16}),b=(0,c.ZP)("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(t,e)=>e.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),w=(0,c.ZP)("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(t,e)=>e.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),y=(0,c.ZP)("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(t,e)=>e.content})({flex:"1 1 auto"});var P=n.forwardRef((function(t,e){const i=(0,h.Z)({props:t,name:"MuiCardHeader"}),{action:n,avatar:c,className:d,component:p="div",disableTypography:m=!1,subheader:P,subheaderTypographyProps:Z,title:C,titleTypographyProps:x}=i,M=(0,s.Z)(i,v),k=(0,o.Z)({},i,{component:p,disableTypography:m}),j=(t=>{const{classes:e}=t;return(0,a.Z)({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},u,e)})(k);let L=C;null==L||L.type===l.Z||m||(L=(0,g.jsx)(l.Z,(0,o.Z)({variant:c?"body2":"h5",className:j.title,component:"span",display:"block"},x,{children:L})));let E=P;return null==E||E.type===l.Z||m||(E=(0,g.jsx)(l.Z,(0,o.Z)({variant:c?"body2":"body1",className:j.subheader,color:"text.secondary",component:"span",display:"block"},Z,{children:E}))),(0,g.jsxs)(f,(0,o.Z)({className:(0,r.default)(j.root,d),as:p,ref:e,ownerState:k},M,{children:[c&&(0,g.jsx)(b,{className:j.avatar,ownerState:k,children:c}),(0,g.jsxs)(y,{className:j.content,ownerState:k,children:[L,E]}),n&&(0,g.jsx)(w,{className:j.action,ownerState:k,children:n})]}))}))},57621:(t,e,i)=>{i.d(e,{Z:()=>f});var s=i(87462),o=i(63366),n=i(72791),r=i(28182),a=i(94419),l=i(66934),h=i(31402),c=i(35527),d=i(75878),p=i(21217);function u(t){return(0,p.Z)("MuiCard",t)}(0,d.Z)("MuiCard",["root"]);var m=i(80184);const g=["className","raised"],v=(0,l.ZP)(c.Z,{name:"MuiCard",slot:"Root",overridesResolver:(t,e)=>e.root})((()=>({overflow:"hidden"})));var f=n.forwardRef((function(t,e){const i=(0,h.Z)({props:t,name:"MuiCard"}),{className:n,raised:l=!1}=i,c=(0,o.Z)(i,g),d=(0,s.Z)({},i,{raised:l}),p=(t=>{const{classes:e}=t;return(0,a.Z)({root:["root"]},u,e)})(d);return(0,m.jsx)(v,(0,s.Z)({className:(0,r.default)(p.root,n),elevation:l?8:void 0,ref:e,ownerState:d},c))}))},84795:(t,e,i)=>{var s=i(87462),o=i(63366),n=i(72791),r=i(28182),a=i(94419),l=i(29916),h=i(76147),c=i(52930),d=i(89059),p=i(4110),u=i(31402),m=i(41797),g=i(80184);const v=["className","children","classes","IconComponent","input","inputProps","variant"],f=["root"],b=(0,g.jsx)(p.Z,{}),w=n.forwardRef((function(t,e){const i=(0,u.Z)({name:"MuiNativeSelect",props:t}),{className:p,children:w,classes:y={},IconComponent:P=d.Z,input:Z=b,inputProps:C}=i,x=(0,o.Z)(i,v),M=(0,c.Z)(),k=(0,h.Z)({props:i,muiFormControl:M,states:["variant"]}),j=(t=>{const{classes:e}=t;return(0,a.Z)({root:["root"]},m.f,e)})((0,s.Z)({},i,{classes:y})),L=(0,o.Z)(y,f);return(0,g.jsx)(n.Fragment,{children:n.cloneElement(Z,(0,s.Z)({inputComponent:l.ZP,inputProps:(0,s.Z)({children:w,classes:L,IconComponent:P,variant:k.variant,type:void 0},C,Z?Z.props.inputProps:{}),ref:e},x,{className:(0,r.default)(j.root,Z.props.className,p)}))})}));w.muiName="Select",e.Z=w},42670:(t,e,i)=>{var s=i(45957),o=i(5989),n=i(99148),r=i(37130),a=i(30923),l=i(1408);const h="element",c="map",d="offset",p="position",u="positioning";class m extends s.Z{constructor(t){super(),this.on,this.once,this.un,this.options=t,this.id=t.id,this.insertFirst=void 0===t.insertFirst||t.insertFirst,this.stopEvent=void 0===t.stopEvent||t.stopEvent,this.element=document.createElement("div"),this.element.className=void 0!==t.className?t.className:"ol-overlay-container "+n.$A,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=!0===t.autoPan?{}:t.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(h,this.handleElementChanged),this.addChangeListener(c,this.handleMapChanged),this.addChangeListener(d,this.handleOffsetChanged),this.addChangeListener(p,this.handlePositionChanged),this.addChangeListener(u,this.handlePositioningChanged),void 0!==t.element&&this.setElement(t.element),this.setOffset(void 0!==t.offset?t.offset:[0,0]),this.setPositioning(t.positioning||"top-left"),void 0!==t.position&&this.setPosition(t.position)}getElement(){return this.get(h)}getId(){return this.id}getMap(){return this.get(c)||null}getOffset(){return this.get(d)}getPosition(){return this.get(p)}getPositioning(){return this.get(u)}handleElementChanged(){(0,l.ep)(this.element);const t=this.getElement();t&&this.element.appendChild(t)}handleMapChanged(){this.mapPostrenderListenerKey&&((0,l.ZF)(this.element),(0,a.bN)(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const t=this.getMap();if(t){this.mapPostrenderListenerKey=(0,a.oL)(t,o.Z.POSTRENDER,this.render,this),this.updatePixelPosition();const e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(t){this.set(h,t)}setMap(t){this.set(c,t)}setOffset(t){this.set(d,t)}setPosition(t){this.set(p,t)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(t){const e=this.getMap();if(!e||!e.getTargetElement()||!this.get(p))return;const i=this.getRect(e.getTargetElement(),e.getSize()),s=this.getElement(),o=this.getRect(s,[(0,l.iO)(s),(0,l.Pb)(s)]),n=void 0===(t=t||{}).margin?20:t.margin;if(!(0,r.containsExtent)(i,o)){const s=o[0]-i[0],r=i[2]-o[2],a=o[1]-i[1],l=i[3]-o[3],h=[0,0];if(s<0?h[0]=s-n:r<0&&(h[0]=Math.abs(r)+n),a<0?h[1]=a-n:l<0&&(h[1]=Math.abs(l)+n),0!==h[0]||0!==h[1]){const i=e.getView().getCenterInternal(),s=e.getPixelFromCoordinateInternal(i);if(!s)return;const o=[s[0]+h[0],s[1]+h[1]],n=t.animation||{};e.getView().animateInternal({center:e.getCoordinateFromPixelInternal(o),duration:n.duration,easing:n.easing})}}}getRect(t,e){const i=t.getBoundingClientRect(),s=i.left+window.pageXOffset,o=i.top+window.pageYOffset;return[s,o,s+e[0],o+e[1]]}setPositioning(t){this.set(u,t)}setVisible(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)}updatePixelPosition(){const t=this.getMap(),e=this.getPosition();if(!t||!t.isRendered()||!e)return void this.setVisible(!1);const i=t.getPixelFromCoordinate(e),s=t.getSize();this.updateRenderedPosition(i,s)}updateRenderedPosition(t,e){const i=this.element.style,s=this.getOffset(),o=this.getPositioning();this.setVisible(!0);const n=Math.round(t[0]+s[0])+"px",r=Math.round(t[1]+s[1])+"px";let a="0%",l="0%";"bottom-right"==o||"center-right"==o||"top-right"==o?a="-100%":"bottom-center"!=o&&"center-center"!=o&&"top-center"!=o||(a="-50%"),"bottom-left"==o||"bottom-center"==o||"bottom-right"==o?l="-100%":"center-left"!=o&&"center-center"!=o&&"center-right"!=o||(l="-50%");const h="translate(".concat(a,", ").concat(l,") translate(").concat(n,", ").concat(r,")");this.rendered.transform_!=h&&(this.rendered.transform_=h,i.transform=h)}getOptions(){return this.options}}e.Z=m}}]);
//# sourceMappingURL=3530.b097f56d.chunk.js.map