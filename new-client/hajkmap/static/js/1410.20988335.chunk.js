"use strict";(self.webpackChunkhajk_client=self.webpackChunkhajk_client||[]).push([[1410,1960,3251,5502,6542,4711],{73258:(e,t,i)=>{i.r(t);var n=i(66274),s=i(99359),r=i(72791),l=i(90493),a=i(75396),o=i(80184),d=(0,s.Z)("getSubMenuItems"),c=(0,s.Z)("renderMenuItem");class u extends r.PureComponent{constructor(){super(...arguments),this.getMenuItemType=(e,t)=>(0,o.jsx)(a.default,{...this.props,type:t,menu:e.menu,icon:e.icon,id:e.id,level:e.level,color:e.color,title:e.title,itemRef:e.itemRef,subMenuItems:(0,n.Z)(this,d)[d](e),expanded:e.expandedSubMenu,colored:e.colored,selected:e.selected}),Object.defineProperty(this,d,{writable:!0,value:e=>e.menuItemIds.reduce(((e,t)=>{const i=Object.values(this.props.items).find((e=>e.id===t));return i.menuItemIds.length>0&&(e=[...e,...(0,n.Z)(this,d)[d](i)]),[...e,i]}),[])}),Object.defineProperty(this,c,{writable:!0,value:e=>e.menuItemIds&&e.menuItemIds.length>0?this.getMenuItemType(e,"submenu"):e.document?this.getMenuItemType(e,"document"):e.link?this.getMenuItemType(e,"link"):e.maplink?this.getMenuItemType(e,"maplink"):void 0})}render(){const{items:e,level:t}=this.props;return(0,o.jsx)(l.Z,{style:{position:"static"},disablePadding:!0,id:"panellist_".concat(t),role:"navigation",component:"nav",children:Object.values(e).filter((e=>e.level===t)).map((e=>(0,o.jsx)(r.Fragment,{children:(0,n.Z)(this,c)[c](e,e.id)},e.id)))})}}t.default=u},71410:(e,t,i)=>{i.r(t);var n=i(66274),s=i(99359),r=i(72791),l=i(73258),a=i(68870),o=i(85286),d=i(38629),c=i(45280),u=i(21960),h=i(54711),p=i(55502),b=i(80184),m=(0,s.Z)("bindSubscriptions"),Z=(0,s.Z)("initializeItems"),v=(0,s.Z)("setInitialMenuItemProperties"),f=(0,s.Z)("handleOpenDocumentFromLink"),I=(0,s.Z)("handleOpenDocumentFromPanelMenu"),g=(0,s.Z)("openEventualConnections"),y=(0,s.Z)("handleShowMapLayers"),O=(0,s.Z)("closeDocumentWindow"),j=(0,s.Z)("handleShowMapLayersFromLink"),M=(0,s.Z)("handleShowMapLayersFromPanelMenu"),w=(0,s.Z)("handleSubMenuClicked"),P=(0,s.Z)("handleExternalLinkClicked"),x=(0,s.Z)("setClickedItemProperties"),k=(0,s.Z)("setNonClickedItemProperties"),S=(0,s.Z)("setItemStateProperties"),C=(0,s.Z)("clearPanel"),L=(0,s.Z)("scrollToMenuItem"),T=(0,s.Z)("setDocument"),N=(0,s.Z)("delayAndFlyToMapLink"),D=(0,s.Z)("getNextUniqueId");class W extends r.PureComponent{constructor(e){var t;super(e),t=this,this.internalId=0,this.state={},this.componentDidMount=()=>{(0,n.Z)(this,Z)[Z]()},Object.defineProperty(this,m,{writable:!0,value:()=>{const{localObserver:e}=this.props;e.subscribe("submenu-clicked",(0,n.Z)(this,w)[w]),e.subscribe("document-link-clicked",(0,n.Z)(this,f)[f]),e.subscribe("document-clicked",(0,n.Z)(this,g)[g]),e.subscribe("link-clicked",(0,n.Z)(this,P)[P]),e.subscribe("document-maplink-clicked",(0,n.Z)(this,j)[j]),e.subscribe("maplink-clicked",(0,n.Z)(this,M)[M]),e.subscribe("document-window-closed",(0,n.Z)(this,C)[C])}}),Object.defineProperty(this,Z,{writable:!0,value:()=>{const{options:e}=this.props;e.menuConfig.menu.forEach((0,n.Z)(this,v)[v]),this.setState((0,h.getNormalizedMenuState)(e.menuConfig.menu))}}),Object.defineProperty(this,v,{writable:!0,value:e=>{const{document:t,options:i={}}=this.props,s=t&&e.document===t.documentFileName||""!==i.documentOnStart&&i.documentOnStart===e.document;Object.assign(e,{id:(0,n.Z)(this,D)[D](),selected:s,colored:s}),(0,u.hasSubMenu)(e)&&(e.hasSubMenu=!0,e.menu.forEach((t=>{(0,n.Z)(this,v)[v](t,e)})))}}),Object.defineProperty(this,f,{writable:!0,value:e=>{let{documentName:t,headerIdentifier:i}=e;const s=(0,p.findMenuItemWithDocumentName)(t,this.state);(0,n.Z)(this,T)[T](t,i),(0,n.Z)(this,S)[S](s.id).then((()=>{(0,n.Z)(this,L)[L](s.itemRef.current.offsetTop)}))}}),Object.defineProperty(this,I,{writable:!0,value:e=>{const{app:t}=this.props,{document:i}=this.state[e];i&&((0,n.Z)(this,T)[T](i,null),(0,n.Z)(this,S)[S](e).then((()=>{t.globalObserver.publish("core.onlyHideDrawerIfNeeded")})))}}),Object.defineProperty(this,g,{writable:!0,value:e=>{(0,n.Z)(this,I)[I](e),(0,n.Z)(this,P)[P](e),(0,n.Z)(this,M)[M](e)}}),Object.defineProperty(this,y,{writable:!0,value:e=>{const{options:t,localObserver:i,app:s}=this.props;t.displayLoadingOnMapLinkOpen&&i.publish("maplink-loading"),s.globalObserver.publish("core.onlyHideDrawerIfNeeded"),(0,n.Z)(this,N)[N](e)}}),Object.defineProperty(this,O,{writable:!0,value:()=>{const{app:e}=this.props;(0,n.Z)(this,T)[T](),e.globalObserver.publish("documentviewer.closeWindow")}}),Object.defineProperty(this,j,{writable:!0,value:e=>{(0,o.getIsMobile)()&&(0,n.Z)(this,O)[O](),(0,n.Z)(this,y)[y](e)}}),Object.defineProperty(this,M,{writable:!0,value:e=>{const{options:t}=this.props,{maplink:i}=this.state[e];i&&(((0,o.getIsMobile)()||t.closePanelOnMapLinkOpen)&&(0,n.Z)(this,O)[O](),(0,n.Z)(this,y)[y](this.state[e].maplink))}}),Object.defineProperty(this,w,{writable:!0,value:e=>{(0,n.Z)(this,I)[I](e),(0,n.Z)(this,P)[P](e),(0,n.Z)(this,M)[M](e),(0,n.Z)(this,S)[S](e)}}),Object.defineProperty(this,P,{writable:!0,value:e=>{const{app:t}=this.props,{link:i}=this.state[e];i&&(window.open(this.state[e].link,"_blank"),t.globalObserver.publish("core.onlyHideDrawerIfNeeded"))}}),Object.defineProperty(this,x,{writable:!0,value:e=>{let t={...e};return{...e,colored:!(0,p.isExpandedTopLevelItem)(t),selected:!t.hasSubMenu,expandedSubMenu:t.hasSubMenu?!t.expandedSubMenu:t.expandedSubMenu}}}),Object.defineProperty(this,k,{writable:!0,value:(e,t,i)=>{const n=(0,p.getItemIdsToColor)(i,t);return{...e,colored:-1!==n.indexOf(e.id),expandedSubMenu:-1!==i.allParents.indexOf(e.id)||e.expandedSubMenu,selected:!!i.hasSubMenu&&e.selected}}}),Object.defineProperty(this,S,{writable:!0,value:e=>new Promise((t=>{const i={...this.state},s=i[e],r=Object.values(i).reduce(((t,r)=>r.id===e?{...t,[r.id]:(0,n.Z)(this,x)[x](r)}:{...t,[r.id]:(0,n.Z)(this,k)[k](r,i,s)}),{});this.setState(r,t)}))}),Object.defineProperty(this,C,{writable:!0,value:()=>{let e=Object.values({...this.state}).reduce(((e,t)=>{let i={...t};return i.colored=!1,i.selected=!1,{...e,[i.id]:i}}),{});this.setState(e)}}),Object.defineProperty(this,L,{writable:!0,value:async e=>{c.NY.scrollTo(e,{containerId:"panelListWrapper",smooth:!1,isDynamic:!0,delay:0})}}),Object.defineProperty(this,T,{writable:!0,value:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const{localObserver:n}=t.props;n.publish("set-active-document",{documentName:e,headerIdentifier:i})}}),Object.defineProperty(this,N,{writable:!0,value:async e=>{await(0,d.delay)(100),this.props.localObserver.publish("fly-to",e)}}),Object.defineProperty(this,D,{writable:!0,value:()=>(this.internalId+=1,this.internalId)}),(0,n.Z)(this,m)[m]()}render(){const{app:e,localObserver:t}=this.props;return(0,b.jsx)(a.Z,{id:"panelListWrapper",sx:{maxHeight:"100%",position:"relative",overflow:"auto"},children:(0,b.jsx)(l.default,{app:e,localObserver:t,level:0,items:this.state})})}}t.default=W},75396:(e,t,i)=>{i.r(t);var n=i(66274),s=i(99359),r=i(72791),l=i(66934),a=i(9933),o=i(99875),d=i(45484),c=i(56125),u=i(49900),h=i(57064),p=i(22885),b=i(73258),m=i(81131),Z=i(95573),v=i(80184);const f=(0,l.ZP)(h.Z)((e=>{let{theme:t}=e;return{minWidth:t.spacing(3)}})),I=(0,l.ZP)(h.Z)((e=>{let{theme:t}=e;return{".MuiListItemIcon-root":{minWidth:t.spacing(4)}}})),g=(0,l.ZP)(d.ZP)((e=>{let{theme:t}=e;return{overflowWrap:"break-word",".MuiListItem-root":{borderLeft:"".concat(t.spacing(1)," solid ").concat(t.palette.background.paper),"&.Mui-selected":{borderLeftColor:t.palette.action.selected},"&.Mui-selected:hover":{borderLeftColor:t.palette.action.selected},"&:hover":{borderColor:t.palette.action.hover}}}}));var y=(0,s.Z)("getListTitle"),O=(0,s.Z)("getCollapseIcon"),j=(0,s.Z)("getListIcon"),M=(0,s.Z)("hasSubMenu"),w=(0,s.Z)("handleMenuButtonClick"),P=(0,s.Z)("getMenuItemStyle");class x extends r.PureComponent{constructor(){super(...arguments),Object.defineProperty(this,y,{writable:!0,value:()=>{const{title:e}=this.props;return(0,v.jsx)(u.Z,{children:e})}}),Object.defineProperty(this,O,{writable:!0,value:()=>{const{title:e,expanded:t}=this.props;return t?(0,v.jsxs)(I,{children:[!e&&(0,v.jsx)("span",{style:Z.Z,children:"Minimera submeny"}),(0,v.jsx)(p.Z,{})]}):(0,v.jsxs)(I,{children:[!e&&(0,v.jsx)("span",{style:Z.Z,children:"Maximera submeny"}),(0,v.jsx)(m.Z,{})]})}}),Object.defineProperty(this,j,{writable:!0,value:()=>{const{title:e,icon:t}=this.props;return(0,v.jsxs)(f,{children:[!e&&(0,v.jsx)("span",{style:Z.Z,children:t.descriptiveText}),(0,v.jsx)(o.Z,{style:{fontSize:t.fontSize},children:t.materialUiIconName})]})}}),Object.defineProperty(this,M,{writable:!0,value:()=>{const{subMenuItems:e}=this.props;return e&&e.length>0}}),Object.defineProperty(this,w,{writable:!0,value:(e,t)=>{const{localObserver:i}=this.props;i.publish("".concat(e,"-clicked"),t)}}),Object.defineProperty(this,P,{writable:!0,value:()=>{const{theme:e,level:t,color:i,colored:s}=this.props,r=(0,n.Z)(this,M)[M]();return s?{paddingLeft:e.spacing(1+3*t),borderLeft:"".concat(e.spacing(1)," solid ").concat(i),paddingRight:r?0:e.spacing(1)}:{paddingLeft:e.spacing(1+3*t),paddingRight:r?0:e.spacing(1)}}})}render(){const{type:e,selected:t,subMenuItems:i,expanded:s,icon:r,level:l,title:a,id:o}=this.props,d=(0,n.Z)(this,M)[M]();return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(g,{divider:!0,selected:t,button:!0,ref:this.props.itemRef,size:"small",disableGutters:!0,"aria-controls":d?"submenu_".concat(o):null,"aria-expanded":s,onClick:()=>{(0,n.Z)(this,w)[w](e,o)},sx:(0,n.Z)(this,P)[P](),children:[r?(0,n.Z)(this,j)[j]():null,a&&(0,n.Z)(this,y)[y](),d&&(0,n.Z)(this,O)[O]()]}),d&&(0,v.jsx)(c.Z,{id:"submenu_".concat(o),in:s,timeout:200,children:(0,v.jsx)(b.default,{...this.props,level:l+1,items:i})})]})}}t.default=(0,a.b)(x)},55502:(e,t,i)=>{i.r(t),i.d(t,{findMenuItemWithDocumentName:()=>r,getItemIdsToColor:()=>n,isExpandedTopLevelItem:()=>s});const n=(e,t)=>{const i=((e,t)=>e.parentId?Object.values(t).find((t=>t.allChildren.indexOf(e.id)>-1)):e)(e,t);return[i.id,...i.allChildren]},s=e=>e.hasSubMenu&&e.expandedSubMenu&&0===e.level,r=(e,t)=>Object.values(t).find((t=>t.document===e))},21960:(e,t,i)=>{i.r(t),i.d(t,{flattenChaptersTree:()=>l,getStringArray:()=>s,hasSubMenu:()=>r,splitAndTrimOnCommas:()=>n});const n=e=>e.split(",").map((e=>e.trim())),s=e=>n(e).join(" ").split(" "),r=e=>e.menu&&e.menu.length>0,l=e=>e.reduce(((e,t)=>{if(t.header){let i={...t};i.chapters=[],e=[...e,i]}return t.chapters&&t.chapters.length>0?[...e,...l(t.chapters)]:e}),[])},54711:(e,t,i)=>{i.r(t),i.d(t,{getNormalizedMenuState:()=>l});var n=i(72791),s=i(21960);const r=e=>e.reduce(((e,t)=>((0,s.hasSubMenu)(t)&&(e=[...e,...r(t.menu)]),[...e,t.id])),[]),l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=e.reduce(((e,a)=>((a={...a,parentId:t,level:i,menuItemIds:[],allChildren:[],allParents:s,itemRef:n.createRef()}).menu&&a.menu.length>0&&(a.allChildren=[...a.allChildren,...r(a.menu)],a.menuItemIds=[...a.menuItemIds,...a.menu.map((e=>e.id))],e={...e,...l(a.menu,a.id,i+1,[...s,a.id])}),{...e,[a.id]:a})),{});return Object.values(a).forEach((e=>{delete e.menu})),a}}}]);
//# sourceMappingURL=1410.20988335.chunk.js.map