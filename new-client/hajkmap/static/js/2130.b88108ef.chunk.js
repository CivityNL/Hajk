"use strict";(self.webpackChunkhajk_client=self.webpackChunkhajk_client||[]).push([[2130],{72130:(e,t,r)=>{r.r(t);var i=r(72791),s=r(66934),a=r(76384),l=r(23786),n=r(30829),h=r(68096),o=r(4110),p=r(24518),u=r(20890),c=r(9501),f=r(25806),d=r(80184);const m=(0,s.ZP)(h.Z)((e=>{let{theme:t}=e;return{margin:t.spacing(1),minWidth:120}})),y=(0,s.ZP)(u.Z)((e=>{let{theme:t}=e;return{fontWeight:500}}));class g extends i.PureComponent{constructor(e){super(e),this.loadFeatureInfo=()=>{const{url:e,featureType:t}=this.props.layer.getProperties();(0,f.hfetch)(e+"?service=WFS&request=describeFeatureType&outputFormat=application/json&typename=".concat(t)).then((e=>{e.json().then((e=>{const r=e.featureTypes.find((e=>e.typeName===t));if(r&&Array.isArray(r.properties)){const e=r.properties.filter((e=>"gml:Geometry"!==e.type)).map((e=>e.name));this.setState({layerProperties:e})}}))}))},this.handleChange=e=>{this.setState({[e.target.name]:e.target.value})},this.setFilter=e=>{this.props.layer.set("filterAttribute",this.state.filterAttribute),this.props.layer.set("filterComparer",this.state.filterComparer),this.props.layer.set("filterValue",this.state.filterValue),this.props.layer.getSource().refresh()},this.resetFilter=e=>{this.setState({filterAttribute:"",filterValue:"",filterComparer:""}),this.props.layer.set("filterAttribute",""),this.props.layer.set("filterComparer",""),this.props.layer.set("filterValue",""),this.props.layer.getSource().refresh()},this.state={filterAttribute:e.layer.get("filterAttribute")||"",filterValue:e.layer.get("filterValue")||"",filterComparer:e.layer.get("filterComparer")||"",layerProperties:[]},this.loadFeatureInfo()}render(){const{layer:e}=this.props;return e instanceof c.Z?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(y,{variant:"subtitle2",children:"Filtrera inneh\xe5ll baserat p\xe5 attribut"}),(0,d.jsxs)(m,{children:[(0,d.jsx)(n.Z,{htmlFor:"attribute",children:"Attribut"}),(0,d.jsx)(a.Z,{value:this.state.filterAttribute,onChange:this.handleChange,inputProps:{name:"filterAttribute",id:"attribute"},children:this.state.layerProperties.map(((e,t)=>(0,d.jsx)(l.Z,{value:e,children:e},t)))})]}),(0,d.jsxs)(m,{children:[(0,d.jsx)(n.Z,{htmlFor:"comparer",children:"J\xe4mf\xf6rare"}),(0,d.jsxs)(a.Z,{value:this.state.filterComparer,onChange:this.handleChange,inputProps:{name:"filterComparer",id:"comparer"},children:[(0,d.jsx)(l.Z,{value:"gt",children:"St\xf6rre \xe4n"}),(0,d.jsx)(l.Z,{value:"lt",children:"Mindre \xe4n"}),(0,d.jsx)(l.Z,{value:"eq",children:"Lika med"}),(0,d.jsx)(l.Z,{value:"not",children:"Skilt fr\xe5n"})]})]}),(0,d.jsx)(m,{children:(0,d.jsx)(o.Z,{value:this.state.filterValue,onChange:this.handleChange,placeholder:"Filterv\xe4rde",inputProps:{name:"filterValue","aria-label":"V\xe4rde"}})}),(0,d.jsx)(p.Z,{variant:"contained",color:"primary",onClick:this.setFilter,children:"Aktivera"}),(0,d.jsx)(p.Z,{onClick:this.resetFilter,children:"\xc5terst\xe4ll"})]}):null}}t.default=g}}]);
//# sourceMappingURL=2130.b88108ef.chunk.js.map