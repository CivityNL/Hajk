{"version":3,"file":"static/js/9724.45cd4099.chunk.js","mappings":"wPAaMA,EAMY,iBANZA,EAYS,cAZTA,EAkBU,eAqCHC,EAAb,0CAQE,WAAYC,EAAMC,EAAUC,EAAYC,EAAiBC,GAAiB,6BACxE,cAAMJ,IAODC,SAAWA,EAQhB,EAAKC,WAAaA,EAQlB,EAAKC,gBAAkBA,EAOvB,EAAKC,gBAAkBA,EA/BiD,CAgCzE,CAxCH,kBAAoCC,EAAAA,IA+D9BC,EAAAA,SAAAA,I,6BAIJ,WAAYC,GAAS,MAyCfC,EACJ,IA1CmB,eACnBD,EAAUA,GAAoB,CAAC,GAE/B,cAAqDA,IAKhDE,GAKL,EAAKC,KAKL,EAAKC,GAOL,EAAKC,gBAAkB,KAOvB,EAAKC,iBAAmB,KAMxB,EAAKC,eAAiCC,IAArBR,EAAQN,SAAyBM,EAAQN,SAAW,KAIjEM,EAAQS,SAAW,EAAKF,UAC1B,GAA8B,oBAAnBP,EAAQS,OACjBR,EAAcD,EAAQS,WACjB,CACL,IAAMA,EAAST,EAAQS,OACvBR,EAAc,SAAUS,GACtB,OAAOD,EAAOE,SAASD,EACxB,CACF,MAEDT,EAAcW,EAAAA,GApDG,OA2DnB,EAAKC,aAAeZ,EAMpB,EAAKa,QAAUd,EAAQe,SAAW,EAAKR,UAAYP,EAAQe,OAASH,EAAAA,GAMpE,EAAKI,cAAgBhB,EAAQiB,aAAejB,EAAQiB,aAAe,EAMnE,EAAKC,WAAalB,EAAQmB,UAAYnB,EAAQmB,UAAYC,EAAAA,GAM1D,EAAKC,aAAe,KAEpB,EAAKC,kBACHC,EAAAA,EAAAA,OACA,EAAKC,sBAvFY,CAyFpB,C,8CAOD,SAAgBC,GACd,IAAKA,EAAMC,gBAAkBC,KAAKT,WAAWO,GAC3C,OAAO,EAGT,GADAE,KAAKN,aAAeM,KAAKC,iBAAiBH,EAAMI,MAAOJ,EAAMK,MACxDH,KAAKtB,iBAAmBsB,KAAKN,aAAc,CAC9CM,KAAKrB,iBAAmBmB,EAAM9B,WAC9BgC,KAAKtB,gBAAkBoB,EAAM9B,WAC7BgC,KAAKI,gBAAgBN,GAErB,IAAM/B,EAAWiC,KAAKpB,WAAa,IAAIyB,EAAAA,EAAW,CAACL,KAAKN,eAWxD,OATAM,KAAKM,cACH,IAAIzC,EACFD,EACAG,EACA+B,EAAM9B,WACNgC,KAAKrB,iBACLmB,KAGG,CACR,CACD,OAAO,CACR,G,2BAOD,SAAcA,GACZ,GAAIE,KAAKtB,gBAAiB,CACxBsB,KAAKtB,gBAAkB,KACvBsB,KAAKI,gBAAgBN,GAErB,IAAM/B,EAAWiC,KAAKpB,WAAa,IAAIyB,EAAAA,EAAW,CAACL,KAAKN,eAaxD,OAXAM,KAAKM,cACH,IAAIzC,EACFD,EACAG,EACA+B,EAAM9B,WACNgC,KAAKrB,iBACLmB,IAIJE,KAAKrB,iBAAmB,MACjB,CACR,CACD,OAAO,CACR,G,6BAMD,SAAgBmB,GACd,GAAIE,KAAKtB,gBAAiB,CACxB,IAAM6B,EAAgBT,EAAM9B,WACtBwC,EAASD,EAAc,GAAKP,KAAKtB,gBAAgB,GACjD+B,EAASF,EAAc,GAAKP,KAAKtB,gBAAgB,GAEjDX,EAAWiC,KAAKpB,WAAa,IAAIyB,EAAAA,EAAW,CAACL,KAAKN,eAExD3B,EAAS2C,SAAQ,SAAUC,GACzB,IAAMC,EAAOD,EAAQE,cACrBD,EAAKE,UAAUN,EAAQC,GACvBE,EAAQI,YAAYH,EACrB,IAEDZ,KAAKtB,gBAAkB6B,EAEvBP,KAAKM,cACH,IAAIzC,EACFD,EACAG,EACAwC,EACAP,KAAKrB,iBACLmB,GAGL,CACF,G,6BAMD,SAAgBA,GACd,IAAMkB,EAAOlB,EAAMK,IAAIc,cAInBjB,KAAKC,iBAAiBH,EAAMI,MAAOJ,EAAMK,MAC3Ca,EAAKE,UAAUC,OAAOnB,KAAKtB,gBAAkB,UAAY,eACzDsC,EAAKE,UAAUE,IAAIpB,KAAKtB,gBAAkB,cAAgB,YAE1DsC,EAAKE,UAAUC,OAAO,UAAW,cAEpC,G,8BAWD,SAAiBjB,EAAOC,GACtB,OAAOA,EAAIkB,sBACTnB,EACA,SAAUS,EAAS5B,GACjB,GAAIiB,KAAKb,QAAQwB,EAAS5B,MACnBiB,KAAKpB,WAAaoB,KAAKpB,UAAU0C,WAAWtC,SAAS2B,IACxD,OAAOA,CAGZ,EAACY,KAAKvB,MACP,CACE1B,YAAa0B,KAAKd,aAClBI,aAAcU,KAAKX,eAGxB,G,6BAOD,WACE,OAAOW,KAAKX,aACb,G,6BAQD,SAAgBC,GACdU,KAAKX,cAAgBC,CACtB,G,oBAQD,SAAOa,GACL,IAAMqB,EAASxB,KAAKyB,UACpB,qDAAatB,GACbH,KAAK0B,aAAaF,EACnB,G,kCAKD,WACExB,KAAK0B,aAAa,KACnB,G,0BAMD,SAAaF,GACX,IAAIrB,EAAMH,KAAKyB,SACTE,EAAS3B,KAAK4B,YACfzB,GAAQwB,IACXxB,EAAMA,GAAOqB,IAEErB,EAAIc,cACZC,UAAUC,OAAO,UAAW,cAGtC,K,EAzRG/C,CAAkByD,EAAAA,GA4RxB,K,0IC5VMC,EAAAA,SAAAA,I,6BAIJ,WAAYzD,GAAS,4BACnBA,EAAUA,GAAoB,CAAC,GAE/B,cAAM,CACJ0D,aAAc1D,EAAQ0D,aACtBC,UAAW3D,EAAQ2D,UACnBC,YAAa5D,EAAQ4D,YACrBC,YAAa7D,EAAQ6D,YACrBC,WAAY9D,EAAQ8D,WACpBC,2BAA4B/D,EAAQ+D,2BACpCC,SAAUhE,EAAQgE,SAClBC,iBAAkBjE,EAAQiE,iBAC1BC,IAAKlE,EAAQkE,IACbC,KAAMnE,EAAQmE,KACdC,WAAyB5D,IAAlBR,EAAQoE,OAAsBpE,EAAQoE,MAC7CC,WAAYrE,EAAQqE,WACpBC,WAAYtE,EAAQsE,cAOjBC,QAAUvE,EAAQwE,QAAU,CAAC,EAMlC,EAAKC,YAA2BjE,IAAlBR,EAAQ0E,OAAsB1E,EAAQ0E,MAMpD,EAAKC,YAAaC,EAAAA,EAAAA,eAElB,EAAKC,OAAO,EAAKC,oBArCE,CAsCpB,C,+CAMD,WACE,IAAIC,EAAI,EACFC,EAAM,GACZ,IAAK,IAAMC,KAAOtD,KAAK4C,QACrBS,EAAID,KAAOE,EAAM,IAAMtD,KAAK4C,QAAQU,GAEtC,OAAOD,EAAIE,KAAK,IACjB,G,uBAQD,WACE,OAAOvD,KAAK4C,OACb,G,4BAYD,SACEY,EACAC,EACAC,EACAC,EACAxB,EACAU,GAEA,IAAML,EAAOxC,KAAKwC,KAClB,GAAKA,EAAL,CAOA,IAaID,EAbEqB,EAAOzB,EACV0B,UACAC,MAAM,aACNC,MAWH,GATAlB,EAAM,KAAWY,EAAS,GAAK,IAAMA,EAAS,GAC9CZ,EAAM,KAAWa,EAAWH,KAAK,KACjCV,EAAM,OAAae,EACnBf,EAAM,QAAce,EACpBf,EAAM,IAAUmB,KAAKC,MACnBpB,EAAM,IAAUA,EAAM,IAAUc,EAAa,GAAKA,GAIjC,GAAfnB,EAAK0B,OACP3B,EAAMC,EAAK,QAGXD,EAAMC,GADQ2B,EAAAA,EAAAA,KAAOC,EAAAA,EAAAA,IAAcZ,GAAYhB,EAAK0B,SAItD,IAAMG,EAAc9B,EACjB+B,QAAQ,gBAAiB,oBACzBA,QAAQ,kBAAmB,2BAC9B,OAAOC,EAAAA,EAAAA,GAAaF,EAAaxB,EA7BhC,CA8BF,G,+BAOD,SAAkBc,GAChB,OAAO3D,KAAK8C,OAASa,EAAa,CACnC,G,0BAOD,SAAad,GACX2B,OAAOC,OAAOzE,KAAK4C,QAASC,GAC5B7C,KAAKkD,OAAOlD,KAAKmD,mBAClB,G,6BASD,SAAgBK,EAAWG,EAAYxB,GACrC,IAAIE,EAAWrC,KAAK0E,cAKpB,GAJKrC,IACHA,EAAWrC,KAAK2E,yBAAyBxC,MAGvCE,EAASuC,iBAAiBV,QAAUV,EAAU,IAAlD,CAIkB,GAAdG,GAAoB3D,KAAK8C,SAC3Ba,EAAa,GAGf,IAAMD,EAAarB,EAASwC,mBAAmBrB,EAAWxD,KAAKgD,YAC3DS,GAAWqB,EAAAA,EAAAA,IAAOzC,EAAS0C,YAAYvB,EAAU,IAAKxD,KAAKgF,SAE7C,GAAdrB,IACFF,GAAWwB,EAAAA,EAAAA,IAAUxB,EAAUE,EAAY3D,KAAKgF,UAIlD,IAAME,EAAa,CACjB,EAAK,QACL,OAAU,QACV,aAAe,GAIjB,OAFAV,OAAOC,OAAOS,EAAYlF,KAAK4C,SAExB5C,KAAKmF,eACV3B,EACAC,EACAC,EACAC,EACAxB,EACA+C,EA3BD,CA6BF,K,EAvLGpD,CAAuBsD,EAAAA,GA0L7B,K","sources":["../node_modules/ol/interaction/Translate.js","../node_modules/ol/source/TileArcGISRest.js"],"sourcesContent":["/**\n * @module ol/interaction/Translate\n */\nimport Collection from '../Collection.js';\nimport Event from '../events/Event.js';\nimport InteractionProperty from './Property.js';\nimport PointerInteraction from './Pointer.js';\nimport {TRUE} from '../functions.js';\nimport {always} from '../events/condition.js';\n\n/**\n * @enum {string}\n */\nconst TranslateEventType = {\n  /**\n   * Triggered upon feature translation start.\n   * @event TranslateEvent#translatestart\n   * @api\n   */\n  TRANSLATESTART: 'translatestart',\n  /**\n   * Triggered upon feature translation.\n   * @event TranslateEvent#translating\n   * @api\n   */\n  TRANSLATING: 'translating',\n  /**\n   * Triggered upon feature translation end.\n   * @event TranslateEvent#translateend\n   * @api\n   */\n  TRANSLATEEND: 'translateend',\n};\n\n/**\n * A function that takes an {@link module:ol/Feature~Feature} or\n * {@link module:ol/render/Feature~RenderFeature} and an\n * {@link module:ol/layer/Layer~Layer} and returns `true` if the feature may be\n * translated or `false` otherwise.\n * @typedef {function(import(\"../Feature.js\").FeatureLike, import(\"../layer/Layer.js\").default<import(\"../source/Source\").default>):boolean} FilterFunction\n */\n\n/**\n * @typedef {Object} Options\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that\n * takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled.\n * Default is {@link module:ol/events/condition.always}.\n * @property {Collection<import(\"../Feature.js\").default>} [features] Features contained in this collection will be able to be translated together.\n * @property {Array<import(\"../layer/Layer.js\").default>|function(import(\"../layer/Layer.js\").default<import(\"../source/Source\").default>): boolean} [layers] A list of layers from which features should be\n * translated. Alternatively, a filter function can be provided. The\n * function will be called for each layer in the map and should return\n * `true` for layers that you want to be translatable. If the option is\n * absent, all visible layers will be considered translatable.\n * Not used if `features` is provided.\n * @property {FilterFunction} [filter] A function\n * that takes an {@link module:ol/Feature~Feature} and an\n * {@link module:ol/layer/Layer~Layer} and returns `true` if the feature may be\n * translated or `false` otherwise. Not used if `features` is provided.\n * @property {number} [hitTolerance=0] Hit-detection tolerance. Pixels inside the radius around the given position\n * will be checked for features.\n */\n\n/**\n * @classdesc\n * Events emitted by {@link module:ol/interaction/Translate~Translate} instances\n * are instances of this type.\n */\nexport class TranslateEvent extends Event {\n  /**\n   * @param {TranslateEventType} type Type.\n   * @param {Collection<import(\"../Feature.js\").default>} features The features translated.\n   * @param {import(\"../coordinate.js\").Coordinate} coordinate The event coordinate.\n   * @param {import(\"../coordinate.js\").Coordinate} startCoordinate The original coordinates before.translation started\n   * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n   */\n  constructor(type, features, coordinate, startCoordinate, mapBrowserEvent) {\n    super(type);\n\n    /**\n     * The features being translated.\n     * @type {Collection<import(\"../Feature.js\").default>}\n     * @api\n     */\n    this.features = features;\n\n    /**\n     * The coordinate of the drag event.\n     * @const\n     * @type {import(\"../coordinate.js\").Coordinate}\n     * @api\n     */\n    this.coordinate = coordinate;\n\n    /**\n     * The coordinate of the start position before translation started.\n     * @const\n     * @type {import(\"../coordinate.js\").Coordinate}\n     * @api\n     */\n    this.startCoordinate = startCoordinate;\n\n    /**\n     * Associated {@link module:ol/MapBrowserEvent~MapBrowserEvent}.\n     * @type {import(\"../MapBrowserEvent.js\").default}\n     * @api\n     */\n    this.mapBrowserEvent = mapBrowserEvent;\n  }\n}\n\n/***\n * @template Return\n * @typedef {import(\"../Observable\").OnSignature<import(\"../Observable\").EventTypes, import(\"../events/Event.js\").default, Return> &\n *   import(\"../Observable\").OnSignature<import(\"../ObjectEventType\").Types|\n *     'change:active', import(\"../Object\").ObjectEvent, Return> &\n *   import(\"../Observable\").OnSignature<'translateend'|'translatestart'|'translating', TranslateEvent, Return> &\n *   import(\"../Observable\").CombinedOnSignature<import(\"../Observable\").EventTypes|import(\"../ObjectEventType\").Types|\n *     'change:active'|'translateend'|'translatestart'|'translating', Return>} TranslateOnSignature\n */\n\n/**\n * @classdesc\n * Interaction for translating (moving) features.\n * If you want to translate multiple features in a single action (for example,\n * the collection used by a select interaction), construct the interaction with\n * the `features` option.\n *\n * @fires TranslateEvent\n * @api\n */\nclass Translate extends PointerInteraction {\n  /**\n   * @param {Options} [options] Options.\n   */\n  constructor(options) {\n    options = options ? options : {};\n\n    super(/** @type {import(\"./Pointer.js\").Options} */ (options));\n\n    /***\n     * @type {TranslateOnSignature<import(\"../events\").EventsKey>}\n     */\n    this.on;\n\n    /***\n     * @type {TranslateOnSignature<import(\"../events\").EventsKey>}\n     */\n    this.once;\n\n    /***\n     * @type {TranslateOnSignature<void>}\n     */\n    this.un;\n\n    /**\n     * The last position we translated to.\n     * @type {import(\"../coordinate.js\").Coordinate}\n     * @private\n     */\n    this.lastCoordinate_ = null;\n\n    /**\n     * The start position before translation started.\n     * @type {import(\"../coordinate.js\").Coordinate}\n     * @private\n     */\n    this.startCoordinate_ = null;\n\n    /**\n     * @type {Collection<import(\"../Feature.js\").default>|null}\n     * @private\n     */\n    this.features_ = options.features !== undefined ? options.features : null;\n\n    /** @type {function(import(\"../layer/Layer.js\").default<import(\"../source/Source\").default>): boolean} */\n    let layerFilter;\n    if (options.layers && !this.features_) {\n      if (typeof options.layers === 'function') {\n        layerFilter = options.layers;\n      } else {\n        const layers = options.layers;\n        layerFilter = function (layer) {\n          return layers.includes(layer);\n        };\n      }\n    } else {\n      layerFilter = TRUE;\n    }\n\n    /**\n     * @private\n     * @type {function(import(\"../layer/Layer.js\").default<import(\"../source/Source\").default>): boolean}\n     */\n    this.layerFilter_ = layerFilter;\n\n    /**\n     * @private\n     * @type {FilterFunction}\n     */\n    this.filter_ = options.filter && !this.features_ ? options.filter : TRUE;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.hitTolerance_ = options.hitTolerance ? options.hitTolerance : 0;\n\n    /**\n     * @private\n     * @type {import(\"../events/condition.js\").Condition}\n     */\n    this.condition_ = options.condition ? options.condition : always;\n\n    /**\n     * @type {import(\"../Feature.js\").default}\n     * @private\n     */\n    this.lastFeature_ = null;\n\n    this.addChangeListener(\n      InteractionProperty.ACTIVE,\n      this.handleActiveChanged_\n    );\n  }\n\n  /**\n   * Handle pointer down events.\n   * @param {import(\"../MapBrowserEvent.js\").default} event Event.\n   * @return {boolean} If the event was consumed.\n   */\n  handleDownEvent(event) {\n    if (!event.originalEvent || !this.condition_(event)) {\n      return false;\n    }\n    this.lastFeature_ = this.featuresAtPixel_(event.pixel, event.map);\n    if (!this.lastCoordinate_ && this.lastFeature_) {\n      this.startCoordinate_ = event.coordinate;\n      this.lastCoordinate_ = event.coordinate;\n      this.handleMoveEvent(event);\n\n      const features = this.features_ || new Collection([this.lastFeature_]);\n\n      this.dispatchEvent(\n        new TranslateEvent(\n          TranslateEventType.TRANSLATESTART,\n          features,\n          event.coordinate,\n          this.startCoordinate_,\n          event\n        )\n      );\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * Handle pointer up events.\n   * @param {import(\"../MapBrowserEvent.js\").default} event Event.\n   * @return {boolean} If the event was consumed.\n   */\n  handleUpEvent(event) {\n    if (this.lastCoordinate_) {\n      this.lastCoordinate_ = null;\n      this.handleMoveEvent(event);\n\n      const features = this.features_ || new Collection([this.lastFeature_]);\n\n      this.dispatchEvent(\n        new TranslateEvent(\n          TranslateEventType.TRANSLATEEND,\n          features,\n          event.coordinate,\n          this.startCoordinate_,\n          event\n        )\n      );\n      // cleanup\n      this.startCoordinate_ = null;\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * Handle pointer drag events.\n   * @param {import(\"../MapBrowserEvent.js\").default} event Event.\n   */\n  handleDragEvent(event) {\n    if (this.lastCoordinate_) {\n      const newCoordinate = event.coordinate;\n      const deltaX = newCoordinate[0] - this.lastCoordinate_[0];\n      const deltaY = newCoordinate[1] - this.lastCoordinate_[1];\n\n      const features = this.features_ || new Collection([this.lastFeature_]);\n\n      features.forEach(function (feature) {\n        const geom = feature.getGeometry();\n        geom.translate(deltaX, deltaY);\n        feature.setGeometry(geom);\n      });\n\n      this.lastCoordinate_ = newCoordinate;\n\n      this.dispatchEvent(\n        new TranslateEvent(\n          TranslateEventType.TRANSLATING,\n          features,\n          newCoordinate,\n          this.startCoordinate_,\n          event\n        )\n      );\n    }\n  }\n\n  /**\n   * Handle pointer move events.\n   * @param {import(\"../MapBrowserEvent.js\").default} event Event.\n   */\n  handleMoveEvent(event) {\n    const elem = event.map.getViewport();\n\n    // Change the cursor to grab/grabbing if hovering any of the features managed\n    // by the interaction\n    if (this.featuresAtPixel_(event.pixel, event.map)) {\n      elem.classList.remove(this.lastCoordinate_ ? 'ol-grab' : 'ol-grabbing');\n      elem.classList.add(this.lastCoordinate_ ? 'ol-grabbing' : 'ol-grab');\n    } else {\n      elem.classList.remove('ol-grab', 'ol-grabbing');\n    }\n  }\n\n  /**\n   * Tests to see if the given coordinates intersects any of our selected\n   * features.\n   * @param {import(\"../pixel.js\").Pixel} pixel Pixel coordinate to test for intersection.\n   * @param {import(\"../Map.js\").default} map Map to test the intersection on.\n   * @return {import(\"../Feature.js\").default} Returns the feature found at the specified pixel\n   * coordinates.\n   * @private\n   */\n  featuresAtPixel_(pixel, map) {\n    return map.forEachFeatureAtPixel(\n      pixel,\n      function (feature, layer) {\n        if (this.filter_(feature, layer)) {\n          if (!this.features_ || this.features_.getArray().includes(feature)) {\n            return feature;\n          }\n        }\n      }.bind(this),\n      {\n        layerFilter: this.layerFilter_,\n        hitTolerance: this.hitTolerance_,\n      }\n    );\n  }\n\n  /**\n   * Returns the Hit-detection tolerance.\n   * @return {number} Hit tolerance in pixels.\n   * @api\n   */\n  getHitTolerance() {\n    return this.hitTolerance_;\n  }\n\n  /**\n   * Hit-detection tolerance. Pixels inside the radius around the given position\n   * will be checked for features.\n   * @param {number} hitTolerance Hit tolerance in pixels.\n   * @api\n   */\n  setHitTolerance(hitTolerance) {\n    this.hitTolerance_ = hitTolerance;\n  }\n\n  /**\n   * Remove the interaction from its current map and attach it to the new map.\n   * Subclasses may set up event handlers to get notified about changes to\n   * the map here.\n   * @param {import(\"../Map.js\").default} map Map.\n   */\n  setMap(map) {\n    const oldMap = this.getMap();\n    super.setMap(map);\n    this.updateState_(oldMap);\n  }\n\n  /**\n   * @private\n   */\n  handleActiveChanged_() {\n    this.updateState_(null);\n  }\n\n  /**\n   * @param {import(\"../Map.js\").default} oldMap Old map.\n   * @private\n   */\n  updateState_(oldMap) {\n    let map = this.getMap();\n    const active = this.getActive();\n    if (!map || !active) {\n      map = map || oldMap;\n      if (map) {\n        const elem = map.getViewport();\n        elem.classList.remove('ol-grab', 'ol-grabbing');\n      }\n    }\n  }\n}\n\nexport default Translate;\n","/**\n * @module ol/source/TileArcGISRest\n */\n\nimport TileImage from './TileImage.js';\nimport {appendParams} from '../uri.js';\nimport {createEmpty} from '../extent.js';\nimport {modulo} from '../math.js';\nimport {scale as scaleSize, toSize} from '../size.js';\nimport {hash as tileCoordHash} from '../tilecoord.js';\n\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions] Attributions.\n * @property {number} [cacheSize] Initial tile cache size. Will auto-grow to hold at least the number of tiles in the viewport.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images.  Note that\n * you must provide a `crossOrigin` value if you want to access pixel data with the Canvas renderer.\n * See https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\n * @property {boolean} [interpolate=true] Use interpolated values when resampling.  By default,\n * linear interpolation is used when resampling.  Set to false to use the nearest neighbor instead.\n * @property {Object<string,*>} [params] ArcGIS Rest parameters. This field is optional. Service defaults will be\n * used for any fields not specified. `FORMAT` is `PNG32` by default. `F` is `IMAGE` by\n * default. `TRANSPARENT` is `true` by default.  `BBOX`, `SIZE`, `BBOXSR`,\n * and `IMAGESR` will be set dynamically. Set `LAYERS` to\n * override the default service layer visibility. See\n * https://developers.arcgis.com/rest/services-reference/export-map.htm\n * for further reference.\n * @property {boolean} [hidpi=true] Use the `ol/Map#pixelRatio` value when requesting\n * the image from the remote server.\n * @property {import(\"../tilegrid/TileGrid.js\").default} [tileGrid] Tile grid. Base this on the resolutions,\n * tilesize and extent supported by the server.\n * If this is not defined, a default grid will be used: if there is a projection\n * extent, the grid will be based on that; if not, a grid based on a global\n * extent with origin at 0,0 will be used.\n * @property {import(\"../proj.js\").ProjectionLike} [projection] Projection. Default is the view projection.\n * The projection code must contain a numeric end portion separated by :\n * or the entire code must form a valid ArcGIS SpatialReference definition.\n * @property {number} [reprojectionErrorThreshold=0.5] Maximum allowed reprojection error (in pixels).\n * Higher values can increase reprojection performance, but decrease precision.\n * @property {import(\"../Tile.js\").LoadFunction} [tileLoadFunction] Optional function to load a tile given a URL.\n * The default is\n * ```js\n * function(imageTile, src) {\n *   imageTile.getImage().src = src;\n * };\n * ```\n * @property {string} [url] ArcGIS Rest service URL for a Map Service or Image Service. The\n * url should include /MapServer or /ImageServer.\n * @property {boolean} [wrapX=true] Whether to wrap the world horizontally.\n * @property {number} [transition] Duration of the opacity transition for rendering.  To disable the opacity\n * transition, pass `transition: 0`.\n * @property {Array<string>} [urls] ArcGIS Rest service urls. Use this instead of `url` when the ArcGIS\n * Service supports multiple urls for export requests.\n * @property {number|import(\"../array.js\").NearestDirectionFunction} [zDirection=0]\n * Choose whether to use tiles with a higher or lower zoom level when between integer\n * zoom levels. See {@link module:ol/tilegrid/TileGrid~TileGrid#getZForResolution}.\n */\n\n/**\n * @classdesc\n * Layer source for tile data from ArcGIS Rest services. Map and Image\n * Services are supported.\n *\n * For cached ArcGIS services, better performance is available using the\n * {@link module:ol/source/XYZ~XYZ} data source.\n * @api\n */\nclass TileArcGISRest extends TileImage {\n  /**\n   * @param {Options} [options] Tile ArcGIS Rest options.\n   */\n  constructor(options) {\n    options = options ? options : {};\n\n    super({\n      attributions: options.attributions,\n      cacheSize: options.cacheSize,\n      crossOrigin: options.crossOrigin,\n      interpolate: options.interpolate,\n      projection: options.projection,\n      reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n      tileGrid: options.tileGrid,\n      tileLoadFunction: options.tileLoadFunction,\n      url: options.url,\n      urls: options.urls,\n      wrapX: options.wrapX !== undefined ? options.wrapX : true,\n      transition: options.transition,\n      zDirection: options.zDirection,\n    });\n\n    /**\n     * @private\n     * @type {!Object}\n     */\n    this.params_ = options.params || {};\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.hidpi_ = options.hidpi !== undefined ? options.hidpi : true;\n\n    /**\n     * @private\n     * @type {import(\"../extent.js\").Extent}\n     */\n    this.tmpExtent_ = createEmpty();\n\n    this.setKey(this.getKeyForParams_());\n  }\n\n  /**\n   * @private\n   * @return {string} The key for the current params.\n   */\n  getKeyForParams_() {\n    let i = 0;\n    const res = [];\n    for (const key in this.params_) {\n      res[i++] = key + '-' + this.params_[key];\n    }\n    return res.join('/');\n  }\n\n  /**\n   * Get the user-provided params, i.e. those passed to the constructor through\n   * the \"params\" option, and possibly updated using the updateParams method.\n   * @return {Object} Params.\n   * @api\n   */\n  getParams() {\n    return this.params_;\n  }\n\n  /**\n   * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n   * @param {import(\"../size.js\").Size} tileSize Tile size.\n   * @param {import(\"../extent.js\").Extent} tileExtent Tile extent.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   * @param {Object} params Params.\n   * @return {string|undefined} Request URL.\n   * @private\n   */\n  getRequestUrl_(\n    tileCoord,\n    tileSize,\n    tileExtent,\n    pixelRatio,\n    projection,\n    params\n  ) {\n    const urls = this.urls;\n    if (!urls) {\n      return undefined;\n    }\n\n    // ArcGIS Server only wants the numeric portion of the projection ID.\n    // (if there is no numeric portion the entire projection code must\n    // form a valid ArcGIS SpatialReference definition).\n    const srid = projection\n      .getCode()\n      .split(/:(?=\\d+$)/)\n      .pop();\n\n    params['SIZE'] = tileSize[0] + ',' + tileSize[1];\n    params['BBOX'] = tileExtent.join(',');\n    params['BBOXSR'] = srid;\n    params['IMAGESR'] = srid;\n    params['DPI'] = Math.round(\n      params['DPI'] ? params['DPI'] * pixelRatio : 90 * pixelRatio\n    );\n\n    let url;\n    if (urls.length == 1) {\n      url = urls[0];\n    } else {\n      const index = modulo(tileCoordHash(tileCoord), urls.length);\n      url = urls[index];\n    }\n\n    const modifiedUrl = url\n      .replace(/MapServer\\/?$/, 'MapServer/export')\n      .replace(/ImageServer\\/?$/, 'ImageServer/exportImage');\n    return appendParams(modifiedUrl, params);\n  }\n\n  /**\n   * Get the tile pixel ratio for this source.\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {number} Tile pixel ratio.\n   */\n  getTilePixelRatio(pixelRatio) {\n    return this.hidpi_ ? pixelRatio : 1;\n  }\n\n  /**\n   * Update the user-provided params.\n   * @param {Object} params Params.\n   * @api\n   */\n  updateParams(params) {\n    Object.assign(this.params_, params);\n    this.setKey(this.getKeyForParams_());\n  }\n\n  /**\n   * @param {import(\"../tilecoord.js\").TileCoord} tileCoord The tile coordinate\n   * @param {number} pixelRatio The pixel ratio\n   * @param {import(\"../proj/Projection.js\").default} projection The projection\n   * @return {string|undefined} The tile URL\n   * @override\n   */\n  tileUrlFunction(tileCoord, pixelRatio, projection) {\n    let tileGrid = this.getTileGrid();\n    if (!tileGrid) {\n      tileGrid = this.getTileGridForProjection(projection);\n    }\n\n    if (tileGrid.getResolutions().length <= tileCoord[0]) {\n      return undefined;\n    }\n\n    if (pixelRatio != 1 && !this.hidpi_) {\n      pixelRatio = 1;\n    }\n\n    const tileExtent = tileGrid.getTileCoordExtent(tileCoord, this.tmpExtent_);\n    let tileSize = toSize(tileGrid.getTileSize(tileCoord[0]), this.tmpSize);\n\n    if (pixelRatio != 1) {\n      tileSize = scaleSize(tileSize, pixelRatio, this.tmpSize);\n    }\n\n    // Apply default params and override with user specified values.\n    const baseParams = {\n      'F': 'image',\n      'FORMAT': 'PNG32',\n      'TRANSPARENT': true,\n    };\n    Object.assign(baseParams, this.params_);\n\n    return this.getRequestUrl_(\n      tileCoord,\n      tileSize,\n      tileExtent,\n      pixelRatio,\n      projection,\n      baseParams\n    );\n  }\n}\n\nexport default TileArcGISRest;\n"],"names":["TranslateEventType","TranslateEvent","type","features","coordinate","startCoordinate","mapBrowserEvent","Event","Translate","options","layerFilter","on","once","un","lastCoordinate_","startCoordinate_","features_","undefined","layers","layer","includes","TRUE","layerFilter_","filter_","filter","hitTolerance_","hitTolerance","condition_","condition","always","lastFeature_","addChangeListener","InteractionProperty","handleActiveChanged_","event","originalEvent","this","featuresAtPixel_","pixel","map","handleMoveEvent","Collection","dispatchEvent","newCoordinate","deltaX","deltaY","forEach","feature","geom","getGeometry","translate","setGeometry","elem","getViewport","classList","remove","add","forEachFeatureAtPixel","getArray","bind","oldMap","getMap","updateState_","active","getActive","PointerInteraction","TileArcGISRest","attributions","cacheSize","crossOrigin","interpolate","projection","reprojectionErrorThreshold","tileGrid","tileLoadFunction","url","urls","wrapX","transition","zDirection","params_","params","hidpi_","hidpi","tmpExtent_","createEmpty","setKey","getKeyForParams_","i","res","key","join","tileCoord","tileSize","tileExtent","pixelRatio","srid","getCode","split","pop","Math","round","length","modulo","tileCoordHash","modifiedUrl","replace","appendParams","Object","assign","getTileGrid","getTileGridForProjection","getResolutions","getTileCoordExtent","toSize","getTileSize","tmpSize","scaleSize","baseParams","getRequestUrl_","TileImage"],"sourceRoot":""}