{"version":3,"file":"static/js/1306.655fc396.chunk.js","mappings":"sRAYMA,EAAAA,SAAAA,IAAAA,EAAAA,EAAAA,GAAAA,EAAAA,GAAAA,IAAAA,GAAAA,EAAAA,EAAAA,GAAAA,GAAAA,SAAAA,IAAAA,IAAAA,GAAAA,EAAAA,EAAAA,GAAAA,KAAAA,GAAAA,IAAAA,IAAAA,EAAAA,UAAAA,OAAAA,EAAAA,IAAAA,MAAAA,GAAAA,EAAAA,EAAAA,EAAAA,EAAAA,IAAAA,EAAAA,GAAAA,UAAAA,GACI,OADJA,EAAAA,EAAAA,KAAAA,MAAAA,EAAAA,CAAAA,MAAAA,OAAAA,KACJC,MAAQ,CACNC,MAAM,GADA,EA4EP,OA5EO,yCAMR,WACE,MAA4BC,KAAKC,MAAzBC,EAAR,EAAQA,OAAQC,EAAhB,EAAgBA,QACVC,EAAMJ,KAAKK,MAAMH,EAAQC,EAAQG,iBACvCN,KAAKO,KAAKH,EACX,sBAED,SAAMI,EAAKC,GAoBT,OAnBID,GAAsB,kBAARA,IACfA,EAAIE,MAAM,aAAe,IAAIC,SAAQ,SAACC,GAerCJ,EAAMA,EAAIK,QAAQD,EAdlB,SAAgBE,EAAGC,GAEjB,QADAA,EAAIA,EAAEF,QAAQ,IAAK,IAAIA,QAAQ,IAAK,IAAIG,MAAM,MACpCC,QACR,KAAK,EACH,OAAOH,EAAEC,EAAE,KAAO,GACpB,KAAK,EACH,OAAOD,EAAEC,EAAE,IAAIA,EAAE,KAAO,GAC1B,KAAK,EACH,OAAOD,EAAEC,EAAE,IAAIA,EAAE,IAAIA,EAAE,KAAO,GAChC,QACE,MAAO,GAEZ,CAE2BG,CAAOT,EAAYG,GAChD,IAEIJ,CACR,qBAED,SAAKJ,GAAM,IAAD,QACRe,EAAAA,EAAAA,QAAOf,GAAKgB,MAAK,SAACC,GAChBA,EAASC,OAAOF,MAAK,SAACG,GACpB,IAAMxB,EAAOwB,EAAIC,SAASC,KAAI,SAACtB,GAC7B,MAAO,CACLuB,KAAMvB,EAAQM,WAAWkB,SAASX,MAAM,KAAK,GAC7CY,MAAOzB,EAAQM,WAAWmB,MAE7B,IACD,EAAKC,SAAS,CACZ9B,KAAMA,GAET,GACF,GACF,uBAED,WACE,OAAIC,KAAKF,MAAMC,MAEX,UAAC,IAAD,CACE+B,MAAO,IACPC,OAAQ,IACRhC,KAAMC,KAAKF,MAAMC,KACjBiC,OAAQ,CACNC,IAAK,EACLC,MAAO,GACPC,KAAM,GACNC,OAAQ,GARZ,WAWE,SAAC,IAAD,CAAeC,gBAAgB,SAC/B,SAAC,IAAD,CAAOC,QAAQ,UACf,SAAC,IAAD,KACA,SAAC,IAAD,KACA,SAAC,IAAD,KACA,SAAC,IAAD,CAAMC,KAAK,WAAWD,QAAQ,QAAQE,OAAO,gBAI1C,mCAEV,OA7EG3C,CAAoB4C,EAAAA,eAgF1B,W","sources":["components/Diagram.js"],"sourcesContent":["import React from \"react\";\nimport {\n  LineChart,\n  Line,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  Legend,\n} from \"recharts\";\nimport { hfetch } from \"utils/FetchWrapper\";\n\nclass DiagramView extends React.PureComponent {\n  state = {\n    data: false,\n  };\n\n  // TODO: Add propTypes\n\n  componentDidMount() {\n    const { source, feature } = this.props;\n    const url = this.parse(source, feature.getProperties());\n    this.load(url);\n  }\n\n  parse(str, properties) {\n    if (str && typeof str === \"string\") {\n      (str.match(/{(.*?)}/g) || []).forEach((property) => {\n        function lookup(o, s) {\n          s = s.replace(\"{\", \"\").replace(\"}\", \"\").split(\".\");\n          switch (s.length) {\n            case 1:\n              return o[s[0]] || \"\";\n            case 2:\n              return o[s[0]][s[1]] || \"\";\n            case 3:\n              return o[s[0]][s[1]][s[2]] || \"\";\n            default:\n              return \"\";\n          }\n        }\n\n        str = str.replace(property, lookup(properties, property));\n      });\n    }\n    return str;\n  }\n\n  load(url) {\n    hfetch(url).then((response) => {\n      response.json().then((rsp) => {\n        const data = rsp.features.map((feature) => {\n          return {\n            date: feature.properties.datetime.split(\"T\")[0],\n            value: feature.properties.value,\n          };\n        });\n        this.setState({\n          data: data,\n        });\n      });\n    });\n  }\n\n  render() {\n    if (this.state.data) {\n      return (\n        <LineChart\n          width={400}\n          height={300}\n          data={this.state.data}\n          margin={{\n            top: 5,\n            right: 30,\n            left: 20,\n            bottom: 5,\n          }}\n        >\n          <CartesianGrid strokeDasharray=\"3 3\" />\n          <XAxis dataKey=\"date\" />\n          <YAxis />\n          <Tooltip />\n          <Legend />\n          <Line type=\"monotone\" dataKey=\"value\" stroke=\"#82ca9d\" />\n        </LineChart>\n      );\n    } else {\n      return <div>Laddar</div>;\n    }\n  }\n}\n\nexport default DiagramView;\n"],"names":["DiagramView","state","data","this","props","source","feature","url","parse","getProperties","load","str","properties","match","forEach","property","replace","o","s","split","length","lookup","hfetch","then","response","json","rsp","features","map","date","datetime","value","setState","width","height","margin","top","right","left","bottom","strokeDasharray","dataKey","type","stroke","React"],"sourceRoot":""}