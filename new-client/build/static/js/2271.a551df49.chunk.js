"use strict";(self.webpackChunkhajk_client=self.webpackChunkhajk_client||[]).push([[2271,8619,3151,5532,5046,2670],{28619:function(e,t,i){i.r(t);var o=i(15671),r=i(43144),n=i(60136),a=i(29388),s=i(4942),l=i(72791),c=i(76863),u=i(48928),h=i(73978),d=i(58487),p=i(16398),g=i(80184),f=(0,c.ZP)(u.Z)((function(e){var t=e.theme;return(0,s.Z)({marginBottom:t.spacing(1),width:"210px"},t.breakpoints.down("sm"),{boxShadow:"none",borderBottom:"1px solid #ccc",borderRadius:0,margin:0,width:"100%",justifyContent:"left"})})),m=(0,c.ZP)(h.Z)((function(e){return{background:e.theme.palette.text.primary}})),v=function(e){(0,n.Z)(i,e);var t=(0,a.Z)(i);function i(){var e;(0,o.Z)(this,i);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))).state={open:!1,text:""},e}return(0,r.Z)(i,[{key:"render",value:function(){var e=this.props,t=e.abstract,i=e.icon,o=e.onClick,r=e.title;return(0,g.jsx)(f,{onClick:o,children:(0,g.jsx)(d.Z,{children:(0,g.jsx)(p.Z,{avatar:(0,g.jsx)(m,{children:i}),title:r,subheader:t})})})}}]),i}(l.PureComponent);v.defaultProps={abstract:"Beskrivning saknas",title:"Titel saknas"},t.default=v},73151:function(e,t,i){i.r(t);var o=i(15671),r=i(43144),n=i(97326),a=i(60136),s=i(29388),l=i(72791),c=i(85286),u=i(54164),h=i(66788),d=i(35110),p=i(65514),g=i(4346),f=i(26191),m=i(28619),v=i(74599),y=i(80184),w=function(e){(0,a.Z)(i,e);var t=(0,s.Z)(i);function i(e){var r;(0,o.Z)(this,i),(r=t.call(this,e)).handleButtonClick=function(e){r.showWindow({hideOtherPluginWindows:!0,runCallback:!0}),r.props.app.globalObserver.publish("core.onlyHideDrawerIfNeeded")},r.showWindow=function(e){var t=e.hideOtherPluginWindows||!0,i=e.runCallback||!0;if(r.props.app.activeTool=r.type,r.props.app.globalObserver.publish("analytics.trackEvent",{eventName:"pluginShown",pluginName:r.type,activeMap:r.props.app.config.activeMap}),!0===r.state.windowVisible)return null;!0===t&&r.props.app.onWindowOpen((0,n.Z)(r)),r.setState({windowVisible:!0},(function(){!0===i&&"function"===typeof r.props.custom.onWindowShow&&r.props.custom.onWindowShow()}))},r.closeWindow=function(){r.type===r.props.app.activeTool&&(r.props.app.activeTool=void 0),r.setState({windowVisible:!1},(function(){"function"===typeof r.props.custom.onWindowHide&&r.props.custom.onWindowHide()}))},r.type=e.type.toLowerCase()||void 0,r.description=e.options.description||e.custom.description;var a=!1===r.props.app.config.mapConfig.map.clean&&(c.isMobile?e.options.visibleAtStartMobile:e.options.visibleAtStart)||!1;a&&r.props.app.globalObserver.publish("analytics.trackEvent",{eventName:"pluginShown",pluginName:r.type,activeMap:r.props.app.config.activeMap}),r.state={title:e.options.title||e.custom.title||"Unnamed plugin",color:e.options.color||e.custom.color||null,windowVisible:a},r.title=e.options.title||e.custom.title||"Unnamed plugin",r.width=e.options.width||e.custom.width||400,r.height=e.options.height||e.custom.height||"auto",r.position=e.options.position||e.custom.position||"left",e.app.registerWindowPlugin((0,n.Z)(r));var s="".concat(r.type,".showWindow");e.app.globalObserver.subscribe(s,(function(e){r.showWindow(e)}));var l="".concat(r.type,".closeWindow");return e.app.globalObserver.subscribe(l,(function(){r.closeWindow()})),r}return(0,r.Z)(i,[{key:"componentDidUpdate",value:function(e){e.custom.title!==this.props.custom.title&&this.setState({title:this.props.custom.title}),e.custom.color!==this.props.custom.color&&this.setState({color:this.props.custom.color})}},{key:"pluginIsWidget",value:function(e){return["left","right"].includes(e)}},{key:"renderWindow",value:function(e){var t=this.props.options.target;return"function"===typeof(null===e||void 0===e?void 0:e.render)?e.render():(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(f.default,{globalObserver:this.props.app.globalObserver,title:this.state.title,color:this.state.color,onClose:this.closeWindow,open:this.state.windowVisible,onResize:this.props.custom.onResize,onMaximize:this.props.custom.onMaximize,onMinimize:this.props.custom.onMinimize,draggingEnabled:this.props.custom.draggingEnabled,customPanelHeaderButtons:this.props.custom.customPanelHeaderButtons,resizingEnabled:this.props.custom.resizingEnabled,scrollable:this.props.custom.scrollable,allowMaximizedWindow:this.props.custom.allowMaximizedWindow,disablePadding:this.props.custom.disablePadding,width:this.width,height:this.height,position:this.position,mode:"window",layerswitcherConfig:this.props.app.config.mapConfig.tools.find((function(e){return"layerswitcher"===e.type})),children:l.cloneElement(this.props.children,{windowVisible:this.state.windowVisible})}),("toolbar"===t||this.pluginIsWidget(t))&&this.renderDrawerButton(),this.pluginIsWidget(t)&&this.renderWidgetButton("".concat(t,"-column")),"control"===t&&this.renderControlButton()]})}},{key:"renderDrawerButton",value:function(){return(0,u.createPortal)((0,y.jsx)(h.Z,{mdUp:this.pluginIsWidget(this.props.options.target),children:(0,y.jsxs)(d.ZP,{button:!0,divider:!0,selected:this.state.windowVisible,onClick:this.handleButtonClick,children:[(0,y.jsx)(p.Z,{children:this.props.custom.icon}),(0,y.jsx)(g.Z,{primary:this.title})]})}),document.getElementById("plugin-buttons"))}},{key:"renderWidgetButton",value:function(e){return(0,u.createPortal)((0,y.jsx)(h.Z,{mdDown:!0,children:(0,y.jsx)(m.default,{icon:this.props.custom.icon,onClick:this.handleButtonClick,title:this.title,abstract:this.description})}),document.getElementById(e))}},{key:"renderControlButton",value:function(){return(0,u.createPortal)((0,y.jsx)(v.default,{icon:this.props.custom.icon,onClick:this.handleButtonClick,title:this.title,abstract:this.description}),document.getElementById("plugin-control-buttons"))}},{key:"render",value:function(){return!0!==this.props.app.config.mapConfig.map.clean&&this.renderWindow(this.props.custom)}}]),i}(l.PureComponent);t.default=w},69122:function(e,t,i){i.r(t);var o=i(1413),r=i(15671),n=i(43144),a=i(60136),s=i(29388),l=i(72791),c=i(73151),u=i(41286),h=i(72830),d=i(5532),p=i(85194),g=i.n(p),f=(i(28452),i(80184)),m=function(e){(0,a.Z)(i,e);var t=(0,s.Z)(i);function i(e){var o;return(0,r.Z)(this,i),(o=t.call(this,e)).onWindowShow=function(){o.drawModel.setActive(!0),o.drawModel.setDrawMethod()},o.onWindowHide=function(){o.drawModel.setActive(!1)},o.localObserver=g()(),o.globalObserver=e.app.globalObserver,o.drawModel=new d.default({map:e.map,app:e.app,options:e.options,localObserver:o.localObserver}),o}return(0,n.Z)(i,[{key:"render",value:function(){return(0,f.jsx)(c.default,(0,o.Z)((0,o.Z)({},this.props),{},{type:"Draw",custom:{icon:(0,f.jsx)(u.Z,{}),title:"Rita",description:"Rita, m\xe4t, importera och exportera",height:"dynamic",width:285,top:void 0,left:void 0,onWindowShow:this.onWindowShow,onWindowHide:this.onWindowHide},children:(0,f.jsx)(h.default,{localObserver:this.localObserver,globalObserver:this.globalObserver,model:this.drawModel})}))}}]),i}(l.PureComponent);t.default=m},5532:function(e,t,i){i.r(t);var o=i(93433),r=i(15671),n=i(43144),a=i(90927),s=i(66233),l=i(18029),c=i(5400),u=i(69236),h=i(64665),d=i(5426),p=i(34951),g=i(35844),f=i(56957),m=i(88490),v=i(68789),y=i(56134),w=i(79717),b=i(489),P=i(24673),Z=i(42670),C=i(43572),k=i(75690),x=i(64802),T=function(){function e(t){var i=this;(0,r.Z)(this,e),this.getStyle=function(e,t){var r=e.getGeometryName();function n(){var e=function(e,t){return e.map((function(e){return t*e}))},t=p.call(this),i=[12,7],o=[2,7];switch(d.call(this)){case"dash":return t>3?e(i,2):i;case"dot":return t>3?e(o,2):o;default:return}}function d(){switch(r){case"Polygon":return this.polygonLineStyle;case"Circle":return this.circleLineStyle;case"Square":return this.squareLineStyle;default:return this.lineStyle}}function p(){switch(r){case"Polygon":return this.polygonLineWidth;case"Circle":return this.circleLineWidth;case"Square":return this.squareLineWidth;default:return this.lineWidth}}function g(){if(t)return t.strokeColor;switch(r){case"Polygon":return this.polygonLineColor;case"Circle":return this.circleLineColor;case"Square":return this.squareLineColor;default:return this.lineColor}}var f=e.getGeometryName();return[new h.ZP({stroke:new s.Z({color:"rgba(255, 255, 255, 0.5)",width:"Polygon"===f?i.polygonLineWidth+2:i.lineWidth+2})}),new h.ZP({fill:function(){function e(e){var t=e.replace("#","");3===t.length&&(t=(0,o.Z)(t).reduce((function(e,t){return e+(t+t)}),""));var i=parseInt(t,16),r=i>>8&255,n=255&i;return"rgb(".concat(i>>16&255,", ").concat(r,", ").concat(n,")")}var i=t?t.fillColor:function(){switch(r){case"Circle":return e(this.circleFillColor).replace("rgb","rgba").replace(")",", ".concat(this.circleFillOpacity,")"));case"Polygon":return e(this.polygonFillColor).replace("rgb","rgba").replace(")",", ".concat(this.polygonFillOpacity,")"));case"Square":return e(this.squareFillColor).replace("rgb","rgba").replace(")",", ".concat(this.squareFillOpacity,")"));default:return}}.call(this);return new a.Z({color:i})}.call(i),stroke:function(){var e=t?t.strokeColor:g.call(this),i=t?t.strokeWidth:p.call(this),o=t?t.strokeDash:n.call(this);return new s.Z({color:e,width:i,lineDash:o})}.call(i),image:function(){var e="Text"===f?0:t?t.pointRadius:this.pointRadius,i=t&&t.image||this.markerImg,o=new l.Z({anchor:[.5,1],anchorXUnits:"fraction",anchorYUnits:"fraction",src:i}),r=new c.Z({radius:e,fill:new a.Z({color:t?t.pointColor:this.pointColor}),stroke:new s.Z({color:"rgb(255, 255, 255)",width:2})});return t?t.image?o:r:this.pointSymbol&&"Text"!==f?o:r}.call(i),text:function(){var i=this,o=t?t.text:this.getLabelText(e);return"Text"===f?new u.Z({textAlign:"center",textBaseline:"middle",font:"".concat(this.fontSize,"px sans-serif"),text:o,fill:new a.Z({color:this.fontTextColor}),stroke:this.fontStroke?null:new s.Z({color:this.fontBackColor,width:1}),offsetX:0,offsetY:function(){var e=-15;return i.pointSymbol&&(e=-40),"Text"===f&&(e=0),e}(),rotation:0,scale:1.4}):new u.Z({textAlign:"center",textBaseline:"middle",font:"12pt sans-serif",fill:new a.Z({color:"#FFF"}),text:o,overflow:!0,stroke:new s.Z({color:"rgba(0, 0, 0, 0.5)",width:3}),offsetX:0,offsetY:-10,rotation:0,scale:1})}.call(i)})]},this.createStyle=function(e,t){var o=e&&"Text"===e.getProperties().type;return[new h.ZP({fill:new a.Z({color:"rgba(255, 255, 255, 0.3)"}),stroke:new s.Z({color:"rgba(0, 0, 0, 0.5)",width:3}),image:o?null:new c.Z({radius:5,stroke:new s.Z({color:"rgba(0, 0, 0, 0.7)"}),fill:new a.Z({color:"rgba(255, 255, 255, 0.2)"})}),text:new u.Z({textAlign:"center",textBaseline:"middle",font:"12pt sans-serif",fill:new a.Z({color:"#FFF"}),text:e&&i.getLabelText(e),overflow:!0,stroke:new s.Z({color:"rgba(0, 0, 0, 0.5)",width:3}),offsetX:0,offsetY:0,rotation:0,scale:1})})]},this.clear=function(){i.source.clear(),i.select&&i.select.getFeatures().clear(),i.drawTooltip.setPosition(void 0)},this.handleDrawStart=function(e){i.circleRadius>0&&"Circle"===e.feature.getGeometryName()&&(e.feature.getGeometry().setRadius(i.circleRadius),i.draw.finishDrawing()),e.feature.getGeometry().on("change",(function(t){var o,r="",n=void 0;i.displayText&&(i.setFeaturePropertiesFromGeometry(e.feature),"edit"===i.drawMethod&&i.updateText(e.feature),"add"===i.drawMethod&&(i.pointerPosition&&(o=i.pointerPosition.coordinate),t.target instanceof g.Z&&(r=i.formatLabel("length",t.target.getLength()),n=t.target.getLastCoordinate()),t.target instanceof f.ZP&&(r=i.formatLabel("area",t.target.getArea()),n=o||t.target.getFirstCoordinate()),i.drawTooltipElement.innerHTML=r,i.drawTooltip.setPosition(n)))}))},this.handleDrawEnd=function(e){i.text&&i.localObserver.publish("dialog",e.feature),i.setFeaturePropertiesFromGeometry(e.feature),i.drawTooltip.setPosition(void 0),e.feature.setStyle(i.getStyle(e.feature))},this.removeSelected=function(e){var t=!0;i.map.forEachFeatureAtPixel(e.pixel,(function(e){!0===e.getProperties().user&&t&&i.source.removeFeature(e),t=!1}))},this.import=function(e,t){var o=new C.ZP,r=[],n=!1;try{r=o.readFeatures(e)}catch(s){return t(s)}if(!(r.length>0))return t("no-features-found");if(r.forEach((function(e){i.tanslateImportedFeature(e)})),i.source.addFeatures(r),n=i.calculateExtent(r)){var a=i.map.getSize();i.map.getView().fit(n,a)}},this.export=function(){try{new Blob}catch(r){return void console.info("KML export not supported on current platform.")}var e,t=i.source.getFeatures(),o=[];t.forEach((function(e){var t=e.clone(),r=!1;if(t.getGeometry()instanceof m.Z){var n=(0,f.Bb)(e.getGeometry(),96);t.setGeometry(n),r=e.getGeometry().getRadius()}t.getGeometry().transform(i.map.getView().getProjection(),"EPSG:4326"),t.getStyle()[1]&&t.setProperties({style:JSON.stringify(i.extractStyle(t.getStyle()[1]||t.getStyle()[0],r)),geometryType:"geometry"===t.getGeometryName()?t.getProperties().geometryType:t.getGeometryName()}),o.push(t)})),t.length>0&&(e=(0,k.createXML)(o,"ritobjekt"),(0,x.saveAs)(new Blob([e],{type:"application/vnd.google-earth.kml+xml;charset=utf-8"}),"Ritexport - ".concat((new Date).toLocaleString(),".kml")))},this.editText=function(e){i.map.forEachFeatureAtPixel(e.pixel,(function(e){e.getProperties().type&&"Text"===e.getProperties().type&&i.localObserver.publish("dialog",e)}))},this.map=t.map,this.app=t.app,this.options=t.options,this.localObserver=t.localObserver,this.globalObserver=t.app.globalObserver,this.source=new d.Z,this.vector=new p.Z({layerType:"system",zIndex:5e3,name:"pluginDraw",caption:"Draw layer",source:this.source}),this.map.addLayer(this.vector),this.type="LineString",this.displayText=!1,this.createDrawTooltip(),this.fontSize="10",this.fontTextColor="#000000",this.fontBackColor="#FFFFFF",this.fontStroke=!1,this.pointText="Text",this.pointColor="#009CE0",this.pointRadius=7,this.lineColor="#009CE0",this.lineWidth=3,this.lineStyle="solid",this.circleFillColor="#FFF",this.circleLineColor="#009CE0",this.circleFillOpacity=.5,this.circleLineStyle="solid",this.circleLineWidth=3,this.circleRadius=0,this.polygonLineColor="#009CE0",this.polygonLineWidth=3,this.polygonLineStyle="solid",this.polygonFillColor="#FFF",this.polygonFillOpacity=.5,this.squareFillColor="#FFF",this.squareLineColor="#009CE0",this.squareFillOpacity=.5,this.squareLineStyle="solid",this.squareLineWidth=3,this.drawMethod="add",this.pointSettings="point",this.markerImg="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAQAAABIkb+zAAADpElEQVR4Ae3aA9DsSBQF4DNa2+ZvZNL3lNa2d0tr24W1bdu2bdu2beO5l8/InX/6JpmqfKdcgz4dA4VCoVAohNQ7mSwrB8k5cjOf4gcyiL/zA3lcbpZzeIAsyxpyrMLV5Ab+Tj+J/C7XcTVUkDcLTCG7yWf0ushnsnvb5MiNqtuZX9I3mC+5A6rIHtfme/QDzHtuTWSqIifSNxc5IbMtgtPLffTNR+7j9EhffW6+TR8ob0XzIF2cTz6nDxf5nPMhPV0z8336wHm/a2akgzU+TW+Qp1M6TvMieqNcBHvcgN4wG8BW2+TyuWUB+dz4FEP2obeN7Gt76PrNvMBvhoc1OZbePnKM2e5TfqVPIb8Y7U5lHf0gZJBc5TaJ43iGvxO7TeQqGUT9t9eBBblKPYR73PwYh5ufd6sLXA0DJf6kHMCRmLCSHE6vyk8oIbR4MeXsHY5JcEfQaxIvhtDcnrqVJ2HuSryHXpG9EJqcr9l0k8/r++ZVbc7nITR5RFHgMijIZYpfegSh8YNQp2Ka00H5EKHxe/qkRJ1QiDoVU/E9QpMR9EnpnBYKndMqlsBwhMY/6JPSNh0U2qajT8wfCI2f0CfF9UDB9SgKfILQ+EKaGzFfQGiqA9AVUOAVqgNiaHK66kC2IBJEC2oOZHI6QpPNdLcJk04ldLcjZTOEVu9Vn4tOAo+i16Tei+DK/KPJ89GSHEavyh8oIzy5o5kLmv6FeI/2+3InLHCrRi8pXT2egdO7uttEruIQenW2MrqlKyPo7SMjemeCDT5An0IegBW3XSoFtoeVaGoZZD18GcSpYEcuNC9wISzFi1oXiBeFLb5tOv/vwppsZlpgM5irykdmBT5GFfbcFlYF3BYwYr8M7OfffjuQzZGaMt8MXuAtlJEet17oAm49pEteClrgFaTNLR/0+LsC0sdrgxW4FlnonSPMU0v5tW92ZIPb257/2yvJ403P/xMoITtRJ4c1VWBY1IlsydFNzf/RyNo8U/KTARf4dJ4pkb14rQHv/ddCPvCKARW4AnnRNh2/aHj4X7RNh/yIl260gFsK+dLYW9RyEvKGNXlOXeB51pA/9bn5nWr437u5kE/x0jI8+RG2WxL5JQcmFjgQuVbmU5Ms8DTKyLe+eeWHic7+j9E8yD+uOOEtQYZzRbQG2W2CBXaDHfsX1OR8tJSKPDnW8J9EBa0lmk2+HjX8r6PZ0Hoo/z8bHkJBa5Kt6ella7QuHsWjYKZQKBQKhb8AaFXSW3c/idsAAAAASUVORK5CYII=",this.sketchStyle=[new h.ZP({fill:new a.Z({color:"rgba(255, 255, 255, 0.5)"}),stroke:new s.Z({color:"rgba(0, 0, 0, 0.5)",width:4}),image:new c.Z({radius:6,fill:new a.Z({color:"rgba(0, 0, 0, 0.5)"}),stroke:new s.Z({color:"rgba(255, 255, 255, 0.5)",width:2})})})],this.localObserver.subscribe("update",(function(){i.redraw()}))}return(0,n.Z)(e,[{key:"redraw",value:function(){var e=this;this.vector.changed(),this.source.getFeatures().forEach((function(t){e.updateText(t)}))}},{key:"updateText",value:function(e){e.getStyle()[1].getText().setText(this.getLabelText(e))}},{key:"tanslateImportedFeature",value:function(e){var t=e.getGeometry().getCoordinates(),i=e.getGeometry().getType(),o=[];e.setProperties({user:!0}),e.getProperties().geometryType&&"Text"!==e.getProperties().geometryType&&e.setProperties({text:""}),"LineString"===i?(t.forEach((function(e,t){var i=[];e.forEach((function(e){0!==e&&i.push(e)})),o.push(i)})),e.getGeometry().setCoordinates(o)):"Polygon"===i&&(t.forEach((function(e,t){o[t]=[],e.forEach((function(e,i){var r=[];e.forEach((function(e){0!==e&&r.push(e)})),o[t].push(r)}))})),e.getGeometry().setCoordinates(o)),e.getGeometry().transform("EPSG:4326",this.map.getView().getProjection()),this.setStyleFromProperties(e),"Circle"===e.getProperties().geometryType&&e.getProperties().style&&e.setProperties({radius:JSON.parse(e.getProperties().style).radius})}},{key:"extractStyle",value:function(e,t){var i={text:"",image:"",pointRadius:0,pointColor:"",fillColor:"",strokeColor:"",strokeWidth:"",strokeDash:""};return i.text=e.getText()?e.getText().getText():"",i.image=e.getImage()instanceof l.Z?e.getImage().getSrc():"",i.pointRadius=e.getImage()instanceof c.Z?e.getImage().getRadius():"",t&&(i.radius=t),i.pointColor=e.getImage()instanceof c.Z?e.getImage().getFill().getColor():"",i.fillColor=e.getFill().getColor(),i.strokeColor=e.getStroke().getColor(),i.strokeWidth=e.getStroke().getWidth(),i.strokeDash=e.getStroke().getLineDash(),i}},{key:"setType",value:function(e){this.type=e,this.removeInteraction(),this.addInteraction(e)}},{key:"setEditActive",value:function(){var e=new v.Z;this.source.getFeatures().forEach((function(t){e.push(t)})),this.edit=new w.Z({features:e}),this.map.addInteraction(this.edit),this.map.snapHelper.add("draw")}},{key:"setMoveActive",value:function(){this.select=new b.Z,this.move=new P.Z({features:this.select.getFeatures()}),this.map.addInteraction(this.move),this.map.addInteraction(this.select),this.map.snapHelper.add("draw")}},{key:"setDrawMethod",value:function(e){e&&(this.drawMethod=e),this.removeInteraction(),"remove"===this.drawMethod&&this.map.on("singleclick",this.removeSelected),"add"===this.drawMethod&&(this.text&&(this.type="Text"),this.setType(this.type)),"edit"===this.drawMethod&&(this.setEditActive(),this.map.on("singleclick",this.editText)),"move"===this.drawMethod&&this.setMoveActive()}},{key:"removeInteraction",value:function(){this.drawTooltip.setPosition(void 0),this.map.un("singleclick",this.removeSelected),this.map.un("singleclick",this.editText),this.draw&&(this.map.snapHelper.delete("draw"),this.map.removeInteraction(this.draw)),this.edit&&(this.map.snapHelper.delete("draw"),this.map.removeInteraction(this.edit)),this.move&&(this.map.snapHelper.delete("draw"),this.map.removeInteraction(this.move)),this.select&&(this.select.getFeatures().forEach((function(e){e.get("_s")&&e.setStyle(e.get("_s"))})),this.map.snapHelper.delete("draw"),this.map.removeInteraction(this.select))}},{key:"setFeaturePropertiesFromGeometry",value:function(e){if(e){var t,i,o=0,r=0,n=0,a={n:0,e:0};switch(i=(t=e.getGeometry()).getType()){case"Point":a={n:Math.round(t.getCoordinates()[1]),e:Math.round(t.getCoordinates()[0])};break;case"LineString":o=t.getLength()<1e3?Math.round(10*t.getLength())/10:Math.round(t.getLength());break;case"Polygon":n=Math.round(t.getArea());break;case"Circle":r=Math.round(t.getRadius())}e.setProperties({type:i,user:!0,length:o,area:n,radius:r,position:a})}}},{key:"setFeaturePropertiesFromText",value:function(e,t){e&&e.setProperties({type:"Text",user:!0,text:t})}},{key:"formatLabel",value:function(e,t){var i;if("text"===e&&(i=t),"point"===e&&(i="Nord: "+t.n+" \xd6st: "+t.e),"number"===typeof t&&(t="length"===e&&t<1e3?Math.round(10*t)/10:Math.round(t)),"circle"===e){var o=" m";t>=1e3&&(o=" km",t/=1e3),i="R = "+t+o+" \nA = "+Math.round(t*t*Math.PI*1e3)/1e3+" m\xb2"}if("area"===e){var r=" m\xb2";t>=1e6&&(r=" km\xb2",t=Math.round(t/1e6*1e3)/1e3),i=t+r}if("length"===e){var n=" m";t>=1e3&&(n=" km",t/=1e3),i=t+n}return i}},{key:"createDrawTooltip",value:function(){this.drawTooltipElement&&this.drawTooltipElement.parentNode.removeChild(this.drawTooltipElement),this.drawTooltipElement=document.createElement("div"),this.drawTooltipElement.className="tooltip-draw tooltip-Draw",this.drawTooltip=new Z.Z({element:this.drawTooltipElement,offset:[0,-15],positioning:"bottom-center"}),this.map.addOverlay(this.drawTooltip)}},{key:"getLabelText",value:function(e){var t=e.getProperties(),i=e.getGeometryName();switch("geometry"===i&&(i=e.getProperties().geometryType),i){case"LineString":return this.displayText?this.formatLabel("length",t.length):null;case"Polygon":case"Square":return this.displayText?this.formatLabel("area",t.area):null;case"Circle":return this.displayText?this.formatLabel("circle",t.radius):null;case"Point":return this.displayText?this.formatLabel("point",t.position):null;case"Text":return this.formatLabel("text",t.text);default:return""}}},{key:"setStyleFromProperties",value:function(e){if(e.getProperties().style)try{var t=JSON.parse(e.getProperties().style);"Text"===e.getProperties().geometryType?this.setFeaturePropertiesFromText(e,t.text):this.setFeaturePropertiesFromGeometry(e),e.setStyle(this.getStyle(e,t))}catch(r){console.error("Style attribute could not be parsed.",r)}else{var i=e.getStyleFunction();if(i){var o=i(e,this.map.getView().getResolution());o[0]&&o[0].getFill&&null===o[0].getFill()&&o[0].setFill(new a.Z({color:[0,0,0,0]})),e.setStyle(o)}}}},{key:"calculateExtent",value:function(e){var t=[];return e.forEach((function(e,i){var o=e.getGeometry().getExtent();if(0===i)t=o;else for(var r=0;r<4;r++)r<2?t[r]>o[r]&&(t[r]=o[r]):t[r]<o[r]&&(t[r]=o[r])})),!!t.every((function(e){return e}))&&t}},{key:"addInteraction",value:function(){var e,t=this.type.toString();this.text=!1;var i=this.type;this.interactionType=this.type,"Text"===i&&(i="Point",this.text=!0),"Square"===i&&(i="Circle",e=(0,y.dO)()),this.draw=new y.ZP({source:this.source,type:i,style:this.createStyle(),geometryFunction:e,geometryName:t}),this.draw.on("drawstart",this.handleDrawStart),this.draw.on("drawend",this.handleDrawEnd),this.map.addInteraction(this.draw),this.map.snapHelper.add("draw")}},{key:"setActive",value:function(e){e&&!this.active&&(this.map.clickLock.add("draw"),this.addInteraction()),!1===e&&(this.removeInteraction(),this.map.clickLock.delete("draw")),this.active=e}},{key:"getMap",value:function(){return this.map}},{key:"openDialog",value:function(e){this.globalObserver.publish("core.dialogOpen",e)}}]),e}();t.default=T},58487:function(e,t,i){i.d(t,{Z:function(){return w}});var o=i(4942),r=i(87462),n=i(63366),a=i(72791),s=i(28182),l=i(94419),c=i(67254),u=i(76863),h=i(21217);function d(e){return(0,h.Z)("MuiCardActionArea",e)}var p=(0,i(75878).Z)("MuiCardActionArea",["root","focusVisible","focusHighlight"]),g=i(60753),f=i(80184),m=["children","className","focusVisibleClassName"],v=(0,u.ZP)(g.Z,{name:"MuiCardActionArea",slot:"Root",overridesResolver:function(e,t){return t.root}})((function(e){var t,i=e.theme;return t={display:"block",textAlign:"inherit",width:"100%"},(0,o.Z)(t,"&:hover .".concat(p.focusHighlight),{opacity:(i.vars||i).palette.action.hoverOpacity,"@media (hover: none)":{opacity:0}}),(0,o.Z)(t,"&.".concat(p.focusVisible," .").concat(p.focusHighlight),{opacity:(i.vars||i).palette.action.focusOpacity}),t})),y=(0,u.ZP)("span",{name:"MuiCardActionArea",slot:"FocusHighlight",overridesResolver:function(e,t){return t.focusHighlight}})((function(e){var t=e.theme;return{overflow:"hidden",pointerEvents:"none",position:"absolute",top:0,right:0,bottom:0,left:0,borderRadius:"inherit",opacity:0,backgroundColor:"currentcolor",transition:t.transitions.create("opacity",{duration:t.transitions.duration.short})}})),w=a.forwardRef((function(e,t){var i=(0,c.Z)({props:e,name:"MuiCardActionArea"}),o=i.children,a=i.className,u=i.focusVisibleClassName,h=(0,n.Z)(i,m),p=i,g=function(e){var t=e.classes;return(0,l.Z)({root:["root"],focusHighlight:["focusHighlight"]},d,t)}(p);return(0,f.jsxs)(v,(0,r.Z)({className:(0,s.default)(g.root,a),focusVisibleClassName:(0,s.default)(u,g.focusVisible),ref:t,ownerState:p},h,{children:[o,(0,f.jsx)(y,{className:g.focusHighlight,ownerState:p})]}))}))},16398:function(e,t,i){i.d(t,{Z:function(){return P}});var o=i(4942),r=i(63366),n=i(87462),a=i(72791),s=i(28182),l=i(94419),c=i(4565),u=i(67254),h=i(76863),d=i(21217);function p(e){return(0,d.Z)("MuiCardHeader",e)}var g=(0,i(75878).Z)("MuiCardHeader",["root","avatar","action","content","title","subheader"]),f=i(80184),m=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],v=(0,h.ZP)("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:function(e,t){var i;return(0,n.Z)((i={},(0,o.Z)(i,"& .".concat(g.title),t.title),(0,o.Z)(i,"& .".concat(g.subheader),t.subheader),i),t.root)}})({display:"flex",alignItems:"center",padding:16}),y=(0,h.ZP)("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:function(e,t){return t.avatar}})({display:"flex",flex:"0 0 auto",marginRight:16}),w=(0,h.ZP)("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:function(e,t){return t.action}})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),b=(0,h.ZP)("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:function(e,t){return t.content}})({flex:"1 1 auto"}),P=a.forwardRef((function(e,t){var i=(0,u.Z)({props:e,name:"MuiCardHeader"}),o=i.action,a=i.avatar,h=i.className,d=i.component,g=void 0===d?"div":d,P=i.disableTypography,Z=void 0!==P&&P,C=i.subheader,k=i.subheaderTypographyProps,x=i.title,T=i.titleTypographyProps,S=(0,r.Z)(i,m),F=(0,n.Z)({},i,{component:g,disableTypography:Z}),M=function(e){var t=e.classes;return(0,l.Z)({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},p,t)}(F),E=x;null==E||E.type===c.Z||Z||(E=(0,f.jsx)(c.Z,(0,n.Z)({variant:a?"body2":"h5",className:M.title,component:"span",display:"block"},T,{children:E})));var A=C;return null==A||A.type===c.Z||Z||(A=(0,f.jsx)(c.Z,(0,n.Z)({variant:a?"body2":"body1",className:M.subheader,color:"text.secondary",component:"span",display:"block"},k,{children:A}))),(0,f.jsxs)(v,(0,n.Z)({className:(0,s.default)(M.root,h),as:g,ref:t,ownerState:F},S,{children:[a&&(0,f.jsx)(y,{className:M.avatar,ownerState:F,children:a}),(0,f.jsxs)(b,{className:M.content,ownerState:F,children:[E,A]}),o&&(0,f.jsx)(w,{className:M.action,ownerState:F,children:o})]}))}))},48928:function(e,t,i){i.d(t,{Z:function(){return m}});var o=i(87462),r=i(63366),n=i(72791),a=i(28182),s=i(94419),l=i(76863),c=i(67254),u=i(56650),h=i(21217);function d(e){return(0,h.Z)("MuiCard",e)}(0,i(75878).Z)("MuiCard",["root"]);var p=i(80184),g=["className","raised"],f=(0,l.ZP)(u.Z,{name:"MuiCard",slot:"Root",overridesResolver:function(e,t){return t.root}})((function(){return{overflow:"hidden"}})),m=n.forwardRef((function(e,t){var i=(0,c.Z)({props:e,name:"MuiCard"}),n=i.className,l=i.raised,u=void 0!==l&&l,h=(0,r.Z)(i,g),m=(0,o.Z)({},i,{raised:u}),v=function(e){var t=e.classes;return(0,s.Z)({root:["root"]},d,t)}(m);return(0,p.jsx)(f,(0,o.Z)({className:(0,a.default)(v.root,n),elevation:u?8:void 0,ref:t,ownerState:m},h))}))},42670:function(e,t,i){var o=i(15671),r=i(43144),n=i(60136),a=i(29388),s=i(45957),l=i(5989),c=i(99148),u=i(37130),h=i(30923),d=i(1408),p="element",g="map",f="offset",m="position",v="positioning",y=function(e){(0,n.Z)(i,e);var t=(0,a.Z)(i);function i(e){var r;return(0,o.Z)(this,i),(r=t.call(this)).on,r.once,r.un,r.options=e,r.id=e.id,r.insertFirst=void 0===e.insertFirst||e.insertFirst,r.stopEvent=void 0===e.stopEvent||e.stopEvent,r.element=document.createElement("div"),r.element.className=void 0!==e.className?e.className:"ol-overlay-container "+c.$A,r.element.style.position="absolute",r.element.style.pointerEvents="auto",r.autoPan=!0===e.autoPan?{}:e.autoPan||void 0,r.rendered={transform_:"",visible:!0},r.mapPostrenderListenerKey=null,r.addChangeListener(p,r.handleElementChanged),r.addChangeListener(g,r.handleMapChanged),r.addChangeListener(f,r.handleOffsetChanged),r.addChangeListener(m,r.handlePositionChanged),r.addChangeListener(v,r.handlePositioningChanged),void 0!==e.element&&r.setElement(e.element),r.setOffset(void 0!==e.offset?e.offset:[0,0]),r.setPositioning(e.positioning||"top-left"),void 0!==e.position&&r.setPosition(e.position),r}return(0,r.Z)(i,[{key:"getElement",value:function(){return this.get(p)}},{key:"getId",value:function(){return this.id}},{key:"getMap",value:function(){return this.get(g)||null}},{key:"getOffset",value:function(){return this.get(f)}},{key:"getPosition",value:function(){return this.get(m)}},{key:"getPositioning",value:function(){return this.get(v)}},{key:"handleElementChanged",value:function(){(0,d.ep)(this.element);var e=this.getElement();e&&this.element.appendChild(e)}},{key:"handleMapChanged",value:function(){this.mapPostrenderListenerKey&&((0,d.ZF)(this.element),(0,h.bN)(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var e=this.getMap();if(e){this.mapPostrenderListenerKey=(0,h.oL)(e,l.Z.POSTRENDER,this.render,this),this.updatePixelPosition();var t=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?t.insertBefore(this.element,t.childNodes[0]||null):t.appendChild(this.element),this.performAutoPan()}}},{key:"render",value:function(){this.updatePixelPosition()}},{key:"handleOffsetChanged",value:function(){this.updatePixelPosition()}},{key:"handlePositionChanged",value:function(){this.updatePixelPosition(),this.performAutoPan()}},{key:"handlePositioningChanged",value:function(){this.updatePixelPosition()}},{key:"setElement",value:function(e){this.set(p,e)}},{key:"setMap",value:function(e){this.set(g,e)}},{key:"setOffset",value:function(e){this.set(f,e)}},{key:"setPosition",value:function(e){this.set(m,e)}},{key:"performAutoPan",value:function(){this.autoPan&&this.panIntoView(this.autoPan)}},{key:"panIntoView",value:function(e){var t=this.getMap();if(t&&t.getTargetElement()&&this.get(m)){var i=this.getRect(t.getTargetElement(),t.getSize()),o=this.getElement(),r=this.getRect(o,[(0,d.iO)(o),(0,d.Pb)(o)]),n=void 0===(e=e||{}).margin?20:e.margin;if(!(0,u.containsExtent)(i,r)){var a=r[0]-i[0],s=i[2]-r[2],l=r[1]-i[1],c=i[3]-r[3],h=[0,0];if(a<0?h[0]=a-n:s<0&&(h[0]=Math.abs(s)+n),l<0?h[1]=l-n:c<0&&(h[1]=Math.abs(c)+n),0!==h[0]||0!==h[1]){var p=t.getView().getCenterInternal(),g=t.getPixelFromCoordinateInternal(p);if(!g)return;var f=[g[0]+h[0],g[1]+h[1]],v=e.animation||{};t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(f),duration:v.duration,easing:v.easing})}}}}},{key:"getRect",value:function(e,t){var i=e.getBoundingClientRect(),o=i.left+window.pageXOffset,r=i.top+window.pageYOffset;return[o,r,o+t[0],r+t[1]]}},{key:"setPositioning",value:function(e){this.set(v,e)}},{key:"setVisible",value:function(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}},{key:"updatePixelPosition",value:function(){var e=this.getMap(),t=this.getPosition();if(e&&e.isRendered()&&t){var i=e.getPixelFromCoordinate(t),o=e.getSize();this.updateRenderedPosition(i,o)}else this.setVisible(!1)}},{key:"updateRenderedPosition",value:function(e,t){var i=this.element.style,o=this.getOffset(),r=this.getPositioning();this.setVisible(!0);var n=Math.round(e[0]+o[0])+"px",a=Math.round(e[1]+o[1])+"px",s="0%",l="0%";"bottom-right"==r||"center-right"==r||"top-right"==r?s="-100%":"bottom-center"!=r&&"center-center"!=r&&"top-center"!=r||(s="-50%"),"bottom-left"==r||"bottom-center"==r||"bottom-right"==r?l="-100%":"center-left"!=r&&"center-center"!=r&&"center-right"!=r||(l="-50%");var c="translate(".concat(s,", ").concat(l,") translate(").concat(n,", ").concat(a,")");this.rendered.transform_!=c&&(this.rendered.transform_=c,i.transform=c)}},{key:"getOptions",value:function(){return this.options}}]),i}(s.Z);t.Z=y}}]);
//# sourceMappingURL=2271.a551df49.chunk.js.map