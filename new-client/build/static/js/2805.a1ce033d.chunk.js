"use strict";(self.webpackChunkhajk_client=self.webpackChunkhajk_client||[]).push([[2805],{28619:function(t,e,i){i.r(e);var n=i(15671),o=i(43144),s=i(60136),r=i(29388),a=i(4942),l=i(72791),u=i(76863),c=i(48928),p=i(73978),d=i(58487),h=i(16398),f=i(80184),m=(0,u.ZP)(c.Z)((function(t){var e=t.theme;return(0,a.Z)({marginBottom:e.spacing(1),width:"210px"},e.breakpoints.down("sm"),{boxShadow:"none",borderBottom:"1px solid #ccc",borderRadius:0,margin:0,width:"100%",justifyContent:"left"})})),g=(0,u.ZP)(p.Z)((function(t){return{background:t.theme.palette.text.primary}})),w=function(t){(0,s.Z)(i,t);var e=(0,r.Z)(i);function i(){var t;(0,n.Z)(this,i);for(var o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).state={open:!1,text:""},t}return(0,o.Z)(i,[{key:"render",value:function(){var t=this.props,e=t.abstract,i=t.icon,n=t.onClick,o=t.title;return(0,f.jsx)(m,{onClick:n,children:(0,f.jsx)(d.Z,{children:(0,f.jsx)(h.Z,{avatar:(0,f.jsx)(g,{children:i}),title:o,subheader:e})})})}}]),i}(l.PureComponent);w.defaultProps={abstract:"Beskrivning saknas",title:"Titel saknas"},e.default=w},73151:function(t,e,i){i.r(e);var n=i(15671),o=i(43144),s=i(97326),r=i(60136),a=i(29388),l=i(72791),u=i(85286),c=i(54164),p=i(66788),d=i(35110),h=i(65514),f=i(4346),m=i(26191),g=i(28619),w=i(74599),b=i(80184),v=function(t){(0,r.Z)(i,t);var e=(0,a.Z)(i);function i(t){var o;(0,n.Z)(this,i),(o=e.call(this,t)).handleButtonClick=function(t){o.showWindow({hideOtherPluginWindows:!0,runCallback:!0}),o.props.app.globalObserver.publish("core.onlyHideDrawerIfNeeded")},o.showWindow=function(t){var e=t.hideOtherPluginWindows||!0,i=t.runCallback||!0;if(o.props.app.activeTool=o.type,o.props.app.globalObserver.publish("analytics.trackEvent",{eventName:"pluginShown",pluginName:o.type,activeMap:o.props.app.config.activeMap}),!0===o.state.windowVisible)return null;!0===e&&o.props.app.onWindowOpen((0,s.Z)(o)),o.setState({windowVisible:!0},(function(){!0===i&&"function"===typeof o.props.custom.onWindowShow&&o.props.custom.onWindowShow()}))},o.closeWindow=function(){o.type===o.props.app.activeTool&&(o.props.app.activeTool=void 0),o.setState({windowVisible:!1},(function(){"function"===typeof o.props.custom.onWindowHide&&o.props.custom.onWindowHide()}))},o.type=t.type.toLowerCase()||void 0,o.description=t.options.description||t.custom.description;var r=!1===o.props.app.config.mapConfig.map.clean&&(u.isMobile?t.options.visibleAtStartMobile:t.options.visibleAtStart)||!1;r&&o.props.app.globalObserver.publish("analytics.trackEvent",{eventName:"pluginShown",pluginName:o.type,activeMap:o.props.app.config.activeMap}),o.state={title:t.options.title||t.custom.title||"Unnamed plugin",color:t.options.color||t.custom.color||null,windowVisible:r},o.title=t.options.title||t.custom.title||"Unnamed plugin",o.width=t.options.width||t.custom.width||400,o.height=t.options.height||t.custom.height||"auto",o.position=t.options.position||t.custom.position||"left",t.app.registerWindowPlugin((0,s.Z)(o));var a="".concat(o.type,".showWindow");t.app.globalObserver.subscribe(a,(function(t){o.showWindow(t)}));var l="".concat(o.type,".closeWindow");return t.app.globalObserver.subscribe(l,(function(){o.closeWindow()})),o}return(0,o.Z)(i,[{key:"componentDidUpdate",value:function(t){t.custom.title!==this.props.custom.title&&this.setState({title:this.props.custom.title}),t.custom.color!==this.props.custom.color&&this.setState({color:this.props.custom.color})}},{key:"pluginIsWidget",value:function(t){return["left","right"].includes(t)}},{key:"renderWindow",value:function(t){var e=this.props.options.target;return"function"===typeof(null===t||void 0===t?void 0:t.render)?t.render():(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(m.default,{globalObserver:this.props.app.globalObserver,title:this.state.title,color:this.state.color,onClose:this.closeWindow,open:this.state.windowVisible,onResize:this.props.custom.onResize,onMaximize:this.props.custom.onMaximize,onMinimize:this.props.custom.onMinimize,draggingEnabled:this.props.custom.draggingEnabled,customPanelHeaderButtons:this.props.custom.customPanelHeaderButtons,resizingEnabled:this.props.custom.resizingEnabled,scrollable:this.props.custom.scrollable,allowMaximizedWindow:this.props.custom.allowMaximizedWindow,disablePadding:this.props.custom.disablePadding,width:this.width,height:this.height,position:this.position,mode:"window",layerswitcherConfig:this.props.app.config.mapConfig.tools.find((function(t){return"layerswitcher"===t.type})),children:l.cloneElement(this.props.children,{windowVisible:this.state.windowVisible})}),("toolbar"===e||this.pluginIsWidget(e))&&this.renderDrawerButton(),this.pluginIsWidget(e)&&this.renderWidgetButton("".concat(e,"-column")),"control"===e&&this.renderControlButton()]})}},{key:"renderDrawerButton",value:function(){return(0,c.createPortal)((0,b.jsx)(p.Z,{mdUp:this.pluginIsWidget(this.props.options.target),children:(0,b.jsxs)(d.ZP,{button:!0,divider:!0,selected:this.state.windowVisible,onClick:this.handleButtonClick,children:[(0,b.jsx)(h.Z,{children:this.props.custom.icon}),(0,b.jsx)(f.Z,{primary:this.title})]})}),document.getElementById("plugin-buttons"))}},{key:"renderWidgetButton",value:function(t){return(0,c.createPortal)((0,b.jsx)(p.Z,{mdDown:!0,children:(0,b.jsx)(g.default,{icon:this.props.custom.icon,onClick:this.handleButtonClick,title:this.title,abstract:this.description})}),document.getElementById(t))}},{key:"renderControlButton",value:function(){return(0,c.createPortal)((0,b.jsx)(w.default,{icon:this.props.custom.icon,onClick:this.handleButtonClick,title:this.title,abstract:this.description}),document.getElementById("plugin-control-buttons"))}},{key:"render",value:function(){return!0!==this.props.app.config.mapConfig.map.clean&&this.renderWindow(this.props.custom)}}]),i}(l.PureComponent);e.default=v},42805:function(t,e,i){i.r(e);var n=i(1413),o=i(29439),s=i(72791),r=i(85194),a=i.n(r),l=i(41286),u=i(42468),c=i(73151),p=i(74398),d=i(46187),h=i(94311),f=i(28954),m=i(91762),g=i(4083),w=i(80184);e.default=function(t){var e,i=s.useState("ADD"),r=(0,o.Z)(i,2),b=r[0],v=r[1],y=s.useState("Polygon"),k=(0,o.Z)(y,2),S=k[0],E=k[1],Z=s.useState(null),C=(0,o.Z)(Z,2),M=C[0],W=C[1],x=s.useState(!1),D=(0,o.Z)(x,2),O=D[0],j=D[1],B=s.useState(!0),I=(0,o.Z)(B,2),T=I[0],A=I[1],P=s.useState([]),z=(0,o.Z)(P,2),N=z[0],R=z[1],V=s.useState(null!==(e=t.options.visibleAtStart)&&void 0!==e&&e),_=(0,o.Z)(V,2),H=_[0],U=_[1],G=s.useState(u.default.get(m.STORAGE_KEY).measurementSettings||m.DEFAULT_MEASUREMENT_SETTINGS),K=(0,o.Z)(G,2),F=K[0],Y=K[1],L=(0,g.default)(t.app.globalObserver).functionalCookiesOk,q=s.useState((function(){return a()()})),J=(0,o.Z)(q,1)[0],Q=s.useState((function(){return new h.default({layerName:"pluginSketch",map:t.map,observer:J,measurementSettings:F})})),X=(0,o.Z)(Q,1)[0],$=s.useState((function(){return new d.default({drawModel:X,modifyDefaultEnabled:O,translateDefaultEnabled:T,storageKey:m.STORAGE_KEY})})),tt=(0,o.Z)($,1)[0],et=s.useState((function(){return new f.default({layerName:"pluginSketch",map:t.map,observer:J,drawModel:X,enableDragAndDrop:!0})})),it=(0,o.Z)(et,1)[0],nt=s.useCallback((function(t){W(t)}),[]),ot=s.useCallback((function(t){R(t)}),[]);s.useEffect((function(){return J.subscribe("drawModel.modify.mapClick",nt),J.subscribe("drawModel.move.select",ot),function(){J.unsubscribe("drawModel.modify.mapClick"),J.unsubscribe("drawModel.move.select")}}),[J,nt,ot]),s.useEffect((function(){if(!H)return X.toggleDrawInteraction("");switch(b){case"ADD":return X.toggleDrawInteraction(S);case"DELETE":return X.toggleDrawInteraction("Delete");case"EDIT":return X.toggleDrawInteraction("Edit");case"MOVE":return X.toggleDrawInteraction("Move");default:return X.toggleDrawInteraction("")}}),[S,b,X,H]),s.useEffect((function(){W(null),R([])}),[b,H]),s.useEffect((function(){X.setModifyActive(O)}),[X,O]),s.useEffect((function(){X.setTranslateActive(T)}),[X,T]),s.useEffect((function(){L&&u.default.set(m.STORAGE_KEY,(0,n.Z)((0,n.Z)({},u.default.get(m.STORAGE_KEY)),{},{measurementSettings:F})),X.setMeasurementSettings(F)}),[L,X,F]);return(0,w.jsx)(c.default,(0,n.Z)((0,n.Z)({},t),{},{type:"Sketch",custom:{icon:(0,w.jsx)(l.Z,{}),title:"Rita",description:"Skapa dina helt egna geometrier!",height:"dynamic",width:350,onWindowHide:function(){U(!1)},onWindowShow:function(){U(!0)}},children:(0,w.jsx)(p.default,{model:tt,drawModel:X,kmlModel:it,options:t.options,localObserver:J,globalObserver:t.app.globalObserver,activeDrawType:S,activityId:b,setActivityId:v,setActiveDrawType:E,modifyEnabled:O,setModifyEnabled:j,translateEnabled:T,setTranslateEnabled:A,editFeature:M,moveFeatures:N,measurementSettings:F,setMeasurementSettings:Y})}))}}}]);
//# sourceMappingURL=2805.a1ce033d.chunk.js.map