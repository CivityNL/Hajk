"use strict";(self.webpackChunkhajk_client=self.webpackChunkhajk_client||[]).push([[5551,5354,361,6127],{28619:function(e,t,o){o.r(t);var n=o(15671),i=o(43144),r=o(60136),s=o(29388),a=o(4942),l=o(72791),c=o(76863),u=o(48928),p=o(73978),d=o(58487),h=o(16398),m=o(80184),g=(0,c.ZP)(u.Z)((function(e){var t=e.theme;return(0,a.Z)({marginBottom:t.spacing(1),width:"210px"},t.breakpoints.down("sm"),{boxShadow:"none",borderBottom:"1px solid #ccc",borderRadius:0,margin:0,width:"100%",justifyContent:"left"})})),f=(0,c.ZP)(p.Z)((function(e){return{background:e.theme.palette.text.primary}})),w=function(e){(0,r.Z)(o,e);var t=(0,s.Z)(o);function o(){var e;(0,n.Z)(this,o);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={open:!1,text:""},e}return(0,i.Z)(o,[{key:"render",value:function(){var e=this.props,t=e.abstract,o=e.icon,n=e.onClick,i=e.title;return(0,m.jsx)(g,{onClick:n,children:(0,m.jsx)(d.Z,{children:(0,m.jsx)(h.Z,{avatar:(0,m.jsx)(f,{children:o}),title:i,subheader:t})})})}}]),o}(l.PureComponent);w.defaultProps={abstract:"Beskrivning saknas",title:"Titel saknas"},t.default=w},73151:function(e,t,o){o.r(t);var n=o(15671),i=o(43144),r=o(97326),s=o(60136),a=o(29388),l=o(72791),c=o(85286),u=o(54164),p=o(66788),d=o(35110),h=o(65514),m=o(4346),g=o(26191),f=o(28619),w=o(74599),b=o(80184),v=function(e){(0,s.Z)(o,e);var t=(0,a.Z)(o);function o(e){var i;(0,n.Z)(this,o),(i=t.call(this,e)).handleButtonClick=function(e){i.showWindow({hideOtherPluginWindows:!0,runCallback:!0}),i.props.app.globalObserver.publish("core.onlyHideDrawerIfNeeded")},i.showWindow=function(e){var t=e.hideOtherPluginWindows||!0,o=e.runCallback||!0;if(i.props.app.activeTool=i.type,i.props.app.globalObserver.publish("analytics.trackEvent",{eventName:"pluginShown",pluginName:i.type,activeMap:i.props.app.config.activeMap}),!0===i.state.windowVisible)return null;!0===t&&i.props.app.onWindowOpen((0,r.Z)(i)),i.setState({windowVisible:!0},(function(){!0===o&&"function"===typeof i.props.custom.onWindowShow&&i.props.custom.onWindowShow()}))},i.closeWindow=function(){i.type===i.props.app.activeTool&&(i.props.app.activeTool=void 0),i.setState({windowVisible:!1},(function(){"function"===typeof i.props.custom.onWindowHide&&i.props.custom.onWindowHide()}))},i.type=e.type.toLowerCase()||void 0,i.description=e.options.description||e.custom.description;var s=!1===i.props.app.config.mapConfig.map.clean&&(c.isMobile?e.options.visibleAtStartMobile:e.options.visibleAtStart)||!1;s&&i.props.app.globalObserver.publish("analytics.trackEvent",{eventName:"pluginShown",pluginName:i.type,activeMap:i.props.app.config.activeMap}),i.state={title:e.options.title||e.custom.title||"Unnamed plugin",color:e.options.color||e.custom.color||null,windowVisible:s},i.title=e.options.title||e.custom.title||"Unnamed plugin",i.width=e.options.width||e.custom.width||400,i.height=e.options.height||e.custom.height||"auto",i.position=e.options.position||e.custom.position||"left",e.app.registerWindowPlugin((0,r.Z)(i));var a="".concat(i.type,".showWindow");e.app.globalObserver.subscribe(a,(function(e){i.showWindow(e)}));var l="".concat(i.type,".closeWindow");return e.app.globalObserver.subscribe(l,(function(){i.closeWindow()})),i}return(0,i.Z)(o,[{key:"componentDidUpdate",value:function(e){e.custom.title!==this.props.custom.title&&this.setState({title:this.props.custom.title}),e.custom.color!==this.props.custom.color&&this.setState({color:this.props.custom.color})}},{key:"pluginIsWidget",value:function(e){return["left","right"].includes(e)}},{key:"renderWindow",value:function(e){var t=this.props.options.target;return"function"===typeof(null===e||void 0===e?void 0:e.render)?e.render():(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(g.default,{globalObserver:this.props.app.globalObserver,title:this.state.title,color:this.state.color,onClose:this.closeWindow,open:this.state.windowVisible,onResize:this.props.custom.onResize,onMaximize:this.props.custom.onMaximize,onMinimize:this.props.custom.onMinimize,draggingEnabled:this.props.custom.draggingEnabled,customPanelHeaderButtons:this.props.custom.customPanelHeaderButtons,resizingEnabled:this.props.custom.resizingEnabled,scrollable:this.props.custom.scrollable,allowMaximizedWindow:this.props.custom.allowMaximizedWindow,disablePadding:this.props.custom.disablePadding,width:this.width,height:this.height,position:this.position,mode:"window",layerswitcherConfig:this.props.app.config.mapConfig.tools.find((function(e){return"layerswitcher"===e.type})),children:l.cloneElement(this.props.children,{windowVisible:this.state.windowVisible})}),("toolbar"===t||this.pluginIsWidget(t))&&this.renderDrawerButton(),this.pluginIsWidget(t)&&this.renderWidgetButton("".concat(t,"-column")),"control"===t&&this.renderControlButton()]})}},{key:"renderDrawerButton",value:function(){return(0,u.createPortal)((0,b.jsx)(p.Z,{mdUp:this.pluginIsWidget(this.props.options.target),children:(0,b.jsxs)(d.ZP,{button:!0,divider:!0,selected:this.state.windowVisible,onClick:this.handleButtonClick,children:[(0,b.jsx)(h.Z,{children:this.props.custom.icon}),(0,b.jsx)(m.Z,{primary:this.title})]})}),document.getElementById("plugin-buttons"))}},{key:"renderWidgetButton",value:function(e){return(0,u.createPortal)((0,b.jsx)(p.Z,{mdDown:!0,children:(0,b.jsx)(f.default,{icon:this.props.custom.icon,onClick:this.handleButtonClick,title:this.title,abstract:this.description})}),document.getElementById(e))}},{key:"renderControlButton",value:function(){return(0,u.createPortal)((0,b.jsx)(w.default,{icon:this.props.custom.icon,onClick:this.handleButtonClick,title:this.title,abstract:this.description}),document.getElementById("plugin-control-buttons"))}},{key:"render",value:function(){return!0!==this.props.app.config.mapConfig.map.clean&&this.renderWindow(this.props.custom)}}]),o}(l.PureComponent);t.default=v},65551:function(e,t,o){o.r(t);var n=o(1413),i=o(15671),r=o(43144),s=o(60136),a=o(29388),l=o(72791),c=o(10361),u=o(98008),p=o(79495),d=o(71410),h=o(85194),m=o.n(h),g=o(75354),f=o(70686),w=o(9933),b=o(38283),v=o(80184),y=function(e){(0,s.Z)(o,e);var t=(0,a.Z)(o);function o(e){var r;return(0,i.Z)(this,o),(r=t.call(this,e)).state={document:null,documentWindowMaximized:!0,showPrintWindow:!1,chapters:[],documentColor:null,model:null},r.componentDidUpdate=function(e){var t=r.props.theme;e.theme.palette.mode!==t.palette.mode&&r.setState((function(e){return{customTheme:(0,n.Z)((0,n.Z)({},e.customTheme),{},{palette:(0,n.Z)((0,n.Z)({},e.customTheme.palette),{},{mode:t.palette.mode})})}}))},r.getThemeWithCustomThemeApplied=function(e){var t=r.props.theme;return e.typography&&r.setBottomMarginsForTypographyVariants(e),(0,f.Z)((0,b.deepMerge)(t,e))},r.setBottomMarginsForTypographyVariants=function(e){["body1","h1","h2","h3","h4","h5","h6"].forEach((function(t){var o;e.typography[t]&&((null===(o=e.typography[t])||void 0===o?void 0:o.marginBottom)||(e.typography[t].marginBottom=r.props.theme.spacing(1)||"8px"))}))},r.dynamicallyImportCustomFont=function(){var e=r.props.options.dynamicImportUrls;return e.customFont?(0,v.jsx)("link",{rel:"stylesheet",type:"text/css",href:e.customFont}):null},r.dynamicallyImportIconFonts=function(){var e=r.props.options.dynamicImportUrls;return e.iconFonts?(0,v.jsx)("link",{rel:"stylesheet",href:e.iconFonts}):null},r.renderDrawerContent=function(){var e=r.props,t=e.app,o=e.model,n=e.options;return(0,v.jsx)(d.default,{app:t,document:r.state.document,model:o,options:n,localObserver:r.localObserver})},r.addDrawerToggleButton=function(){var e=r.props,t=e.app,o=e.options;t.globalObserver.publish("core.addSrShortcuts",[{title:"Till huvudmeny f\xf6r webbplatsen",link:"#panelmenu"}]),t.globalObserver.publish("core.addDrawerToggleButton",{value:"documenthandler",ButtonIcon:u.Z,caption:o.drawerButtonTitle||"Meny",drawerTitle:o.drawerTitle||"\xd6versiktsplan",order:100,renderDrawerContent:r.renderDrawerContent})},r.showDocument=function(e){var t=r.props.app;return r.setActiveDocument(e).then((function(){t.globalObserver.publish("documentviewer.showWindow",{hideOtherPlugins:!1}),t.globalObserver.publish("core.maximizeWindow")}))},r.onWindowHide=function(){r.localObserver.publish("set-active-document",{documentName:null,headerIdentifier:null}),r.localObserver.publish("document-window-closed")},r.onMinimize=function(){r.setState({documentWindowMaximized:!1})},r.onMaximize=function(){r.setState({documentWindowMaximized:!0})},r.setActiveDocument=function(e){return new Promise((function(t,o){var n=null;e&&(n=r.state.model.getDocuments([e])[0]),n?r.setState({document:n,showPrintWindow:!1},t):o()}))},r.togglePrintWindow=function(){r.setState({showPrintWindow:!r.state.showPrintWindow})},r.localObserver=m()(),r.mapViewModel=new g.default({localObserver:r.localObserver,globalObserver:e.app.globalObserver,map:e.map}),r.props.searchInterface.getSearchMethods=new Promise((function(t){new p.default({localObserver:r.localObserver,app:e.app,map:e.map,menu:e.options.menuConfig.menu,resolveSearchInterface:t,options:e.options}).init().then((function(e){return e.fetchCustomThemeJson().then((function(t){r.setState({model:e,customTheme:r.getThemeWithCustomThemeApplied(t)},(function(){r.addDrawerToggleButton()}))}))}))})),r}return(0,r.Z)(o,[{key:"render",value:function(){return(0,v.jsxs)(v.Fragment,{children:[this.dynamicallyImportCustomFont(),this.dynamicallyImportIconFonts(),(0,v.jsx)(c.default,(0,n.Z)((0,n.Z)({},this.props),{},{onMinimize:this.onMinimize,showDocument:this.showDocument,onMaximize:this.onMaximize,customTheme:this.state.customTheme,onWindowHide:this.onWindowHide,togglePrintWindow:this.togglePrintWindow,document:this.state.document,documentColor:this.state.documentColor,documentWindowMaximized:this.state.documentWindowMaximized,showPrintWindow:this.state.showPrintWindow,chapters:this.state.chapters,model:this.state.model,localObserver:this.localObserver}))]})}}]),o}(l.PureComponent);t.default=(0,w.b)(y)},75354:function(e,t,o){o.r(t),o.d(t,{default:function(){return r}});var n=o(15671),i=o(43144),r=function(){function e(t){var o=this;(0,n.Z)(this,e),this.convertMapSettingsUrlToOlSettings=function(e){try{var t=new URLSearchParams(e);return{center:t.has("x")&&t.has("y")?[t.get("x"),t.get("y")]:o.map.getView().getCenter(),zoom:t.get("z")||o.map.getView().getZoom(),layers:t.get("l")}}catch(n){return console.error(n),{center:o.map.getView().getCenter(),zoom:o.map.getView().getZoom(),layers:null}}},this.bindSubscriptions=function(){o.localObserver.subscribe("fly-to",(function(e){o.globalObserver.publish("core.minimizeWindow");var t=o.convertMapSettingsUrlToOlSettings(e);if(null!==t.layers){var n=t.layers.split(","),i=o.getLayersToShowAndHide(n),r=i.layersToShow,s=i.layersToHide;o.setMapLayersVisibility(r,s)}o.flyTo(o.map.getView(),t.center,t.zoom)}))},this.getLayersToShowAndHide=function(e){return o.map.getLayers().getArray().reduce((function(t,o){return o.getProperties().layerInfo&&o.getProperties().layerInfo.layerType&&(e.includes(o.getProperties().name)?t.layersToShow.push(o):t.layersToHide.push(o)),t}),{layersToShow:[],layersToHide:[]})},this.localObserver=t.localObserver,this.globalObserver=t.globalObserver,this.map=t.map,this.bindSubscriptions()}return(0,i.Z)(e,[{key:"setMapLayersVisibility",value:function(e,t){var o=this;e.forEach((function(e){"group"===e.get("layerType")?o.globalObserver.publish("layerswitcher.showLayer",e):e.getVisible()||e.setVisible(!0)})),t.forEach((function(e){"group"===e.get("layerType")?o.globalObserver.publish("layerswitcher.hideLayer",e):e.getVisible()&&e.setVisible(!1)}))}},{key:"flyTo",value:function(e,t,o){e.animate({center:t,zoom:o,duration:1500}),this.localObserver.publish("map-animation-complete")}}]),e}()},10361:function(e,t,o){o.r(t);var n=o(1413),i=o(15671),r=o(43144),s=o(60136),a=o(29388),l=o(72791),c=o(11640),u=o(57012),p=o(73151),d=o(59413),h=o(1447),m=o(5777),g=o(96127),f=o(94777),w=o(98246),b=o(88014),v=o(80184),y=function(e){(0,s.Z)(o,e);var t=(0,a.Z)(o);function o(){var e;(0,i.Z)(this,o);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).snackbarKey=null,e.shouldShowDocumentOnStart=function(){return!!e.props.options.documentOnStart},e.scrollInDocument=function(t){var o=e.props,n=o.localObserver,i=o.model,r=o.document;t?n.publish("scroll-to-chapter",i.getHeaderRef(r,t)):n.publish("scroll-to-top",i.getHeaderRef(r,t))},e.showHeaderInDocument=function(t){var o=t.documentName,n=t.headerIdentifier,i=e.props.enqueueSnackbar;o&&e.props.showDocument(o).then((function(){e.scrollInDocument(n)}),(function(){i("Kunde inte \xf6ppna dokumentet",{variant:"warning"}),console.warn("Could not fetch document, link to document probably reference a document not present in panelmenu")}))},e.displayMaplinkLoadingBar=function(){var t=e.props.enqueueSnackbar;e.snackbarKey=t("Kartan laddar... ",{variant:"information",persist:!0,preventDuplicate:!0,transitionDuration:{enter:0,exit:0},anchorOrigin:{vertical:"bottom",horizontal:"center"}})},e.closeMaplinkLoadingBar=function(){(0,e.props.closeSnackbar)(e.snackbarKey)},e.togglePrintWindow=function(){e.setState({showPrintWindow:!e.state.showPrintWindow})},e.handleInfoClickRequest=function(t){var o=document.createElement("span");o.innerHTML=t.payload.replace(/\\/g,"");var n=o.getElementsByTagName("a")[0];n?t.resolve((0,v.jsx)(f.CustomLink,{localObserver:e.props.localObserver,aTag:n,bottomMargin:!1})):(console.error("Could not render DocumentHandler link for payload:",t.payload),t.resolve((0,v.jsx)("b",{children:"Could not render DocumentHandler link"})))},e.bindSubscriptions=function(){var t=e.props,o=t.localObserver;t.app.globalObserver.subscribe("core.info-click-documenthandler",e.handleInfoClickRequest),o.subscribe("set-active-document",e.showHeaderInDocument),o.subscribe("maplink-loading",e.displayMaplinkLoadingBar),o.subscribe("map-animation-complete",e.closeMaplinkLoadingBar)},e.isModelReady=function(){return!!e.props.model},e.componentDidUpdate=function(t,o){var n=e.props.localObserver;t.model!==e.props.model&&e.isModelReady()&&(e.bindSubscriptions(),e.shouldShowDocumentOnStart()&&n.publish("set-active-document",{documentName:e.props.options.documentOnStart,headerIdentifier:null}))},e.getDocumentViewer=function(){var t=e.props,o=t.documentWindowMaximized,i=t.document;return(0,v.jsx)(d.default,(0,n.Z)({documentWindowMaximized:o,activeDocument:i,togglePrintWindow:e.togglePrintWindow},e.props))},e}return(0,r.Z)(o,[{key:"render",value:function(){var e=this.props,t=e.options,o=e.localObserver,i=e.documentWindowMaximized,r=e.document,s=e.togglePrintWindow,a=e.onWindowHide,l=e.showPrintWindow,d=e.customTheme,f=e.onMinimize,w=e.onMaximize,y=this.isModelReady(),k=t.enablePrint?[{icon:(0,v.jsx)(b.Z,{}),description:"\xd6ppna utskrift",onClickCallback:s}]:[];return(0,v.jsx)(p.default,(0,n.Z)((0,n.Z)({},this.props),{},{type:"DocumentViewer",custom:{icon:(0,v.jsx)(m.Z,{}),title:(null===r||void 0===r?void 0:r.documentTitle)||t.windowTitle||"Documents",color:(null===r||void 0===r?void 0:r.documentColor)||"#ffffff",customPanelHeaderButtons:k,description:"En kort beskrivning som visas i widgeten",height:t.height||"auto",width:t.width||600,scrollable:!1,onMinimize:f,onMaximize:w,onWindowHide:a,draggingEnabled:!1,resizingEnabled:!1,allowMaximizedWindow:!1},children:null!=r&&y?l?(0,v.jsx)(h.default,(0,n.Z)({customTheme:d,activeDocument:r,documentWindowMaximized:i,togglePrintWindow:s,localObserver:o,options:this.props.options},this.props)):d?(0,v.jsx)(c.Z,{injectFirst:!0,children:(0,v.jsx)(u.Z,{theme:d,children:this.getDocumentViewer()})}):this.getDocumentViewer():(0,v.jsx)(g.default,{})}))}}]),o}(l.PureComponent);t.default=(0,w.RM)(y)},96127:function(e,t,o){o.r(t);var n=o(15671),i=o(43144),r=o(60136),s=o(29388),a=o(72791),l=o(45953),c=o(96580),u=o(80184),p=function(e){(0,r.Z)(o,e);var t=(0,s.Z)(o);function o(){return(0,n.Z)(this,o),t.apply(this,arguments)}return(0,i.Z)(o,[{key:"render",value:function(){return(0,u.jsx)(l.ZP,{alignItems:"center",justifyContent:"center",container:!0,sx:{height:"100%"},children:(0,u.jsx)(c.Z,{justify:"center",sx:{height:"100%"}})})}}]),o}(a.PureComponent);t.default=p},98008:function(e,t,o){var n=o(64836);t.Z=void 0;var i=n(o(45649)),r=o(80184),s=(0,i.default)((0,r.jsx)("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}),"Menu");t.Z=s}}]);
//# sourceMappingURL=5551.32395023.chunk.js.map