"use strict";(self.webpackChunkhajk_client=self.webpackChunkhajk_client||[]).push([[2564],{2564:function(e,t,r){r.r(t);var n=r(15861),a=r(43144),u=r(15671),i=r(66274),o=r(99359),c=r(64687),l=r.n(c),s=r(25806),p=(0,o.Z)("options"),d=(0,o.Z)("mapServiceBase"),v=(0,o.Z)("mapViewModel"),f=(0,o.Z)("activeUserEmail"),m=(0,o.Z)("createRequestUrlString"),h=(0,o.Z)("getParameterNameValueString"),b=(0,o.Z)("getStepSize"),g=(0,o.Z)("getParameterValue"),Z=(0,o.Z)("getParametersToSend"),P=(0,o.Z)("makeRestApiOrder"),S=(0,o.Z)("makeDataDownloadOrder"),O=(0,o.Z)("createGetParametersUrl"),w=(0,o.Z)("createSubmitProductRequestUrl"),y=(0,o.Z)("createDataDownloadUrl"),j=(0,o.Z)("createProductStatusUrl"),x=(0,a.Z)((function e(t){var r,a,o=this;(0,u.Z)(this,e),Object.defineProperty(this,p,{writable:!0,value:void 0}),Object.defineProperty(this,d,{writable:!0,value:void 0}),Object.defineProperty(this,v,{writable:!0,value:void 0}),Object.defineProperty(this,f,{writable:!0,value:void 0}),this.getActiveUserEmail=function(){return(0,i.Z)(o,f)[f]},this.getProduct=function(e,t){return 0===(null===e||void 0===e?void 0:e.length)||0===(null===t||void 0===t?void 0:t.length)?null:(0,i.Z)(o,p)[p].products.find((function(r){return r.group===e&&r.name===t}))},this.makeOrder=function(e,t,r,n){var a=o.getProduct(e,t);return""!==n&&a.promptForEmail?(0,i.Z)(o,S)[S](a,r,n):(0,i.Z)(o,P)[P](a,r)},Object.defineProperty(this,m,{writable:!0,value:function(e,t,r){var n="opt_servicemode=async&opt_responseformat=json&opt_requesteremail=".concat(r,"&");if(!o.noGeomAttributeSupplied(e)){var a=(0,i.Z)(o,v)[v].getAllFeaturesAsGeoJson();n+="".concat(e.geoAttribute,"=").concat(a,"&")}return t.forEach((function(e){n+="".concat((0,i.Z)(o,h)[h](e),"&")})),n}}),Object.defineProperty(this,h,{writable:!0,value:function(e){var t,r,n,a,u,i;switch(e.type){case"CHOICE":case"LOOKUP_CHOICE":case"STRING":case"TEXT":case"PASSWORD":return"".concat(e.name,"=").concat(null!==(t=null!==(r=e.value)&&void 0!==r?r:e.defaultValue)&&void 0!==t?t:"");case"LISTBOX":case"LOOKUP_LISTBOX":var c=null!==(n=null!==(a=e.value)&&void 0!==a?a:e.defaultValue)&&void 0!==n?n:[];return 0===c.length?"".concat(e.name,"="):"".concat(e.name,"=").concat(c.join(","));case"RANGE_SLIDER":var l=o.getRangeSliderValueAndStep(e).value;return"".concat(e.name,"=").concat(l);default:return null!==(u=null!==(i=e.value)&&void 0!==i?i:e.defaultValue)&&void 0!==u?u:""}}}),this.noGeomAttributeSupplied=function(e){return!e||!e.geoAttribute||""===e.geoAttribute||"none"===e.geoAttribute},Object.defineProperty(this,b,{writable:!0,value:function(e){return 0===e?1:Number("0.".concat("1".padStart(e,"0")))}}),this.getRangeSliderValueAndStep=function(e){var t,r=(0,i.Z)(o,b)[b](e.decimalPrecision);return{value:null!==(t=e.value)&&void 0!==t?t:o.getRangeSliderMinimum(e,r),step:r}},this.getRangeSliderMinimum=function(e,t){return e.minimumExclusive?e.minimum+t:e.minimum},this.getRangeSliderMaximum=function(e,t){return e.maximumExclusive?e.maximum-t:e.maximum},Object.defineProperty(this,g,{writable:!0,value:function(e){var t,r,n,a,u,i;switch(e.type){case"CHOICE":case"LOOKUP_CHOICE":case"STRING":case"TEXT":case"PASSWORD":return null!==(t=null!==(r=e.value)&&void 0!==r?r:e.defaultValue)&&void 0!==t?t:"";case"LISTBOX":case"LOOKUP_LISTBOX":return null!==(n=null!==(a=e.value)&&void 0!==a?a:e.defaultValue)&&void 0!==n?n:[];case"RANGE_SLIDER":var c=o.getRangeSliderValueAndStep(e).value;return c;default:return null!==(u=null!==(i=e.value)&&void 0!==i?i:e.defaultValue)&&void 0!==u?u:""}}}),Object.defineProperty(this,Z,{writable:!0,value:function(e,t){var r=[];if(!o.noGeomAttributeSupplied(e)){var n=(0,i.Z)(o,v)[v].getAllFeaturesAsGeoJson();r.push({name:e.geoAttribute,value:n})}return t.forEach((function(e){var t=(0,i.Z)(o,g)[g](e);r.push({name:e.name,value:t})})),r}}),this.getParametersToRender=function(e,t,r){var n=o.getProduct(t,r);return n?e.filter((function(e){return e.name!==n.geoAttribute})):[]},this.getInfoUrl=function(e,t){var r,n=o.getProduct(e,t);return n&&null!==(r=n.infoUrl)&&void 0!==r?r:""},this.shouldPromptForEmail=function(e,t){var r=o.getProduct(e,t);return!!r&&r.promptForEmail},this.isValidEmail=function(e){if("string"!==typeof e)return!1;return/\S+@\S+\.\S+/.test(e)},this.getProductParameters=function(){var e=(0,n.Z)(l().mark((function e(t,r){var n,a,u,c;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o.getProduct(t,r)){e.next=3;break}return e.abrupt("return",{error:!0,parameters:[]});case 3:return a=(0,i.Z)(o,O)[O](n),e.prev=4,e.next=7,(0,s.hfetch)(a);case 7:return u=e.sent,e.next=10,u.json();case 10:return c=e.sent,e.abrupt("return",{error:!1,parameters:c});case 14:return e.prev=14,e.t0=e.catch(4),e.abrupt("return",{error:!0,parameters:[]});case 17:case"end":return e.stop()}}),e,null,[[4,14]])})));return function(t,r){return e.apply(this,arguments)}}(),Object.defineProperty(this,P,{writable:!0,value:function(){var e=(0,n.Z)(l().mark((function e(t,r){var n,a,u,c,p,d;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,i.Z)(o,Z)[Z](t,r),a=(0,i.Z)(o,w)[w](t),u=JSON.stringify({publishedParameters:n}),e.prev=3,e.next=6,(0,s.hfetch)(a,{method:"POST",body:u,credentials:"same-origin",headers:{"Content-Type":"application/json"}});case 6:return p=e.sent,e.next=9,p.json();case 9:return d=e.sent,e.abrupt("return",{error:!1,jobId:null!==(c=d.id)&&void 0!==c?c:null});case 13:return e.prev=13,e.t0=e.catch(3),e.abrupt("return",{error:!0,jobId:null});case 16:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t,r){return e.apply(this,arguments)}}()}),Object.defineProperty(this,S,{writable:!0,value:function(){var e=(0,n.Z)(l().mark((function e(t,r,n){var a,u,c,p,d,v;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(0,i.Z)(o,y)[y](t),u=(0,i.Z)(o,m)[m](t,r,n),e.prev=2,e.next=5,(0,s.hfetch)(a,{method:"POST",body:u,credentials:"same-origin",headers:{"Content-Type":"application/x-www-form-urlencoded"}});case 5:return d=e.sent,e.next=8,d.json();case 8:return v=e.sent,e.abrupt("return",{error:!1,jobId:null!==(c=null===v||void 0===v||null===(p=v.serviceResponse)||void 0===p?void 0:p.jobID)&&void 0!==c?c:null});case 12:return e.prev=12,e.t0=e.catch(2),e.abrupt("return",{error:!0,jobId:null});case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t,r,n){return e.apply(this,arguments)}}()}),this.getJobStatusById=function(){var e=(0,n.Z)(l().mark((function e(t){var r,n,a,u;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",{error:!0,status:null});case 2:return r=(0,i.Z)(o,j)[j](t),e.prev=3,e.next=6,(0,s.hfetch)(r);case 6:return a=e.sent,e.next=9,a.json();case 9:return u=e.sent,e.abrupt("return",{error:!1,status:null!==(n=null===u||void 0===u?void 0:u.status)&&void 0!==n?n:null});case 13:return e.prev=13,e.t0=e.catch(3),e.abrupt("return",{error:!0,status:null});case 16:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t){return e.apply(this,arguments)}}(),Object.defineProperty(this,O,{writable:!0,value:function(e){return"".concat((0,i.Z)(o,d)[d],"/fmeproxy/fmerest/v3/repositories/").concat(e.repository,"/items/").concat(e.workspace,"/parameters/")}}),Object.defineProperty(this,w,{writable:!0,value:function(e){return"".concat((0,i.Z)(o,d)[d],"/fmeproxy/fmerest/v3/transformations/submit/").concat(e.repository,"/").concat(e.workspace,"/")}}),Object.defineProperty(this,y,{writable:!0,value:function(e){return"".concat((0,i.Z)(o,d)[d],"/fmeproxy/fmedatadownload/").concat(e.repository,"/").concat(e.workspace,"/")}}),Object.defineProperty(this,j,{writable:!0,value:function(e){return"".concat((0,i.Z)(o,d)[d],"/fmeproxy/fmerest/v3/transformations/jobs/id/").concat(e,"/")}}),(0,i.Z)(this,p)[p]=t.options,(0,i.Z)(this,d)[d]=t.app.config.appConfig.mapserviceBase,(0,i.Z)(this,f)[f]=null!==(r=null===(a=t.app.config.userDetails)||void 0===a?void 0:a.mail)&&void 0!==r?r:"",(0,i.Z)(this,v)[v]=t.mapViewModel}));t.default=x}}]);
//# sourceMappingURL=2564.18d7df2e.chunk.js.map