"use strict";(self.webpackChunkhajk_client=self.webpackChunkhajk_client||[]).push([[3675],{73675:function(e,t,o){o.r(t);var i=o(15671),r=o(43144),n=o(42708),a=o(62652),s=o(34951),c=o(5426),d=o(29409),l=o(56134),u=o(64665),h=o(18029),g=o(5400),p=o(66233),v=o(90927),m=function(){function e(t){var o,r,l=this;(0,i.Z)(this,e),this.addMarker=function(e){var t=new a.Z({geometry:new d.Z(e)}),o=new u.ZP({image:new h.Z({anchor:[.5,1],scale:.15,src:"marker.png"})});t.setStyle(o),l.vector.getSource().clear(),l.source.addFeature(t)},this.centerOnMarker=function(){l.vector.getSource().getFeatures().length>0&&l.map.getView().setCenter(l.vector.getSource().getFeatures()[0].getGeometry().getCoordinates())},this.zoomOnMarker=function(){l.vector.getSource().getFeatures().length>0&&l.map.getView().fit(l.vector.getSource().getFeatures()[0].getGeometry())},this.goToUserLocation=function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(e){var t=new d.Z([e.coords.longitude,e.coords.latitude]);t.transform("EPSG:4326",l.map.getView().getProjection().getCode()),l.coordinates=t.getCoordinates(),l.localObserver.publish("newCoordinates",{coordinates:l.coordinates,proj:l.map.getView().getProjection().getCode(),force:!0}),l.map.getView().setCenter(t.getCoordinates())}),(function(e){1===e.code&&l.localObserver.publish("location-permissions-denied")}))},this.resetCoords=function(){l.vector.getSource().clear(),l.localObserver.publish("resetCoordinates"),l.coordinates=void 0},this.handleDrawEnd=function(e){l.coordinates=e.feature.getGeometry().getCoordinates(),l.addMarker(l.coordinates),l.localObserver.publish("newCoordinates",{coordinates:l.coordinates,proj:l.map.getView().getProjection(),force:!0})},this.app=t.app,this.map=t.map,this.localObserver=t.localObserver,this.thousandSeparator=null!==(o=t.options.thousandSeparator)&&void 0!==o&&o,this.showFieldsOnStart=null!==(r=t.options.showFieldsOnStart)&&void 0!==r&&r,this.coordinates=void 0,this.transformations=t.options.transformations,this.transformations&&0!==this.transformations.length?this.transformations.forEach((function(e){var t,o,i,r,n,a,s,c;e.code=null!==(t=e.code)&&void 0!==t?t:"",e.precision=null!==(o=e.precision)&&void 0!==o?o:3,e.default=null!==(i=e.default)&&void 0!==i&&i,e.title=null!==(r=e.title)&&void 0!==r?r:"",e.xtitle=null!==(n=e.xtitle)&&void 0!==n?n:"",e.ytitle=null!==(a=e.ytitle)&&void 0!==a?a:"",e.inverseAxis=null!==(s=e.inverseAxis)&&void 0!==s?s:"",e.coordinates=null!==(c=e.coordinates)&&void 0!==c?c:""})):this.transformations=[{code:"EPSG:4326",precision:3,default:!1,hint:"",title:"WGS84",xtitle:"Lng",ytitle:"Lat",inverseAxis:!0}],this.source=new c.Z,this.vector=new s.Z({layerType:"system",zIndex:5e3,name:"pluginCoordinate",caption:"Coordinate layer",source:this.source}),this.map.addLayer(this.vector),this.localObserver.subscribe("newCoordinates",(function(e){var t=e.coordinates;e.proj!==l.map.getView().getProjection().getCode()&&(t=(0,n.vs)(e.coordinates,e.proj,l.map.getView().getProjection().getCode())),l.addMarker(t)}))}return(0,r.Z)(e,[{key:"activate",value:function(){this.addInteraction(),this.localObserver.publish("showSnackbar"),this.showFieldsOnStart&&this.localObserver.publish("newCoordinates",{coordinates:this.map.getView().getCenter(),proj:this.map.getView().getProjection().getCode(),force:!0})}},{key:"deactivate",value:function(){this.removeInteraction(),this.vector.getSource().clear(),this.localObserver.publish("hideSnackbar")}},{key:"addInteraction",value:function(){this.draw=new l.ZP({source:this.source,type:"Point",style:new u.ZP({image:new g.Z({radius:5,stroke:new p.Z({color:"rgba(0, 0, 0, 0.7)"}),fill:new v.Z({color:"rgba(255, 255, 255, 0.2)"})})})}),this.draw.on("drawend",this.handleDrawEnd),this.map.addInteraction(this.draw),this.map.clickLock.add("coordinates"),this.map.snapHelper.add("coordinates")}},{key:"removeInteraction",value:function(){this.map.snapHelper.delete("coordinates"),this.map.removeInteraction(this.draw),this.map.clickLock.delete("coordinates")}}]),e}();t.default=m}}]);
//# sourceMappingURL=3675.11c22a73.chunk.js.map