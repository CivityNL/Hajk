"use strict";(self.webpackChunkhajk_client=self.webpackChunkhajk_client||[]).push([[2670],{42670:function(e,t,n){var i=n(15671),s=n(43144),o=n(60136),a=n(29388),r=n(45957),l=n(5989),h=n(99148),u=n(37130),d=n(30923),g=n(1408),f="element",c="map",v="offset",p="position",m="positioning",P=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(e){var s;return(0,i.Z)(this,n),(s=t.call(this)).on,s.once,s.un,s.options=e,s.id=e.id,s.insertFirst=void 0===e.insertFirst||e.insertFirst,s.stopEvent=void 0===e.stopEvent||e.stopEvent,s.element=document.createElement("div"),s.element.className=void 0!==e.className?e.className:"ol-overlay-container "+h.$A,s.element.style.position="absolute",s.element.style.pointerEvents="auto",s.autoPan=!0===e.autoPan?{}:e.autoPan||void 0,s.rendered={transform_:"",visible:!0},s.mapPostrenderListenerKey=null,s.addChangeListener(f,s.handleElementChanged),s.addChangeListener(c,s.handleMapChanged),s.addChangeListener(v,s.handleOffsetChanged),s.addChangeListener(p,s.handlePositionChanged),s.addChangeListener(m,s.handlePositioningChanged),void 0!==e.element&&s.setElement(e.element),s.setOffset(void 0!==e.offset?e.offset:[0,0]),s.setPositioning(e.positioning||"top-left"),void 0!==e.position&&s.setPosition(e.position),s}return(0,s.Z)(n,[{key:"getElement",value:function(){return this.get(f)}},{key:"getId",value:function(){return this.id}},{key:"getMap",value:function(){return this.get(c)||null}},{key:"getOffset",value:function(){return this.get(v)}},{key:"getPosition",value:function(){return this.get(p)}},{key:"getPositioning",value:function(){return this.get(m)}},{key:"handleElementChanged",value:function(){(0,g.ep)(this.element);var e=this.getElement();e&&this.element.appendChild(e)}},{key:"handleMapChanged",value:function(){this.mapPostrenderListenerKey&&((0,g.ZF)(this.element),(0,d.bN)(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var e=this.getMap();if(e){this.mapPostrenderListenerKey=(0,d.oL)(e,l.Z.POSTRENDER,this.render,this),this.updatePixelPosition();var t=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?t.insertBefore(this.element,t.childNodes[0]||null):t.appendChild(this.element),this.performAutoPan()}}},{key:"render",value:function(){this.updatePixelPosition()}},{key:"handleOffsetChanged",value:function(){this.updatePixelPosition()}},{key:"handlePositionChanged",value:function(){this.updatePixelPosition(),this.performAutoPan()}},{key:"handlePositioningChanged",value:function(){this.updatePixelPosition()}},{key:"setElement",value:function(e){this.set(f,e)}},{key:"setMap",value:function(e){this.set(c,e)}},{key:"setOffset",value:function(e){this.set(v,e)}},{key:"setPosition",value:function(e){this.set(p,e)}},{key:"performAutoPan",value:function(){this.autoPan&&this.panIntoView(this.autoPan)}},{key:"panIntoView",value:function(e){var t=this.getMap();if(t&&t.getTargetElement()&&this.get(p)){var n=this.getRect(t.getTargetElement(),t.getSize()),i=this.getElement(),s=this.getRect(i,[(0,g.iO)(i),(0,g.Pb)(i)]),o=void 0===(e=e||{}).margin?20:e.margin;if(!(0,u.containsExtent)(n,s)){var a=s[0]-n[0],r=n[2]-s[2],l=s[1]-n[1],h=n[3]-s[3],d=[0,0];if(a<0?d[0]=a-o:r<0&&(d[0]=Math.abs(r)+o),l<0?d[1]=l-o:h<0&&(d[1]=Math.abs(h)+o),0!==d[0]||0!==d[1]){var f=t.getView().getCenterInternal(),c=t.getPixelFromCoordinateInternal(f);if(!c)return;var v=[c[0]+d[0],c[1]+d[1]],m=e.animation||{};t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(v),duration:m.duration,easing:m.easing})}}}}},{key:"getRect",value:function(e,t){var n=e.getBoundingClientRect(),i=n.left+window.pageXOffset,s=n.top+window.pageYOffset;return[i,s,i+t[0],s+t[1]]}},{key:"setPositioning",value:function(e){this.set(m,e)}},{key:"setVisible",value:function(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}},{key:"updatePixelPosition",value:function(){var e=this.getMap(),t=this.getPosition();if(e&&e.isRendered()&&t){var n=e.getPixelFromCoordinate(t),i=e.getSize();this.updateRenderedPosition(n,i)}else this.setVisible(!1)}},{key:"updateRenderedPosition",value:function(e,t){var n=this.element.style,i=this.getOffset(),s=this.getPositioning();this.setVisible(!0);var o=Math.round(e[0]+i[0])+"px",a=Math.round(e[1]+i[1])+"px",r="0%",l="0%";"bottom-right"==s||"center-right"==s||"top-right"==s?r="-100%":"bottom-center"!=s&&"center-center"!=s&&"top-center"!=s||(r="-50%"),"bottom-left"==s||"bottom-center"==s||"bottom-right"==s?l="-100%":"center-left"!=s&&"center-center"!=s&&"center-right"!=s||(l="-50%");var h="translate(".concat(r,", ").concat(l,") translate(").concat(o,", ").concat(a,")");this.rendered.transform_!=h&&(this.rendered.transform_=h,n.transform=h)}},{key:"getOptions",value:function(){return this.options}}]),n}(r.Z);t.Z=P}}]);
//# sourceMappingURL=2670.8c78d654.chunk.js.map