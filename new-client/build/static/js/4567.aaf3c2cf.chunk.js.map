{"version":3,"file":"static/js/4567.aaf3c2cf.chunk.js","mappings":"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","sources":["plugins/Collector/components/Page.js","plugins/Collector/components/Toolbar.js"],"sourcesContent":["import React, { Component } from \"react\";\nimport { styled } from \"@mui/material/styles\";\nimport Box from \"@mui/material/Box\";\nimport Typography from \"@mui/material/Typography\";\nimport Parser from \"html2json\";\nimport Button from \"@mui/material/Button\";\nimport Input from \"@mui/material/Input\";\nimport TextField from \"@mui/material/TextField\";\nimport Checkbox from \"@mui/material/Checkbox\";\nimport NativeSelect from \"@mui/material/NativeSelect\";\nimport FormLabel from \"@mui/material/FormLabel\";\nimport FormControl from \"@mui/material/FormControl\";\nimport FormGroup from \"@mui/material/FormGroup\";\nimport FormControlLabel from \"@mui/material/FormControlLabel\";\nimport ArrowForwardIcon from \"@mui/icons-material/ArrowForward\";\nimport ArrowBackIcon from \"@mui/icons-material/ArrowBack\";\nimport Slide from \"@mui/material/Slide\";\nimport Toolbar from \"./Toolbar.js\";\nimport { withSnackbar } from \"notistack\";\n\nconst PageContent = styled(\"div\")(() => ({\n  height: \"calc(100% - 60px)\",\n  overflowX: \"hidden\",\n  borderBottom: \"1px solid #ccc\",\n}));\n\nconst PageContentInner = styled(\"div\")(() => ({\n  paddingBottom: \"10px\",\n}));\n\nclass Page extends Component {\n  constructor(props) {\n    super(props);\n    if (props.page.text) {\n      var json = Parser.html2json(props.page.text);\n      this.state = {\n        json: json,\n        displayThankYou: false,\n      };\n      this.formErrors = {};\n    }\n  }\n\n  getError(field) {\n    return this.formErrors.hasOwnProperty(field.name) ? (\n      <div>{this.formErrors[field.name]}</div>\n    ) : null;\n  }\n\n  checkInteger(name, value) {\n    var formValues = Object.assign({}, this.props.model.formValues);\n    if (/^\\d+$/.test(value) || value === \"\") {\n      formValues[name] = value;\n    } else {\n      if (!this.props.model.formValues[name]) {\n        formValues[name] = \"\";\n      }\n    }\n    this.props.model.formValues = formValues;\n    this.forceUpdate();\n  }\n\n  checkNumber(name, value) {\n    var formValues = Object.assign({}, this.props.model.formValues);\n    if (/^\\d+([.,](\\d+)?)?$/.test(value) || value === \"\") {\n      value = value.replace(\",\", \".\");\n      formValues[name] = value;\n    } else {\n      if (!this.props.model.formValues[name]) {\n        formValues[name] = \"\";\n      }\n    }\n    this.props.model.formValues = formValues;\n    this.forceUpdate();\n  }\n\n  checkUrl(name, value) {\n    var regex =\n      /^(https?|ftp):\\/\\/(((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!$&'()*+,;=]|:)*@)?(((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5]))|((([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)+(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.?)(:\\d*)?)(\\/((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!$&'()*+,;=]|:|@)+(\\/(([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!$&'()*+,;=]|:|@)*)*)?)?(\\?((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!$&'()*+,;=]|:|@)|[\\uE000-\\uF8FF]|\\/|\\?)*)?(#((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!$&'()*+,;=]|:|@)|\\/|\\?)*)?$/i;\n    var valid = regex.test(value);\n    var formValues = Object.assign({}, this.props.model.formValues);\n    if (valid || value === \"\") {\n      formValues[name] = value;\n      delete this.formErrors[name];\n    } else {\n      formValues[name] = \"\";\n      this.formErrors[name] =\n        \"Ange en giltig url. t.ex. https://www.example.com\";\n    }\n    this.props.model.formValues = formValues;\n    this.forceUpdate();\n  }\n\n  checkText(name, value) {\n    var formValues = Object.assign({}, this.props.model.formValues);\n    formValues[name] = value;\n    this.props.model.formValues = formValues;\n    this.forceUpdate();\n  }\n\n  checkSelect(name, value) {\n    var formValues = Object.assign({}, this.props.model.formValues);\n    formValues[name] = value;\n    this.props.model.formValues = formValues;\n    this.forceUpdate();\n  }\n\n  checkMultiple(name, checked, value, index) {\n    var formValues = Object.assign({}, this.props.model.formValues);\n    formValues[name][index].checked = checked;\n    this.props.model.formValues = formValues;\n    this.forceUpdate();\n  }\n\n  checkDate(name, date) {\n    var formValues = Object.assign({}, this.props.model.formValues);\n    formValues[name] = date;\n    this.props.model.formValues = formValues;\n    this.forceUpdate();\n  }\n\n  getValueMarkup(field, label) {\n    if (!field) return null;\n\n    if (field.dataType === \"int\") {\n      field.textType = \"heltal\";\n    }\n\n    if (field.dataType === \"number\") {\n      field.textType = \"nummer\";\n    }\n\n    if (field.dataType === \"date\") {\n      field.textType = \"datum\";\n    }\n\n    var value = this.props.model.formValues[field.name];\n\n    if (value === undefined || value === null) {\n      value = \"\";\n    }\n\n    if (value === \"\" && field.initialRender) {\n      if (field.defaultValue !== null) {\n        value = field.defaultValue;\n      }\n    }\n\n    if (Array.isArray(label)) {\n      label = label.join(\" \");\n    }\n\n    switch (field.textType) {\n      case \"heltal\":\n        return (\n          <TextField\n            id={field.id}\n            label={label || field.name}\n            sx={{ minWidth: \"60%\" }}\n            margin=\"normal\"\n            value={value}\n            onChange={(e) => {\n              this.checkInteger(field.name, e.target.value);\n              field.initialRender = false;\n            }}\n          />\n        );\n      case \"nummer\":\n        return (\n          <TextField\n            id={field.id}\n            label={label || field.name}\n            sx={{ minWidth: \"60%\" }}\n            margin=\"normal\"\n            value={value}\n            onChange={(e) => {\n              this.checkNumber(field.name, e.target.value);\n              field.initialRender = false;\n            }}\n          />\n        );\n      case \"datum\":\n        return (\n          <TextField\n            id={field.id}\n            label={label || field.name}\n            sx={{ minWidth: \"60%\" }}\n            type=\"datetime-local\"\n            margin=\"normal\"\n            value={value}\n            onChange={(e) => {\n              this.checkDate(field.name, e.target.value);\n              field.initialRender = false;\n            }}\n            InputLabelProps={{\n              shrink: true,\n            }}\n          />\n        );\n      case \"url\":\n      case \"fritext\":\n        return (\n          <>\n            <TextField\n              id={field.id}\n              multiline\n              label={label || field.name}\n              sx={{ minWidth: \"60%\" }}\n              margin=\"normal\"\n              value={value}\n              onChange={(e) => {\n                this.checkText(field.name, e.target.value);\n                field.initialRender = false;\n              }}\n              onBlur={(e) => {\n                if (field.textType === \"url\") {\n                  this.checkUrl(field.name, e.target.value);\n                }\n                field.initialRender = false;\n              }}\n            />\n            {this.getError(field)}\n          </>\n        );\n      case \"flerval\":\n        let defaultValues = [];\n        if (typeof field.defaultValue === \"string\") {\n          defaultValues = field.defaultValue.split(\",\");\n        }\n        if (field.initialRender) {\n          defaultValues.forEach((defaultValue) => {\n            value.forEach((val) => {\n              if (defaultValue === val.value) {\n                val.checked = true;\n              }\n            });\n          });\n        }\n\n        let checkboxes = field.values.map((val, i) => {\n          var id = field.name + i,\n            item = (Array.isArray(value) &&\n              value.find((item) => item.value === val)) || {\n              checked: false,\n            };\n\n          return (\n            <FormControlLabel\n              key={id}\n              control={\n                <Checkbox\n                  checked={item.checked}\n                  onChange={(e) => {\n                    this.checkMultiple(field.name, e.target.checked, val, i);\n                    field.initialRender = false;\n                  }}\n                />\n              }\n              label={val}\n            />\n          );\n        });\n        return (\n          <div>\n            <FormControl component=\"fieldset\">\n              <FormLabel component=\"legend\">{label || field.name}</FormLabel>\n              <FormGroup>{checkboxes}</FormGroup>\n            </FormControl>\n          </div>\n        );\n      case \"lista\":\n        let options = [];\n        if (Array.isArray(field.values)) {\n          options = field.values.map((val, i) => (\n            <option key={i} value={val}>\n              {val}\n            </option>\n          ));\n          if (field.defaultValue === undefined || field.defaultValue === \"\") {\n            options.unshift(\n              <option key=\"-1\" value=\"\">\n                -Välj värde-\n              </option>\n            );\n          }\n        }\n\n        if ((!value || value === \"\") && field.defaultValue) {\n          value = field.defaultValue;\n          if (field.initialRender !== false) {\n            setTimeout(() => {\n              this.checkSelect(field.name, value);\n            }, 0);\n          }\n        }\n\n        return (\n          <div>\n            <FormControl component=\"fieldset\">\n              <FormLabel component=\"legend\">{label || field.name}</FormLabel>\n              <NativeSelect\n                value={value}\n                input={<Input name={field.name} id={field.name} />}\n                onChange={(e) => {\n                  this.checkSelect(field.name, e.target.value);\n                  field.initialRender = false;\n                }}\n              >\n                {options}\n              </NativeSelect>\n            </FormControl>\n          </div>\n        );\n      case null:\n        return <span>{value}</span>;\n      default:\n        return <span>{value}</span>;\n    }\n  }\n\n  getFieldConfig(fieldName) {\n    return this.props.serviceConfig.editableFields.find(\n      (field) => field.name === fieldName\n    );\n  }\n\n  renderFromAttribute(attr) {\n    if (attr) {\n      if (attr.type && attr.type === \"toolbar\") {\n        return (\n          <Toolbar\n            ref=\"toolbar\"\n            field={attr.field}\n            geotype={attr.geotype}\n            serviceConfig={this.props.serviceConfig}\n            enabled={true}\n            model={this.props.model}\n            onChangeTool={() => {\n              if (window.innerWidth < 600) {\n                this.props.model.globalObserver.publish(\"core.minimizeWindow\");\n                this.props.enqueueSnackbar(\n                  \"Klicka i kartan för att rita objekt\"\n                );\n              }\n            }}\n          />\n        );\n      }\n      if (attr.field) {\n        return this.getValueMarkup(this.getFieldConfig(attr.field), attr.label);\n      }\n    } else {\n      return null;\n    }\n  }\n\n  renderFromJsonDom(json) {\n    if (json && json.child) {\n      return json.child.map((child, i) => {\n        if (child.node === \"element\") {\n          switch (child.tag) {\n            case \"div\":\n              return (\n                <div key={i}>\n                  {this.renderFromAttribute(child.attr)}\n                  {this.renderFromJsonDom(child)}\n                </div>\n              );\n            case \"p\":\n              return (\n                <p key={i}>\n                  {this.renderFromAttribute(child.attr)}\n                  {this.renderFromJsonDom(child)}\n                </p>\n              );\n            case \"label\":\n              return <label key={i}>{this.renderFromJsonDom(child)}</label>;\n            case \"h1\":\n              return (\n                <Typography variant=\"h1\" key={i}>\n                  {this.renderFromJsonDom(child)}\n                </Typography>\n              );\n            case \"h2\":\n              return (\n                <Typography variant=\"h2\" key={i}>\n                  {this.renderFromJsonDom(child)}\n                </Typography>\n              );\n            case \"h3\":\n              return (\n                <Typography variant=\"h3\" key={i}>\n                  {this.renderFromJsonDom(child)}\n                </Typography>\n              );\n            case \"h4\":\n              return (\n                <Typography variant=\"h4\" key={i}>\n                  {this.renderFromJsonDom(child)}\n                </Typography>\n              );\n            case \"h5\":\n              return (\n                <Typography variant=\"h5\" key={i}>\n                  {this.renderFromJsonDom(child)}\n                </Typography>\n              );\n            case \"h6\":\n              return (\n                <Typography variant=\"h6\" key={i}>\n                  {this.renderFromJsonDom(child)}\n                </Typography>\n              );\n            case \"a\":\n              return (\n                <a\n                  key={i}\n                  href={child.attr[\"href\"]}\n                  rel=\"noopener noreferrer\"\n                  target=\"_blank\"\n                >\n                  {this.renderFromJsonDom(child)}\n                </a>\n              );\n            case \"ul\":\n              return <ul key={i}>{this.renderFromJsonDom(child)}</ul>;\n            case \"li\":\n              return <li key={i}>{this.renderFromJsonDom(child)}</li>;\n            case \"br\":\n              return <br key={i} />;\n            case \"img\":\n              return (\n                <img\n                  key={i}\n                  src={child.attr[\"src\"]}\n                  width={child.attr[\"width\"]}\n                  height={child.attr[\"height\"]}\n                  alt={child.attr[\"alt\"]}\n                >\n                  {this.renderFromJsonDom(child)}\n                </img>\n              );\n            default:\n              return null;\n          }\n        }\n        if (child.node === \"text\") {\n          return <span key={i}>{child.text}</span>;\n        }\n        return null;\n      });\n    } else {\n      return null;\n    }\n  }\n\n  save = () => {\n    this.props.model.save(\n      (r) => {\n        if (\n          r &&\n          r.TransactionResponse &&\n          r.TransactionResponse.TransactionSummary &&\n          r.TransactionResponse.TransactionSummary.totalInserted\n        ) {\n          const ins =\n            r.TransactionResponse.TransactionSummary.totalInserted.toString();\n          if (Number(ins) > 0) {\n            if (this.props.options.showThankYou) {\n              this.setState({\n                displayThankYou: true,\n              });\n            } else {\n              this.setState(\n                {\n                  displayThankYou: true,\n                },\n                () => {\n                  this.props.model.observer.publish(\"abort\");\n                }\n              );\n            }\n          } else {\n            this.saveError();\n          }\n        } else {\n          this.saveError();\n        }\n      },\n      (error) => {\n        this.saveError();\n      }\n    );\n  };\n\n  saveError = () => {\n    this.props.model.globalObserver.publish(\n      \"core.alert\",\n      \"Det gick inte att spara, försök igen senare.\"\n    );\n  };\n\n  renderButtons() {\n    const { page, numPages, onPrevPage, onNextPage } = this.props;\n\n    const prevButton = (\n      <Button\n        variant=\"contained\"\n        sx={{ float: \"left\", margin: 1 }}\n        onClick={() => {\n          if (typeof this.refs.toolbar !== \"undefined\") {\n            this.refs.toolbar.storeValues();\n          }\n          onPrevPage();\n        }}\n      >\n        <ArrowBackIcon />\n      </Button>\n    );\n\n    const nextButton = (\n      <Button\n        variant=\"contained\"\n        sx={{ float: \"right\", margin: 1 }}\n        onClick={() => {\n          if (typeof this.refs.toolbar !== \"undefined\") {\n            this.refs.toolbar.storeValues();\n          }\n          onNextPage();\n        }}\n      >\n        <ArrowForwardIcon />\n      </Button>\n    );\n\n    const sendButton = (\n      <Button\n        variant=\"contained\"\n        sx={{ float: \"right\", margin: 1 }}\n        onClick={this.save}\n      >\n        Skicka\n      </Button>\n    );\n\n    const okButton = (\n      <Button\n        variant=\"contained\"\n        sx={{ float: \"right\", margin: 1 }}\n        onClick={() => {\n          this.props.model.observer.publish(\"abort\");\n        }}\n      >\n        {this.props.options.collectAgain ? \"Tyck till igen\" : \"Stäng\"}\n      </Button>\n    );\n\n    const closeButton = (\n      <Button\n        variant=\"contained\"\n        sx={{ float: \"right\", margin: 1 }}\n        onClick={() => {\n          this.props.model.app.windows.forEach((window) => {\n            if (window.type === \"collector\") {\n              window.closeWindow();\n            }\n          });\n        }}\n      >\n        Stäng\n      </Button>\n    );\n\n    if (this.state.displayThankYou) {\n      if (this.props.options.collectAgain) {\n        return (\n          <div>\n            {okButton}\n            {closeButton}\n          </div>\n        );\n      } else {\n        return <div>{okButton}</div>;\n      }\n    }\n\n    if (numPages === 1) {\n      return <div>{sendButton}</div>;\n    }\n    if (numPages > 1 && page.order === numPages - 1) {\n      return (\n        <div>\n          {prevButton}\n          {sendButton}\n        </div>\n      );\n    }\n    if (page.order > 0 && page.order < numPages - 1) {\n      return (\n        <div>\n          {prevButton}\n          {nextButton}\n        </div>\n      );\n    }\n    if (page.order === 0) {\n      return <div>{nextButton}</div>;\n    }\n\n    return null;\n  }\n\n  createMarkup = () => {\n    return {\n      __html: this.props.options.thankYou,\n    };\n  };\n\n  renderThankYou() {\n    return <div dangerouslySetInnerHTML={this.createMarkup()}></div>;\n  }\n\n  renderSlide() {\n    const { page } = this.props;\n    const { json } = this.state;\n    return (\n      <Slide\n        direction={this.props.direction || \"left\"}\n        in={true}\n        mountOnEnter\n        unmountOnExit\n        sx={{ height: \"100%\" }}\n      >\n        <div>\n          <Typography variant=\"h4\">{page.header}</Typography>\n          <PageContentInner>{this.renderFromJsonDom(json)}</PageContentInner>\n        </div>\n      </Slide>\n    );\n  }\n\n  render() {\n    const { displayThankYou } = this.state;\n    return (\n      this.props.active && (\n        <Box sx={{ height: \"100%\" }}>\n          <PageContent>\n            {displayThankYou ? this.renderThankYou() : this.renderSlide()}\n          </PageContent>\n          <div>{this.renderButtons()}</div>\n        </Box>\n      )\n    );\n  }\n}\n\nexport default withSnackbar(Page);\n","import React, { Component } from \"react\";\nimport { styled } from \"@mui/material/styles\";\nimport Button from \"@mui/material/Button\";\nimport ScatterPlotIcon from \"@mui/icons-material/ScatterPlot\";\nimport BorderStyleIcon from \"@mui/icons-material/BorderStyle\";\nimport LinearScaleIcon from \"@mui/icons-material/LinearScale\";\nimport Typography from \"@mui/material/Typography\";\nimport WKT from \"ol/format/WKT\";\n\nconst StyledButton = styled(Button)(({ theme }) => ({\n  margin: theme.spacing(1),\n  width: \"115px\",\n}));\n\nconst ToolbarDiv = styled(\"div\")(({ theme }) => ({\n  margin: \"5px\",\n}));\n\nclass Toolbar extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      activeTool: undefined,\n    };\n    this.props.model.observer.subscribe(\"abortInteraction\", () => {\n      this.setState({\n        activeTool: undefined,\n      });\n    });\n\n    // Clear layer and attempt to read saved values\n    if (this.props.model.wkt) {\n      this.props.model.vectorSource.clear();\n\n      const format = new WKT();\n      const WKTString = this.props.model.formValues[this.props.field];\n      if (WKTString && WKTString.length > 0) {\n        let features = format.readFeatures(WKTString);\n        features.forEach((feature) => {\n          this.props.model.vectorSource.addFeature(feature);\n        });\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    this.props.model.observer.unsubscribe(\"abortInteraction\");\n    this.props.model.deactivateInteraction();\n  }\n\n  changeTool(type, geometryType) {\n    const { model } = this.props;\n    this.props.onChangeTool();\n    if (geometryType && this.state.activeTool === geometryType.toLowerCase()) {\n      model.deactivateInteraction();\n      return this.setState({\n        activeTool: undefined,\n      });\n    }\n    if (this.state.activeTool === type) {\n      model.deactivateInteraction();\n      return this.setState({\n        activeTool: undefined,\n      });\n    }\n    model.deactivateInteraction();\n\n    switch (type) {\n      case \"add\":\n        model.activateInteraction(\"add\", geometryType);\n        break;\n      case \"remove\":\n        model.activateInteraction(\"remove\");\n        break;\n      case \"modify\":\n        model.activateInteraction(\"modify\");\n        break;\n      case \"move\":\n        model.activateInteraction(\"move\");\n        break;\n      default:\n        break;\n    }\n  }\n\n  onAddPointClicked() {\n    this.setState({ activeTool: \"point\" });\n    this.changeTool(\"add\", \"Point\");\n  }\n\n  onAddLineClicked() {\n    this.setState({ activeTool: \"linestring\" });\n    this.changeTool(\"add\", \"LineString\");\n  }\n\n  onAddPolygonClicked() {\n    this.setState({ activeTool: \"polygon\" });\n    this.changeTool(\"add\", \"Polygon\");\n  }\n\n  getStatusMessage(data) {\n    if (!data) {\n      return (\n        <Typography>\n          Uppdateringen lyckades men det upptäcktes inte några ändringar.\n        </Typography>\n      );\n    }\n    if (data.ExceptionReport) {\n      return (\n        <Typography>\n          Uppdateringen misslyckades:{\" \"}\n          {data.ExceptionReport.Exception.ExceptionText.toString()}\n        </Typography>\n      );\n    }\n    if (\n      data.TransactionResponse &&\n      data.TransactionResponse.TransactionSummary\n    ) {\n      return (\n        <div>\n          <Typography>Uppdateringen lyckades.</Typography>\n          <Typography>\n            Antal skapade objekt:{\" \"}\n            {data.TransactionResponse.TransactionSummary.totalInserted.toString()}\n          </Typography>\n          <Typography>\n            Antal borttagna objekt:{\" \"}\n            {data.TransactionResponse.TransactionSummary.totalDeleted.toString()}\n          </Typography>\n          <Typography>\n            Antal uppdaterade objekt:{\" \"}\n            {data.TransactionResponse.TransactionSummary.totalUpdated.toString()}\n          </Typography>\n        </div>\n      );\n    } else {\n      return (\n        <Typography>\n          Status för uppdateringen kunde inte avläsas ur svaret från servern.\n        </Typography>\n      );\n    }\n  }\n\n  onSaveClicked() {\n    if (!this.props.model.editSource) {\n      return;\n    }\n    this.props.model.save((response) => {\n      this.props.model.filty = false;\n      this.props.model.refreshEditingLayer();\n      this.props.app.globalObserver.publish(\n        \"core.alert\",\n        this.getStatusMessage(response)\n      );\n    });\n  }\n\n  onCancelClicked() {\n    this.props.model.deactivate();\n    this.props.panel.setState({\n      checked: false,\n      enabled: false,\n      selectedSource: false,\n    });\n    this.setState({\n      activeTool: undefined,\n    });\n  }\n\n  getSelectedStyle(type) {\n    var style = {};\n    if (type === this.state.activeTool) {\n      style.backgroundColor = \"#ccc\";\n    }\n    return style;\n  }\n\n  storeValues() {\n    // Stores any potential features found on the map as WKT before taking the next or previous step.\n    //These are later pushed to the server on submission.\n    //They are also put on the map again if the user comes back to this step.\n    if (!this.props.model.wkt) {\n      return;\n    }\n    const format = new WKT();\n    let wkt = \"\";\n\n    if (this.props.model.vectorSource.getFeatures().length > 0) {\n      wkt = format.writeFeatures(this.props.model.vectorSource.getFeatures());\n    }\n\n    // Store the converted features in the model\n    let formValues = Object.assign({}, this.props.model.formValues);\n    formValues[this.props.field] = wkt;\n    this.props.model.formValues = formValues;\n    // Clear layer\n    this.props.model.vectorSource.clear();\n  }\n\n  render() {\n    const source = this.props.serviceConfig;\n    var disabled = !this.props.enabled,\n      editPoint = false,\n      editPolygon = false,\n      editLine = false;\n\n    if (this.props.model.wkt) {\n      // WKT gets the information from the tag since there is support for multiple toolbars\n      // Different toolbars can therefore support different types of geometries\n      editPoint = this.props.geotype.indexOf(\"point\") !== -1;\n      editPolygon = this.props.geotype.indexOf(\"polygon\") !== -1;\n      editLine = this.props.geotype.indexOf(\"line\") !== -1;\n    } else if (source) {\n      // Non-WKT only supports insertion of one geometry so it can be retrieved from the source\n      editPoint = source.editPoint;\n      editLine = source.editLine;\n      editPolygon = source.editPolygon;\n    }\n\n    return (\n      <div>\n        <ToolbarDiv>\n          <div>\n            <StyledButton\n              variant=\"contained\"\n              disabled={disabled === false ? !editPoint : disabled}\n              onClick={() => {\n                this.onAddPointClicked();\n              }}\n              type=\"button\"\n              title=\"Lägg till plats\"\n              style={this.getSelectedStyle(\"point\")}\n            >\n              Plats\n              <ScatterPlotIcon sx={{ marginLeft: 1 }} />\n            </StyledButton>\n            <StyledButton\n              variant=\"contained\"\n              disabled={disabled === false ? !editLine : disabled}\n              onClick={() => {\n                this.onAddLineClicked();\n              }}\n              type=\"button\"\n              title=\"Lägg till sträcka\"\n              style={this.getSelectedStyle(\"linestring\")}\n            >\n              Sträcka\n              <LinearScaleIcon sx={{ marginLeft: 1 }} />\n            </StyledButton>\n            <StyledButton\n              variant=\"contained\"\n              disabled={disabled === false ? !editPolygon : disabled}\n              onClick={() => {\n                this.onAddPolygonClicked();\n              }}\n              type=\"button\"\n              title=\"Lägg till område\"\n              style={this.getSelectedStyle(\"polygon\")}\n            >\n              Område\n              <BorderStyleIcon sx={{ marginLeft: 1 }} />\n            </StyledButton>\n          </div>\n        </ToolbarDiv>\n      </div>\n    );\n  }\n}\n\nexport default Toolbar;\n"],"names":["PageContent","styled","height","overflowX","borderBottom","PageContentInner","paddingBottom","Page","props","save","model","r","TransactionResponse","TransactionSummary","totalInserted","ins","toString","Number","options","showThankYou","setState","displayThankYou","observer","publish","saveError","error","globalObserver","createMarkup","__html","thankYou","page","text","json","Parser","state","formErrors","field","this","hasOwnProperty","name","value","formValues","Object","assign","test","forceUpdate","replace","valid","checked","index","date","label","dataType","textType","undefined","initialRender","defaultValue","Array","isArray","join","id","sx","minWidth","margin","onChange","e","checkInteger","target","checkNumber","type","checkDate","InputLabelProps","shrink","multiline","checkText","onBlur","checkUrl","getError","defaultValues","split","forEach","val","checkboxes","values","map","i","item","find","control","checkMultiple","component","unshift","setTimeout","checkSelect","input","fieldName","serviceConfig","editableFields","attr","ref","geotype","enabled","onChangeTool","window","innerWidth","enqueueSnackbar","getValueMarkup","getFieldConfig","child","node","tag","renderFromAttribute","renderFromJsonDom","variant","href","rel","src","width","alt","numPages","onPrevPage","onNextPage","prevButton","float","onClick","refs","toolbar","storeValues","nextButton","sendButton","okButton","collectAgain","closeButton","app","windows","closeWindow","order","dangerouslySetInnerHTML","direction","in","mountOnEnter","unmountOnExit","header","active","renderThankYou","renderSlide","renderButtons","Component","withSnackbar","StyledButton","Button","theme","spacing","ToolbarDiv","Toolbar","activeTool","subscribe","wkt","vectorSource","clear","format","WKT","WKTString","length","readFeatures","feature","addFeature","unsubscribe","deactivateInteraction","geometryType","toLowerCase","activateInteraction","changeTool","data","ExceptionReport","Exception","ExceptionText","totalDeleted","totalUpdated","editSource","response","filty","refreshEditingLayer","getStatusMessage","deactivate","panel","selectedSource","style","backgroundColor","getFeatures","writeFeatures","source","disabled","editPoint","editPolygon","editLine","indexOf","onAddPointClicked","title","getSelectedStyle","marginLeft","onAddLineClicked","onAddPolygonClicked"],"sourceRoot":""}