{"version":3,"file":"static/js/4366.e7017464.chunk.js","mappings":"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","sources":["plugins/Collector/components/Toolbar.js","../node_modules/@mui/icons-material/BorderStyle.js","../node_modules/@mui/icons-material/LinearScale.js","../node_modules/@mui/icons-material/ScatterPlot.js"],"sourcesContent":["import React, { Component } from \"react\";\nimport { styled } from \"@mui/material/styles\";\nimport Button from \"@mui/material/Button\";\nimport ScatterPlotIcon from \"@mui/icons-material/ScatterPlot\";\nimport BorderStyleIcon from \"@mui/icons-material/BorderStyle\";\nimport LinearScaleIcon from \"@mui/icons-material/LinearScale\";\nimport Typography from \"@mui/material/Typography\";\nimport WKT from \"ol/format/WKT\";\n\nconst StyledButton = styled(Button)(({ theme }) => ({\n  margin: theme.spacing(1),\n  width: \"115px\",\n}));\n\nconst ToolbarDiv = styled(\"div\")(({ theme }) => ({\n  margin: \"5px\",\n}));\n\nclass Toolbar extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      activeTool: undefined,\n    };\n    this.props.model.observer.subscribe(\"abortInteraction\", () => {\n      this.setState({\n        activeTool: undefined,\n      });\n    });\n\n    // Clear layer and attempt to read saved values\n    if (this.props.model.wkt) {\n      this.props.model.vectorSource.clear();\n\n      const format = new WKT();\n      const WKTString = this.props.model.formValues[this.props.field];\n      if (WKTString && WKTString.length > 0) {\n        let features = format.readFeatures(WKTString);\n        features.forEach((feature) => {\n          this.props.model.vectorSource.addFeature(feature);\n        });\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    this.props.model.observer.unsubscribe(\"abortInteraction\");\n    this.props.model.deactivateInteraction();\n  }\n\n  changeTool(type, geometryType) {\n    const { model } = this.props;\n    this.props.onChangeTool();\n    if (geometryType && this.state.activeTool === geometryType.toLowerCase()) {\n      model.deactivateInteraction();\n      return this.setState({\n        activeTool: undefined,\n      });\n    }\n    if (this.state.activeTool === type) {\n      model.deactivateInteraction();\n      return this.setState({\n        activeTool: undefined,\n      });\n    }\n    model.deactivateInteraction();\n\n    switch (type) {\n      case \"add\":\n        model.activateInteraction(\"add\", geometryType);\n        break;\n      case \"remove\":\n        model.activateInteraction(\"remove\");\n        break;\n      case \"modify\":\n        model.activateInteraction(\"modify\");\n        break;\n      case \"move\":\n        model.activateInteraction(\"move\");\n        break;\n      default:\n        break;\n    }\n  }\n\n  onAddPointClicked() {\n    this.setState({ activeTool: \"point\" });\n    this.changeTool(\"add\", \"Point\");\n  }\n\n  onAddLineClicked() {\n    this.setState({ activeTool: \"linestring\" });\n    this.changeTool(\"add\", \"LineString\");\n  }\n\n  onAddPolygonClicked() {\n    this.setState({ activeTool: \"polygon\" });\n    this.changeTool(\"add\", \"Polygon\");\n  }\n\n  getStatusMessage(data) {\n    if (!data) {\n      return (\n        <Typography>\n          Uppdateringen lyckades men det upptäcktes inte några ändringar.\n        </Typography>\n      );\n    }\n    if (data.ExceptionReport) {\n      return (\n        <Typography>\n          Uppdateringen misslyckades:{\" \"}\n          {data.ExceptionReport.Exception.ExceptionText.toString()}\n        </Typography>\n      );\n    }\n    if (\n      data.TransactionResponse &&\n      data.TransactionResponse.TransactionSummary\n    ) {\n      return (\n        <div>\n          <Typography>Uppdateringen lyckades.</Typography>\n          <Typography>\n            Antal skapade objekt:{\" \"}\n            {data.TransactionResponse.TransactionSummary.totalInserted.toString()}\n          </Typography>\n          <Typography>\n            Antal borttagna objekt:{\" \"}\n            {data.TransactionResponse.TransactionSummary.totalDeleted.toString()}\n          </Typography>\n          <Typography>\n            Antal uppdaterade objekt:{\" \"}\n            {data.TransactionResponse.TransactionSummary.totalUpdated.toString()}\n          </Typography>\n        </div>\n      );\n    } else {\n      return (\n        <Typography>\n          Status för uppdateringen kunde inte avläsas ur svaret från servern.\n        </Typography>\n      );\n    }\n  }\n\n  onSaveClicked() {\n    if (!this.props.model.editSource) {\n      return;\n    }\n    this.props.model.save((response) => {\n      this.props.model.filty = false;\n      this.props.model.refreshEditingLayer();\n      this.props.app.globalObserver.publish(\n        \"core.alert\",\n        this.getStatusMessage(response)\n      );\n    });\n  }\n\n  onCancelClicked() {\n    this.props.model.deactivate();\n    this.props.panel.setState({\n      checked: false,\n      enabled: false,\n      selectedSource: false,\n    });\n    this.setState({\n      activeTool: undefined,\n    });\n  }\n\n  getSelectedStyle(type) {\n    var style = {};\n    if (type === this.state.activeTool) {\n      style.backgroundColor = \"#ccc\";\n    }\n    return style;\n  }\n\n  storeValues() {\n    // Stores any potential features found on the map as WKT before taking the next or previous step.\n    //These are later pushed to the server on submission.\n    //They are also put on the map again if the user comes back to this step.\n    if (!this.props.model.wkt) {\n      return;\n    }\n    const format = new WKT();\n    let wkt = \"\";\n\n    if (this.props.model.vectorSource.getFeatures().length > 0) {\n      wkt = format.writeFeatures(this.props.model.vectorSource.getFeatures());\n    }\n\n    // Store the converted features in the model\n    let formValues = Object.assign({}, this.props.model.formValues);\n    formValues[this.props.field] = wkt;\n    this.props.model.formValues = formValues;\n    // Clear layer\n    this.props.model.vectorSource.clear();\n  }\n\n  render() {\n    const source = this.props.serviceConfig;\n    var disabled = !this.props.enabled,\n      editPoint = false,\n      editPolygon = false,\n      editLine = false;\n\n    if (this.props.model.wkt) {\n      // WKT gets the information from the tag since there is support for multiple toolbars\n      // Different toolbars can therefore support different types of geometries\n      editPoint = this.props.geotype.indexOf(\"point\") !== -1;\n      editPolygon = this.props.geotype.indexOf(\"polygon\") !== -1;\n      editLine = this.props.geotype.indexOf(\"line\") !== -1;\n    } else if (source) {\n      // Non-WKT only supports insertion of one geometry so it can be retrieved from the source\n      editPoint = source.editPoint;\n      editLine = source.editLine;\n      editPolygon = source.editPolygon;\n    }\n\n    return (\n      <div>\n        <ToolbarDiv>\n          <div>\n            <StyledButton\n              variant=\"contained\"\n              disabled={disabled === false ? !editPoint : disabled}\n              onClick={() => {\n                this.onAddPointClicked();\n              }}\n              type=\"button\"\n              title=\"Lägg till plats\"\n              style={this.getSelectedStyle(\"point\")}\n            >\n              Plats\n              <ScatterPlotIcon sx={{ marginLeft: 1 }} />\n            </StyledButton>\n            <StyledButton\n              variant=\"contained\"\n              disabled={disabled === false ? !editLine : disabled}\n              onClick={() => {\n                this.onAddLineClicked();\n              }}\n              type=\"button\"\n              title=\"Lägg till sträcka\"\n              style={this.getSelectedStyle(\"linestring\")}\n            >\n              Sträcka\n              <LinearScaleIcon sx={{ marginLeft: 1 }} />\n            </StyledButton>\n            <StyledButton\n              variant=\"contained\"\n              disabled={disabled === false ? !editPolygon : disabled}\n              onClick={() => {\n                this.onAddPolygonClicked();\n              }}\n              type=\"button\"\n              title=\"Lägg till område\"\n              style={this.getSelectedStyle(\"polygon\")}\n            >\n              Område\n              <BorderStyleIcon sx={{ marginLeft: 1 }} />\n            </StyledButton>\n          </div>\n        </ToolbarDiv>\n      </div>\n    );\n  }\n}\n\nexport default Toolbar;\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M15 21h2v-2h-2v2zm4 0h2v-2h-2v2zM7 21h2v-2H7v2zm4 0h2v-2h-2v2zm8-4h2v-2h-2v2zm0-4h2v-2h-2v2zM3 3v18h2V5h16V3H3zm16 6h2V7h-2v2z\"\n}), 'BorderStyle');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M19.5 9.5c-1.03 0-1.9.62-2.29 1.5h-2.92c-.39-.88-1.26-1.5-2.29-1.5s-1.9.62-2.29 1.5H6.79c-.39-.88-1.26-1.5-2.29-1.5C3.12 9.5 2 10.62 2 12s1.12 2.5 2.5 2.5c1.03 0 1.9-.62 2.29-1.5h2.92c.39.88 1.26 1.5 2.29 1.5s1.9-.62 2.29-1.5h2.92c.39.88 1.26 1.5 2.29 1.5 1.38 0 2.5-1.12 2.5-2.5s-1.12-2.5-2.5-2.5z\"\n}), 'LinearScale');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _default = (0, _createSvgIcon.default)([/*#__PURE__*/(0, _jsxRuntime.jsx)(\"circle\", {\n  cx: \"7\",\n  cy: \"14\",\n  r: \"3\"\n}, \"0\"), /*#__PURE__*/(0, _jsxRuntime.jsx)(\"circle\", {\n  cx: \"11\",\n  cy: \"6\",\n  r: \"3\"\n}, \"1\"), /*#__PURE__*/(0, _jsxRuntime.jsx)(\"circle\", {\n  cx: \"16.6\",\n  cy: \"17.6\",\n  r: \"3\"\n}, \"2\")], 'ScatterPlot');\n\nexports.default = _default;"],"names":["StyledButton","styled","Button","margin","theme","spacing","width","ToolbarDiv","Toolbar","props","state","activeTool","undefined","model","observer","subscribe","setState","wkt","vectorSource","clear","format","WKT","WKTString","formValues","field","length","readFeatures","forEach","feature","addFeature","this","unsubscribe","deactivateInteraction","type","geometryType","onChangeTool","toLowerCase","activateInteraction","changeTool","data","ExceptionReport","Exception","ExceptionText","toString","TransactionResponse","TransactionSummary","totalInserted","totalDeleted","totalUpdated","editSource","save","response","filty","refreshEditingLayer","app","globalObserver","publish","getStatusMessage","deactivate","panel","checked","enabled","selectedSource","style","backgroundColor","getFeatures","writeFeatures","Object","assign","source","serviceConfig","disabled","editPoint","editPolygon","editLine","geotype","indexOf","variant","onClick","onAddPointClicked","title","getSelectedStyle","sx","marginLeft","onAddLineClicked","onAddPolygonClicked","Component","_interopRequireDefault","require","exports","_createSvgIcon","_jsxRuntime","_default","default","jsx","d","cx","cy","r"],"sourceRoot":""}