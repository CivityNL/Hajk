"use strict";(self.webpackChunkhajk_client=self.webpackChunkhajk_client||[]).push([[4366],{44366:function(e,t,o){o.r(t);var n=o(15671),i=o(43144),a=o(60136),s=o(29388),r=o(72791),c=o(76863),l=o(61091),d=o(16426),p=o(21456),h=o(43526),v=o(4565),u=o(27982),g=o(80184),m=(0,c.ZP)(l.Z)((function(e){return{margin:e.theme.spacing(1),width:"115px"}})),f=(0,c.ZP)("div")((function(e){e.theme;return{margin:"5px"}})),k=function(e){(0,a.Z)(o,e);var t=(0,s.Z)(o);function o(e){var i;if((0,n.Z)(this,o),(i=t.call(this,e)).state={activeTool:void 0},i.props.model.observer.subscribe("abortInteraction",(function(){i.setState({activeTool:void 0})})),i.props.model.wkt){i.props.model.vectorSource.clear();var a=new u.Z,s=i.props.model.formValues[i.props.field];if(s&&s.length>0)a.readFeatures(s).forEach((function(e){i.props.model.vectorSource.addFeature(e)}))}return i}return(0,i.Z)(o,[{key:"componentWillUnmount",value:function(){this.props.model.observer.unsubscribe("abortInteraction"),this.props.model.deactivateInteraction()}},{key:"changeTool",value:function(e,t){var o=this.props.model;if(this.props.onChangeTool(),t&&this.state.activeTool===t.toLowerCase())return o.deactivateInteraction(),this.setState({activeTool:void 0});if(this.state.activeTool===e)return o.deactivateInteraction(),this.setState({activeTool:void 0});switch(o.deactivateInteraction(),e){case"add":o.activateInteraction("add",t);break;case"remove":o.activateInteraction("remove");break;case"modify":o.activateInteraction("modify");break;case"move":o.activateInteraction("move")}}},{key:"onAddPointClicked",value:function(){this.setState({activeTool:"point"}),this.changeTool("add","Point")}},{key:"onAddLineClicked",value:function(){this.setState({activeTool:"linestring"}),this.changeTool("add","LineString")}},{key:"onAddPolygonClicked",value:function(){this.setState({activeTool:"polygon"}),this.changeTool("add","Polygon")}},{key:"getStatusMessage",value:function(e){return e?e.ExceptionReport?(0,g.jsxs)(v.Z,{children:["Uppdateringen misslyckades:"," ",e.ExceptionReport.Exception.ExceptionText.toString()]}):e.TransactionResponse&&e.TransactionResponse.TransactionSummary?(0,g.jsxs)("div",{children:[(0,g.jsx)(v.Z,{children:"Uppdateringen lyckades."}),(0,g.jsxs)(v.Z,{children:["Antal skapade objekt:"," ",e.TransactionResponse.TransactionSummary.totalInserted.toString()]}),(0,g.jsxs)(v.Z,{children:["Antal borttagna objekt:"," ",e.TransactionResponse.TransactionSummary.totalDeleted.toString()]}),(0,g.jsxs)(v.Z,{children:["Antal uppdaterade objekt:"," ",e.TransactionResponse.TransactionSummary.totalUpdated.toString()]})]}):(0,g.jsx)(v.Z,{children:"Status f\xf6r uppdateringen kunde inte avl\xe4sas ur svaret fr\xe5n servern."}):(0,g.jsx)(v.Z,{children:"Uppdateringen lyckades men det uppt\xe4cktes inte n\xe5gra \xe4ndringar."})}},{key:"onSaveClicked",value:function(){var e=this;this.props.model.editSource&&this.props.model.save((function(t){e.props.model.filty=!1,e.props.model.refreshEditingLayer(),e.props.app.globalObserver.publish("core.alert",e.getStatusMessage(t))}))}},{key:"onCancelClicked",value:function(){this.props.model.deactivate(),this.props.panel.setState({checked:!1,enabled:!1,selectedSource:!1}),this.setState({activeTool:void 0})}},{key:"getSelectedStyle",value:function(e){var t={};return e===this.state.activeTool&&(t.backgroundColor="#ccc"),t}},{key:"storeValues",value:function(){if(this.props.model.wkt){var e=new u.Z,t="";this.props.model.vectorSource.getFeatures().length>0&&(t=e.writeFeatures(this.props.model.vectorSource.getFeatures()));var o=Object.assign({},this.props.model.formValues);o[this.props.field]=t,this.props.model.formValues=o,this.props.model.vectorSource.clear()}}},{key:"render",value:function(){var e=this,t=this.props.serviceConfig,o=!this.props.enabled,n=!1,i=!1,a=!1;return this.props.model.wkt?(n=-1!==this.props.geotype.indexOf("point"),i=-1!==this.props.geotype.indexOf("polygon"),a=-1!==this.props.geotype.indexOf("line")):t&&(n=t.editPoint,a=t.editLine,i=t.editPolygon),(0,g.jsx)("div",{children:(0,g.jsx)(f,{children:(0,g.jsxs)("div",{children:[(0,g.jsxs)(m,{variant:"contained",disabled:!1===o?!n:o,onClick:function(){e.onAddPointClicked()},type:"button",title:"L\xe4gg till plats",style:this.getSelectedStyle("point"),children:["Plats",(0,g.jsx)(d.Z,{sx:{marginLeft:1}})]}),(0,g.jsxs)(m,{variant:"contained",disabled:!1===o?!a:o,onClick:function(){e.onAddLineClicked()},type:"button",title:"L\xe4gg till str\xe4cka",style:this.getSelectedStyle("linestring"),children:["Str\xe4cka",(0,g.jsx)(h.Z,{sx:{marginLeft:1}})]}),(0,g.jsxs)(m,{variant:"contained",disabled:!1===o?!i:o,onClick:function(){e.onAddPolygonClicked()},type:"button",title:"L\xe4gg till omr\xe5de",style:this.getSelectedStyle("polygon"),children:["Omr\xe5de",(0,g.jsx)(p.Z,{sx:{marginLeft:1}})]})]})})})}}]),o}(r.Component);t.default=k},21456:function(e,t,o){var n=o(64836);t.Z=void 0;var i=n(o(45649)),a=o(80184),s=(0,i.default)((0,a.jsx)("path",{d:"M15 21h2v-2h-2v2zm4 0h2v-2h-2v2zM7 21h2v-2H7v2zm4 0h2v-2h-2v2zm8-4h2v-2h-2v2zm0-4h2v-2h-2v2zM3 3v18h2V5h16V3H3zm16 6h2V7h-2v2z"}),"BorderStyle");t.Z=s},43526:function(e,t,o){var n=o(64836);t.Z=void 0;var i=n(o(45649)),a=o(80184),s=(0,i.default)((0,a.jsx)("path",{d:"M19.5 9.5c-1.03 0-1.9.62-2.29 1.5h-2.92c-.39-.88-1.26-1.5-2.29-1.5s-1.9.62-2.29 1.5H6.79c-.39-.88-1.26-1.5-2.29-1.5C3.12 9.5 2 10.62 2 12s1.12 2.5 2.5 2.5c1.03 0 1.9-.62 2.29-1.5h2.92c.39.88 1.26 1.5 2.29 1.5s1.9-.62 2.29-1.5h2.92c.39.88 1.26 1.5 2.29 1.5 1.38 0 2.5-1.12 2.5-2.5s-1.12-2.5-2.5-2.5z"}),"LinearScale");t.Z=s},16426:function(e,t,o){var n=o(64836);t.Z=void 0;var i=n(o(45649)),a=o(80184),s=(0,i.default)([(0,a.jsx)("circle",{cx:"7",cy:"14",r:"3"},"0"),(0,a.jsx)("circle",{cx:"11",cy:"6",r:"3"},"1"),(0,a.jsx)("circle",{cx:"16.6",cy:"17.6",r:"3"},"2")],"ScatterPlot");t.Z=s}}]);
//# sourceMappingURL=4366.e7017464.chunk.js.map