"use strict";(self.webpackChunkhajk_client=self.webpackChunkhajk_client||[]).push([[5354],{75354:function(e,r,t){t.r(r),t.d(r,{default:function(){return a}});var i=t(15671),s=t(43144),a=function(){function e(r){var t=this;(0,i.Z)(this,e),this.convertMapSettingsUrlToOlSettings=function(e){try{var r=new URLSearchParams(e);return{center:r.has("x")&&r.has("y")?[r.get("x"),r.get("y")]:t.map.getView().getCenter(),zoom:r.get("z")||t.map.getView().getZoom(),layers:r.get("l")}}catch(i){return console.error(i),{center:t.map.getView().getCenter(),zoom:t.map.getView().getZoom(),layers:null}}},this.bindSubscriptions=function(){t.localObserver.subscribe("fly-to",(function(e){t.globalObserver.publish("core.minimizeWindow");var r=t.convertMapSettingsUrlToOlSettings(e);if(null!==r.layers){var i=r.layers.split(","),s=t.getLayersToShowAndHide(i),a=s.layersToShow,o=s.layersToHide;t.setMapLayersVisibility(a,o)}t.flyTo(t.map.getView(),r.center,r.zoom)}))},this.getLayersToShowAndHide=function(e){return t.map.getLayers().getArray().reduce((function(r,t){return t.getProperties().layerInfo&&t.getProperties().layerInfo.layerType&&(e.includes(t.getProperties().name)?r.layersToShow.push(t):r.layersToHide.push(t)),r}),{layersToShow:[],layersToHide:[]})},this.localObserver=r.localObserver,this.globalObserver=r.globalObserver,this.map=r.map,this.bindSubscriptions()}return(0,s.Z)(e,[{key:"setMapLayersVisibility",value:function(e,r){var t=this;e.forEach((function(e){"group"===e.get("layerType")?t.globalObserver.publish("layerswitcher.showLayer",e):e.getVisible()||e.setVisible(!0)})),r.forEach((function(e){"group"===e.get("layerType")?t.globalObserver.publish("layerswitcher.hideLayer",e):e.getVisible()&&e.setVisible(!1)}))}},{key:"flyTo",value:function(e,r,t){e.animate({center:r,zoom:t,duration:1500}),this.localObserver.publish("map-animation-complete")}}]),e}()}}]);
//# sourceMappingURL=5354.d67dbe5d.chunk.js.map