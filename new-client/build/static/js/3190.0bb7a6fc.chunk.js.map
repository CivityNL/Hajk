{"version":3,"file":"static/js/3190.0bb7a6fc.chunk.js","mappings":"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","sources":["plugins/LayerSwitcher/components/BreadCrumb.js","../node_modules/@mui/icons-material/CallMade.js","../node_modules/@mui/icons-material/Visibility.js"],"sourcesContent":["import React, { Component } from \"react\";\nimport CloseIcon from \"@mui/icons-material/Close\";\nimport VisibilityIcon from \"@mui/icons-material/Visibility\";\nimport VisibilityOffIcon from \"@mui/icons-material/VisibilityOff\";\nimport LaunchIcon from \"@mui/icons-material/Launch\";\nimport { Button, IconButton, Grid, Typography, Paper } from \"@mui/material\";\nimport CallMadeIcon from \"@mui/icons-material/CallMade\";\nimport { styled } from \"@mui/material/styles\";\nimport Popover from \"@mui/material/Popover\";\n\nconst StyledPaper = styled(Paper)(({ theme }) => ({\n  marginRight: theme.spacing(0.5),\n  border: `${theme.spacing(0.1)} solid ${theme.palette.divider}`,\n}));\n\nconst ContentGridContainer = styled(Grid)(({ theme }) => ({\n  padding: theme.spacing(1),\n}));\n\nconst TitleGridContainer = styled(Grid)(({ theme }) => ({\n  paddingLeft: theme.spacing(0.5),\n}));\n\nconst LinkContainer = styled(\"div\")(({ theme }) => ({\n  padding: theme.spacing(0.5),\n}));\n\nclass BreadCrumb extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      hidden: props.layer.getOpacity() === 0,\n      anchorEl: null,\n      popoverOpen: false,\n    };\n    this.chapters = this.findChapters(\n      this.props.layer.get(\"name\"),\n      this.props.chapters\n    );\n  }\n\n  setHidden = (e) => {\n    var o = e.target.getOpacity();\n    this.setState({\n      hidden: o === 0,\n    });\n  };\n\n  componentDidMount() {\n    this.props.layer.on(\"change:opacity\", this.setHidden);\n  }\n\n  componentWillUnmount() {\n    this.props.layer.un(\"change:opacity\", this.setHidden);\n  }\n\n  setLayerOpacity = (layer) => (event) => {\n    this.setState(\n      {\n        hidden: !this.state.hidden,\n      },\n      () => {\n        layer.setOpacity(this.state.hidden ? 0 : 1);\n      }\n    );\n  };\n\n  setLayerVisibility = (layer) => (event) => {\n    if (layer.get(\"visible\")) {\n      layer.setOpacity(1);\n      this.props.app.globalObserver.publish(\"layerswitcher.hideLayer\", layer);\n    }\n    layer.set(\"visible\", !layer.get(\"visible\"));\n  };\n\n  isOverflow(el) {\n    if (!el) return false;\n    let original = el.scrollLeft++;\n    let overflow = el.scrollLeft-- > original;\n    return overflow;\n  }\n\n  findChapters(id, chapters) {\n    if (!chapters) {\n      return [];\n    }\n    return chapters.reduce((chaptersWithLayer, chapter) => {\n      if (Array.isArray(chapter.layers)) {\n        if (chapter.layers.some((layerId) => layerId === id)) {\n          chaptersWithLayer = [...chaptersWithLayer, chapter];\n        }\n        if (chapter.chapters.length > 0) {\n          chaptersWithLayer = [\n            ...chaptersWithLayer,\n            ...this.findChapters(id, chapter.chapters),\n          ];\n        }\n      }\n      return chaptersWithLayer;\n    }, []);\n  }\n\n  renderChapterLinks() {\n    if (this.chapters && this.chapters.length > 0) {\n      if (this.chapters.length > 0) {\n        return (\n          <LinkContainer>\n            {this.chapters.map((chapter, i) => {\n              return (\n                <div key={i}>\n                  <Button\n                    size=\"small\"\n                    onClick={() => {\n                      this.setState({\n                        popoverOpen: false,\n                      });\n                      this.openInformative(chapter);\n                    }}\n                  >\n                    {chapter.header}\n                    <CallMadeIcon />\n                  </Button>\n                </div>\n              );\n            })}\n          </LinkContainer>\n        );\n      } else {\n        return null;\n      }\n    } else {\n      return null;\n    }\n  }\n\n  openInformative = (chapter) => {\n    const informativeWindow = this.props.app.windows.find(\n      (window) => window.type === \"informative\"\n    );\n    informativeWindow.props.custom.open(chapter);\n  };\n\n  handleClose = () => {\n    this.setState({\n      anchorEl: null,\n      popoverOpen: false,\n    });\n  };\n\n  renderChaptersPopover(target) {\n    this.setState({\n      anchorEl: target,\n      popoverOpen: true,\n    });\n  }\n\n  renderInformativeIcon() {\n    if (!this.props.chapters) {\n      return null;\n    }\n    if (this.chapters && this.chapters.length > 0) {\n      return (\n        <IconButton\n          size=\"small\"\n          onClick={(e) => {\n            this.chapters.length === 1\n              ? this.openInformative(this.chapters[0])\n              : this.renderChaptersPopover(e.target);\n          }}\n        >\n          <LaunchIcon />\n        </IconButton>\n      );\n    } else {\n      return null;\n    }\n  }\n\n  render() {\n    const { layer, title, type } = this.props;\n    const { hidden } = this.state;\n    return (\n      <StyledPaper square={type === \"flat\"} elevation={0}>\n        <ContentGridContainer\n          container\n          data-type=\"bread-crumb\"\n          justifyContent=\"space-between\"\n          alignItems=\"center\"\n        >\n          <Grid item>\n            <IconButton\n              size=\"small\"\n              onClick={this.setLayerOpacity(layer)}\n              aria-label=\"Visa/dölj lagret tillfälligt\"\n            >\n              {!hidden ? <VisibilityIcon /> : <VisibilityOffIcon />}\n            </IconButton>\n          </Grid>\n          {this.renderInformativeIcon()}\n          <TitleGridContainer item>\n            <Typography variant=\"body2\" noWrap>\n              {title}\n            </Typography>\n          </TitleGridContainer>\n          <Grid item>\n            <IconButton\n              size=\"small\"\n              onClick={this.setLayerVisibility(layer)}\n              aria-label=\"Ta bort lagret från kartan\"\n            >\n              <CloseIcon />\n            </IconButton>\n          </Grid>\n        </ContentGridContainer>\n        <Popover\n          id=\"simple-popper\"\n          open={this.state.popoverOpen}\n          anchorEl={this.state.anchorEl}\n          onClose={this.handleClose}\n          anchorOrigin={{\n            vertical: \"top\",\n            horizontal: \"center\",\n          }}\n          transformOrigin={{\n            vertical: \"bottom\",\n            horizontal: \"center\",\n          }}\n        >\n          {this.renderChapterLinks()}\n        </Popover>\n      </StyledPaper>\n    );\n  }\n}\n\nexport default BreadCrumb;\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5z\"\n}), 'CallMade');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z\"\n}), 'Visibility');\n\nexports.default = _default;"],"names":["StyledPaper","styled","Paper","theme","marginRight","spacing","border","palette","divider","ContentGridContainer","Grid","padding","TitleGridContainer","paddingLeft","LinkContainer","BreadCrumb","props","setHidden","e","o","target","getOpacity","setState","hidden","setLayerOpacity","layer","event","state","setOpacity","setLayerVisibility","get","app","globalObserver","publish","set","openInformative","chapter","windows","find","window","type","custom","open","handleClose","anchorEl","popoverOpen","chapters","findChapters","this","on","un","el","original","scrollLeft","id","reduce","chaptersWithLayer","Array","isArray","layers","some","layerId","length","map","i","size","onClick","header","renderChaptersPopover","title","square","elevation","container","justifyContent","alignItems","item","renderInformativeIcon","variant","noWrap","onClose","anchorOrigin","vertical","horizontal","transformOrigin","renderChapterLinks","Component","_interopRequireDefault","require","exports","_createSvgIcon","_jsxRuntime","_default","default","jsx","d"],"sourceRoot":""}