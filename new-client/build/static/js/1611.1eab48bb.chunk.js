"use strict";(self.webpackChunkhajk_client=self.webpackChunkhajk_client||[]).push([[1611,1566,2130],{41566:function(e,t,r){r.r(t);var n=r(29439),i=r(72791),a=r(40508),l=r(96746),o=r(38254),s=r(75814),d=r(13811),u=r(43950),c=r(80184);t.default=function(e){var t,r=e.layer,p=r.getSource(),h="function"===typeof p.getParams&&(null===(t=p.getParams())||void 0===t?void 0:t.CQL_FILTER)||"",f=(0,i.useState)(h),v=(0,n.Z)(f,2),g=v[0],m=v[1];return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(a.Z,{htmlFor:"cqlfilter",children:"Ange CQL-filter"}),(0,c.jsx)(l.Z,{id:"cqlfilter",type:"text",multiline:!0,fullWidth:!0,placeholder:"foo='bar' AND fii='baz'",value:g,onChange:function(e){return m(e.target.value)},endAdornment:(0,c.jsx)(o.Z,{position:"end",children:(0,c.jsx)(s.Z,{disableInteractive:!0,title:"Tryck f\xf6r att ladda om lagret med angivet filter",children:(0,c.jsx)(d.Z,{edge:"end",onClick:function(){var e=g.trim();0===e.length&&(e=void 0),r.getSource().updateParams({CQL_FILTER:e})},size:"large",children:(0,c.jsx)(u.Z,{})})})})})]})}},61611:function(e,t,r){r.r(t);var n=r(15671),i=r(43144),a=r(60136),l=r(29388),o=r(72791),s=r(72130),d=r(41566),u=r(4565),c=r(11601),p=r(76863),h=r(80184),f=(0,p.ZP)("div")((function(e){e.theme;return{overflow:"hidden",paddingLeft:"45px",paddingRight:"30px",paddingBottom:"10px",paddingTop:"10px"}})),v=(0,p.ZP)("div")((function(e){e.theme;return{display:"flex",flexFlow:"row nowrap",alignItems:"center"}})),g=(0,p.ZP)("div")((function(e){e.theme;return{flex:"0 1 auto",minWidth:"40px"}})),m=(0,p.ZP)("div")((function(e){e.theme;return{padding:"0 16px",flex:"1 1 auto","& > span":{top:"4px"}}})),x=function(e){(0,a.Z)(r,e);var t=(0,l.Z)(r);function r(e){var i,a;(0,n.Z)(this,r),(a=t.call(this,e)).updateOpacity=function(e){var t=e.target.getOpacity();a.setState({opacityValue:t})},a.opacitySliderChanged=function(e,t){a.props.layer.setOpacity(t)},a.toggle=function(e){a.setState({toggled:!a.state.toggled})};var l=e.layer,o=l.get("layerInfo");return a.state={opacityValue:l.get("opacity"),legend:o.legend},null===(i=l.on)||void 0===i||i.call(l,"change:opacity",a.updateOpacity),a}return(0,i.Z)(r,[{key:"renderOpacitySlider",value:function(){var e=this.state.opacityValue;return(0,h.jsxs)(v,{children:[(0,h.jsx)(g,{children:(0,h.jsx)(u.Z,{variant:"subtitle2",children:"Opacitet:"})}),(0,h.jsx)(m,{children:(0,h.jsx)(c.ZP,{size:"small",value:e,min:0,max:1,step:.05,onChange:this.opacitySliderChanged})}),(0,h.jsx)(g,{children:(0,h.jsxs)(u.Z,{variant:"subtitle2",children:[Math.trunc(100*e.toFixed(2))," %"]})})]})}},{key:"renderSettings",value:function(){var e;return(0,h.jsx)("div",{children:(0,h.jsxs)(f,{children:[!1!==(null===(e=this.props.options)||void 0===e?void 0:e.enableTransparencySlider)&&this.props.showOpacity?this.renderOpacitySlider():null,this.props.showLegend?this.renderLegendImage():null,this.props.layer.getProperties().filterable?(0,h.jsx)(s.default,{layer:this.props.layer}):null,this.props.cqlFilterVisible&&(0,h.jsx)(d.default,{layer:this.props.layer})]})})}},{key:"renderLegendImage",value:function(){var e,t,r,n=this.props.index?this.props.index:0,i=null!==(e=null===(t=this.state.legend)||void 0===t||null===(r=t[n])||void 0===r?void 0:r.url)&&void 0!==e?e:"";return i?(0,h.jsx)("div",{children:(0,h.jsx)("img",{"max-width":"250px",alt:"Teckenf\xf6rklaring",src:i})}):null}},{key:"render",value:function(){return(0,h.jsx)("div",{children:(0,h.jsx)("div",{children:this.props.toggled?this.renderSettings():null})})}}]),r}(o.PureComponent);t.default=x},72130:function(e,t,r){r.r(t);var n=r(4942),i=r(15671),a=r(43144),l=r(60136),o=r(29388),s=r(72791),d=r(76863),u=r(63381),c=r(35702),p=r(40508),h=r(81898),f=r(43595),v=r(61091),g=r(4565),m=r(34951),x=r(25806),y=r(80184),Z=(0,d.ZP)(h.Z)((function(e){return{margin:e.theme.spacing(1),minWidth:120}})),j=(0,d.ZP)(g.Z)((function(e){e.theme;return{fontWeight:500}})),b=function(e){(0,l.Z)(r,e);var t=(0,o.Z)(r);function r(e){var a;return(0,i.Z)(this,r),(a=t.call(this,e)).loadFeatureInfo=function(){var e=a.props.layer.getProperties(),t=e.url,r=e.featureType;(0,x.hfetch)(t+"?service=WFS&request=describeFeatureType&outputFormat=application/json&typename=".concat(r)).then((function(e){e.json().then((function(e){var t=e.featureTypes.find((function(e){return e.typeName===r}));if(t&&Array.isArray(t.properties)){var n=t.properties.filter((function(e){return"gml:Geometry"!==e.type})).map((function(e){return e.name}));a.setState({layerProperties:n})}}))}))},a.handleChange=function(e){a.setState((0,n.Z)({},e.target.name,e.target.value))},a.setFilter=function(e){a.props.layer.set("filterAttribute",a.state.filterAttribute),a.props.layer.set("filterComparer",a.state.filterComparer),a.props.layer.set("filterValue",a.state.filterValue),a.props.layer.getSource().refresh()},a.resetFilter=function(e){a.setState({filterAttribute:"",filterValue:"",filterComparer:""}),a.props.layer.set("filterAttribute",""),a.props.layer.set("filterComparer",""),a.props.layer.set("filterValue",""),a.props.layer.getSource().refresh()},a.state={filterAttribute:e.layer.get("filterAttribute")||"",filterValue:e.layer.get("filterValue")||"",filterComparer:e.layer.get("filterComparer")||"",layerProperties:[]},a.loadFeatureInfo(),a}return(0,a.Z)(r,[{key:"render",value:function(){return this.props.layer instanceof m.Z?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(j,{variant:"subtitle2",children:"Filtrera inneh\xe5ll baserat p\xe5 attribut"}),(0,y.jsxs)(Z,{children:[(0,y.jsx)(p.Z,{htmlFor:"attribute",children:"Attribut"}),(0,y.jsx)(u.Z,{value:this.state.filterAttribute,onChange:this.handleChange,inputProps:{name:"filterAttribute",id:"attribute"},children:this.state.layerProperties.map((function(e,t){return(0,y.jsx)(c.Z,{value:e,children:e},t)}))})]}),(0,y.jsxs)(Z,{children:[(0,y.jsx)(p.Z,{htmlFor:"comparer",children:"J\xe4mf\xf6rare"}),(0,y.jsxs)(u.Z,{value:this.state.filterComparer,onChange:this.handleChange,inputProps:{name:"filterComparer",id:"comparer"},children:[(0,y.jsx)(c.Z,{value:"gt",children:"St\xf6rre \xe4n"}),(0,y.jsx)(c.Z,{value:"lt",children:"Mindre \xe4n"}),(0,y.jsx)(c.Z,{value:"eq",children:"Lika med"}),(0,y.jsx)(c.Z,{value:"not",children:"Skilt fr\xe5n"})]})]}),(0,y.jsx)(Z,{children:(0,y.jsx)(f.Z,{value:this.state.filterValue,onChange:this.handleChange,placeholder:"Filterv\xe4rde",inputProps:{name:"filterValue","aria-label":"V\xe4rde"}})}),(0,y.jsx)(v.Z,{variant:"contained",color:"primary",onClick:this.setFilter,children:"Aktivera"}),(0,y.jsx)(v.Z,{onClick:this.resetFilter,children:"\xc5terst\xe4ll"})]}):null}}]),r}(s.PureComponent);t.default=b},43950:function(e,t,r){var n=r(64836);t.Z=void 0;var i=n(r(45649)),a=r(80184),l=(0,i.default)((0,a.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"}),"Refresh");t.Z=l},38254:function(e,t,r){r.d(t,{Z:function(){return b}});var n=r(4942),i=r(63366),a=r(87462),l=r(72791),o=r(28182),s=r(94419),d=r(49853),u=r(4565),c=r(51211),p=r(90529),h=r(76863),f=r(21217);function v(e){return(0,f.Z)("MuiInputAdornment",e)}var g,m=(0,r(75878).Z)("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]),x=r(67254),y=r(80184),Z=["children","className","component","disablePointerEvents","disableTypography","position","variant"],j=(0,h.ZP)("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState;return[t.root,t["position".concat((0,d.Z)(r.position))],!0===r.disablePointerEvents&&t.disablePointerEvents,t[r.variant]]}})((function(e){var t=e.theme,r=e.ownerState;return(0,a.Z)({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(t.vars||t).palette.action.active},"filled"===r.variant&&(0,n.Z)({},"&.".concat(m.positionStart,"&:not(.").concat(m.hiddenLabel,")"),{marginTop:16}),"start"===r.position&&{marginRight:8},"end"===r.position&&{marginLeft:8},!0===r.disablePointerEvents&&{pointerEvents:"none"})})),b=l.forwardRef((function(e,t){var r=(0,x.Z)({props:e,name:"MuiInputAdornment"}),n=r.children,h=r.className,f=r.component,m=void 0===f?"div":f,b=r.disablePointerEvents,P=void 0!==b&&b,C=r.disableTypography,S=void 0!==C&&C,F=r.position,k=r.variant,A=(0,i.Z)(r,Z),L=(0,p.Z)()||{},w=k;k&&L.variant,L&&!w&&(w=L.variant);var I=(0,a.Z)({},r,{hiddenLabel:L.hiddenLabel,size:L.size,disablePointerEvents:P,position:F,variant:w}),V=function(e){var t=e.classes,r=e.disablePointerEvents,n=e.hiddenLabel,i=e.position,a=e.size,l=e.variant,o={root:["root",r&&"disablePointerEvents",i&&"position".concat((0,d.Z)(i)),l,n&&"hiddenLabel",a&&"size".concat((0,d.Z)(a))]};return(0,s.Z)(o,v,t)}(I);return(0,y.jsx)(c.Z.Provider,{value:null,children:(0,y.jsx)(j,(0,a.Z)({as:m,ownerState:I,className:(0,o.default)(V.root,h),ref:t},A,{children:"string"!==typeof n||S?(0,y.jsxs)(l.Fragment,{children:["start"===F?g||(g=(0,y.jsx)("span",{className:"notranslate",children:"\u200b"})):null,n]}):(0,y.jsx)(u.Z,{color:"text.secondary",children:n})}))})}))}}]);
//# sourceMappingURL=1611.1eab48bb.chunk.js.map