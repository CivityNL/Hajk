"use strict";(self.webpackChunkhajk_client=self.webpackChunkhajk_client||[]).push([[7061],{67061:function(e,t,r){r.r(t);var i=r(1413),n=r(43144),a=r(15671),o=r(66274),l=r(99359),Z=r(56134),u=r(88490),c=r(34951),d=r(5426),s=r(64665),f=r(66233),b=r(90927),v=r(5400),w=r(69236),h=r(42670),p=r(60313),y=r(30887),g=(0,l.Z)("map"),P=(0,l.Z)("localObserver"),O=(0,l.Z)("options"),j=(0,l.Z)("drawStyleSettings"),m=(0,l.Z)("draw"),k=(0,l.Z)("drawSource"),S=(0,l.Z)("drawLayer"),F=(0,l.Z)("drawTooltipElement"),C=(0,l.Z)("drawTooltipElementStyle"),D=(0,l.Z)("drawTooltip"),x=(0,l.Z)("currentPointerCoordinate"),T=(0,l.Z)("activeProduct"),A=(0,l.Z)("initDrawLayer"),L=(0,l.Z)("bindSubscriptions"),M=(0,l.Z)("createDrawTooltip"),E=(0,l.Z)("removeEventualDrawTooltipElement"),G=(0,l.Z)("removeEventualDrawTooltipOverlay"),I=(0,l.Z)("cleanupMapOverlays"),N=(0,l.Z)("getDrawStyleSettings"),R=(0,l.Z)("getDrawStyle"),_=(0,l.Z)("getFeatureStyle"),H=(0,l.Z)("getFeatureTextStyle"),V=(0,l.Z)("getNewVectorSource"),X=(0,l.Z)("getNewVectorLayer"),z=(0,l.Z)("removeDrawInteraction"),B=(0,l.Z)("removeEventListeners"),J=(0,l.Z)("toggleDrawMethod"),Y=(0,l.Z)("enableSelectFeaturesSearch"),q=(0,l.Z)("handleSelectFeatureClick"),K=(0,l.Z)("handleDrawFeatureAdded"),Q=(0,l.Z)("getTotalArea"),U=(0,l.Z)("handleDrawStart"),W=(0,l.Z)("handleDrawEnd"),$=(0,l.Z)("handlePotentialMultipleGeometriesException"),ee=(0,l.Z)("handlePointerMove"),te=(0,l.Z)("handleFeatureChange"),re=(0,l.Z)("getFeatureArea"),ie=(0,l.Z)("getTooltipText"),ne=(0,l.Z)("resetDrawing"),ae=(0,l.Z)("getDrawnFeatures"),oe=(0,n.Z)((function e(t){var r=this;(0,a.Z)(this,e),Object.defineProperty(this,g,{writable:!0,value:void 0}),Object.defineProperty(this,P,{writable:!0,value:void 0}),Object.defineProperty(this,O,{writable:!0,value:void 0}),Object.defineProperty(this,j,{writable:!0,value:void 0}),Object.defineProperty(this,m,{writable:!0,value:void 0}),Object.defineProperty(this,k,{writable:!0,value:void 0}),Object.defineProperty(this,S,{writable:!0,value:void 0}),Object.defineProperty(this,F,{writable:!0,value:void 0}),Object.defineProperty(this,C,{writable:!0,value:void 0}),Object.defineProperty(this,D,{writable:!0,value:void 0}),Object.defineProperty(this,x,{writable:!0,value:void 0}),Object.defineProperty(this,T,{writable:!0,value:void 0}),Object.defineProperty(this,A,{writable:!0,value:function(){(0,o.Z)(r,k)[k]=(0,o.Z)(r,V)[V](),(0,o.Z)(r,S)[S]=(0,o.Z)(r,X)[X]((0,o.Z)(r,k)[k],(0,o.Z)(r,R)[R](),{layerType:"system",zIndex:5e3,name:"pluginFmeServer"}),(0,o.Z)(r,g)[g].addLayer((0,o.Z)(r,S)[S])}}),Object.defineProperty(this,L,{writable:!0,value:function(){(0,o.Z)(r,P)[P].subscribe("view.activeProductChange",(function(e){(0,o.Z)(r,T)[T]=e})),(0,o.Z)(r,P)[P].subscribe("map.toggleDrawMethod",(0,o.Z)(r,J)[J]),(0,o.Z)(r,P)[P].subscribe("map.resetDrawing",(0,o.Z)(r,ne)[ne])}}),Object.defineProperty(this,M,{writable:!0,value:function(){(0,o.Z)(r,E)[E](),(0,o.Z)(r,F)[F]=document.createElement("div"),(0,o.Z)(r,F)[F].setAttribute("style",(0,o.Z)(r,C)[C]),(0,o.Z)(r,D)[D]=new h.Z({element:(0,o.Z)(r,F)[F],offset:[30,-5],positioning:"bottom-center"}),(0,o.Z)(r,g)[g].addOverlay((0,o.Z)(r,D)[D])}}),Object.defineProperty(this,E,{writable:!0,value:function(){(0,o.Z)(r,F)[F]&&((0,o.Z)(r,F)[F].parentNode.removeElement((0,o.Z)(r,F)[F]),(0,o.Z)(r,F)[F]=null)}}),Object.defineProperty(this,G,{writable:!0,value:function(){(0,o.Z)(r,D)[D]&&((0,o.Z)(r,g)[g].removeOverlay((0,o.Z)(r,D)[D]),(0,o.Z)(r,D)[D]=null)}}),Object.defineProperty(this,I,{writable:!0,value:function(){(0,o.Z)(r,E)[E](),(0,o.Z)(r,G)[G]()}}),Object.defineProperty(this,N,{writable:!0,value:function(){return{strokeColor:(0,o.Z)(r,O)[O].drawStrokeColor||"rgba(74,74,74,0.5)",fillColor:(0,o.Z)(r,O)[O].drawFillColor||"rgba(255,255,255,0.07)"}}}),Object.defineProperty(this,R,{writable:!0,value:function(){return new s.ZP({stroke:new f.Z({color:(0,o.Z)(r,j)[j].strokeColor,width:4}),fill:new b.Z({color:(0,o.Z)(r,j)[j].fillColor}),image:new v.Z({radius:6,stroke:new f.Z({color:(0,o.Z)(r,j)[j].strokeColor,width:2})})})}}),Object.defineProperty(this,_,{writable:!0,value:function(e){var t=(0,o.Z)(r,R)[R](),i=(0,o.Z)(r,H)[H](e);return t.setText(i),t}}),Object.defineProperty(this,H,{writable:!0,value:function(e){return new w.Z({textAlign:"center",textBaseline:"middle",font:"12pt sans-serif",fill:new b.Z({color:"#FFF"}),text:(0,o.Z)(r,ie)[ie](e),overflow:!0,stroke:new f.Z({color:"rgba(0, 0, 0, 0.5)",width:3}),offsetX:0,offsetY:0,rotation:0,scale:1})}}),Object.defineProperty(this,V,{writable:!0,value:function(){return new d.Z({wrapX:!1})}}),Object.defineProperty(this,X,{writable:!0,value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new c.Z((0,i.Z)({source:e,style:t},r))}}),Object.defineProperty(this,z,{writable:!0,value:function(){(0,o.Z)(r,m)[m]&&(0,o.Z)(r,g)[g].removeInteraction((0,o.Z)(r,m)[m])}}),Object.defineProperty(this,B,{writable:!0,value:function(){(0,o.Z)(r,g)[g].un("singleclick",(0,o.Z)(r,q)[q]),(0,o.Z)(r,k)[k].un("addfeature",(0,o.Z)(r,K)[K]),(0,o.Z)(r,m)[m]&&((0,o.Z)(r,m)[m].un("drawstart",(0,o.Z)(r,U)[U]),(0,o.Z)(r,m)[m].un("drawend",(0,o.Z)(r,W)[W]),(0,o.Z)(r,g)[g].un("pointermove",(0,o.Z)(r,ee)[ee]))}}),Object.defineProperty(this,J,{writable:!0,value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if((0,o.Z)(r,z)[z](),(0,o.Z)(r,B)[B](),(0,o.Z)(r,g)[g].clickLock.delete("fmeServer"),"Select"===e)return(0,o.Z)(r,Y)[Y]();e&&""!==e&&((0,o.Z)(r,m)[m]=new Z.ZP({source:(0,o.Z)(r,k)[k],type:"Rectangle"===e?"Circle":e,freehand:!!["Circle","Rectangle"].includes(e)||t,stopClick:!0,geometryFunction:"Rectangle"===e?(0,Z.dO)():"Circle"===e?(0,Z.N_)():null,style:(0,o.Z)(r,R)[R]()}),(0,o.Z)(r,g)[g].clickLock.add("fmeServer"),(0,o.Z)(r,m)[m].on("drawstart",(0,o.Z)(r,U)[U]),(0,o.Z)(r,m)[m].on("drawend",(0,o.Z)(r,W)[W]),(0,o.Z)(r,g)[g].on("pointermove",(0,o.Z)(r,ee)[ee]),(0,o.Z)(r,g)[g].addInteraction((0,o.Z)(r,m)[m]),(0,o.Z)(r,k)[k].on("addfeature",(0,o.Z)(r,K)[K]))}}),Object.defineProperty(this,Y,{writable:!0,value:function(){(0,o.Z)(r,g)[g].clickLock.add("fmeServer"),(0,o.Z)(r,g)[g].on("singleclick",(0,o.Z)(r,q)[q]),(0,o.Z)(r,k)[k].on("addfeature",(0,o.Z)(r,K)[K])}}),Object.defineProperty(this,q,{writable:!0,value:function(e){(0,y.handleClick)(e,e.map,(function(e){var t=e.features.filter((function(e){return e.getGeometry()}));0!==t.length&&((0,o.Z)(r,$)[$](),(0,o.Z)(r,k)[k].addFeature(t[0]))}))}}),Object.defineProperty(this,K,{writable:!0,value:function(){try{var e=(0,o.Z)(r,ae)[ae](),t=(0,o.Z)(r,Q)[Q](e);(0,o.Z)(r,P)[P].publish("map.featureAdded",{error:0===t,features:e,totalArea:t})}catch(i){(0,o.Z)(r,P)[P].publish("map.featureAdded",{error:!0,features:[],totalArea:0})}}}),Object.defineProperty(this,Q,{writable:!0,value:function(e){return e.reduce((function(e,t){return e+(0,o.Z)(r,re)[re](t)}),0)}}),Object.defineProperty(this,U,{writable:!0,value:function(e){e.feature.on("change",(0,o.Z)(r,te)[te])}}),Object.defineProperty(this,W,{writable:!0,value:function(e){(0,o.Z)(r,$)[$]();var t=e.feature;(0,o.Z)(r,F)[F].innerHTML=null,(0,o.Z)(r,x)[x]=null,(0,o.Z)(r,D)[D].setPosition((0,o.Z)(r,x)[x]),t.setStyle((0,o.Z)(r,_)[_](t))}}),Object.defineProperty(this,$,{writable:!0,value:function(){var e,t=null!==(e=(0,o.Z)(r,T)[T].allowMultipleGeometries)&&void 0!==e&&e,i=(0,o.Z)(r,k)[k].getFeatures().length;t||0===i||((0,o.Z)(r,k)[k].clear(),(0,o.Z)(r,P)[P].publish("map.maxFeaturesExceeded"))}}),Object.defineProperty(this,ee,{writable:!0,value:function(e){(0,o.Z)(r,x)[x]=e.coordinate}}),Object.defineProperty(this,te,{writable:!0,value:function(e){var t=e.target,i=(0,o.Z)(r,ie)[ie](t);(0,o.Z)(r,F)[F].innerHTML=i,(0,o.Z)(r,D)[D].setPosition((0,o.Z)(r,x)[x])}}),Object.defineProperty(this,re,{writable:!0,value:function(e){var t=e.getGeometry();if(t instanceof u.Z){var r=t.getRadius();return Math.round(Math.pow(r,2)*Math.PI)}return Math.round(t.getArea())}}),Object.defineProperty(this,ie,{writable:!0,value:function(e){var t=(0,o.Z)(r,re)[re](e);return t>=1e6?"".concat((t/1e6).toFixed(3)," km\xb2"):"".concat(t.toLocaleString()," m\xb2")}}),Object.defineProperty(this,ne,{writable:!0,value:function(){(0,o.Z)(r,g)[g].clickLock.delete("fmeServer"),(0,o.Z)(r,k)[k].clear(),(0,o.Z)(r,z)[z](),(0,o.Z)(r,B)[B](),(0,o.Z)(r,I)[I]()}}),Object.defineProperty(this,ae,{writable:!0,value:function(){return(0,o.Z)(r,k)[k].getFeatures()}}),this.getAllFeaturesAsGeoJson=function(){var e=(0,o.Z)(r,ae)[ae]();return 0===e.length?null:1===e.length?(new p.Z).writeFeature(e[0]):(new p.Z).writeFeatures(e)},(0,o.Z)(this,g)[g]=t.map,(0,o.Z)(this,P)[P]=t.localObserver,(0,o.Z)(this,O)[O]=t.options,(0,o.Z)(this,m)[m]=null,(0,o.Z)(this,F)[F]=null,(0,o.Z)(this,D)[D]=null,(0,o.Z)(this,x)[x]=null,(0,o.Z)(this,T)[T]=null,(0,o.Z)(this,C)[C]="position: relative; background: rgba(0, 0, 0, 0.5); border-radius: 4px; color: white; padding: 4px 8px; opacity: 0.7; white-space: nowrap;",(0,o.Z)(this,j)[j]=(0,o.Z)(this,N)[N](),(0,o.Z)(this,A)[A](),(0,o.Z)(this,L)[L](),(0,o.Z)(this,M)[M]()}));t.default=oe}}]);
//# sourceMappingURL=7061.1017ccff.chunk.js.map