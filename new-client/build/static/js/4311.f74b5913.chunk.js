"use strict";(self.webpackChunkhajk_client=self.webpackChunkhajk_client||[]).push([[4311],{94311:function(e,t,r){r.r(t);var n=r(1413),i=r(29439),o=r(15861),a=r(43144),l=r(15671),c=r(66274),u=r(99359),s=r(64687),d=r.n(s),Z=r(79717),f=r(489),v=r(24673),h=r(56134),y=r(34951),b=r(5426),g=r(64665),w=r(69236),p=r(90927),E=r(66233),S=r(18029),m=r(5400),O=r(88490),P=r(35844),T=r(56957),D=r(29409),j=r(95881),A=r(42670),F=r(60313),I=r(82589),C=r(37130),L=r(62652),k=r(30887),M=(0,u.Z)("map"),R=(0,u.Z)("layerName"),x=(0,u.Z)("geoJSONParser"),_=(0,u.Z)("observer"),H=(0,u.Z)("observerPrefix"),N=(0,u.Z)("drawSource"),G=(0,u.Z)("drawLayer"),W=(0,u.Z)("currentExtent"),U=(0,u.Z)("drawTooltipElement"),B=(0,u.Z)("drawTooltipElementStyle"),V=(0,u.Z)("drawTooltip"),X=(0,u.Z)("currentPointerCoordinate"),K=(0,u.Z)("showDrawTooltip"),z=(0,u.Z)("measurementSettings"),Y=(0,u.Z)("drawStyleSettings"),J=(0,u.Z)("textStyleSettings"),q=(0,u.Z)("drawInteraction"),Q=(0,u.Z)("removeInteractionActive"),$=(0,u.Z)("editInteractionActive"),ee=(0,u.Z)("featureChosenForEdit"),te=(0,u.Z)("moveInteractionActive"),re=(0,u.Z)("selectInteraction"),ne=(0,u.Z)("translateInteraction"),ie=(0,u.Z)("modifyInteraction"),oe=(0,u.Z)("keepModifyActive"),ae=(0,u.Z)("keepTranslateActive"),le=(0,u.Z)("customHandleDrawStart"),ce=(0,u.Z)("customHandleDrawEnd"),ue=(0,u.Z)("customHandlePointerMove"),se=(0,u.Z)("customHandleAddFeature"),de=(0,u.Z)("highlightFillColor"),Ze=(0,u.Z)("highlightStrokeColor"),fe=(0,u.Z)("circleRadius"),ve=(0,u.Z)("circleInteractionActive"),he=(0,u.Z)("selectInteractionActive"),ye=(0,u.Z)("getObserverPrefix"),be=(0,u.Z)("publishInformation"),ge=(0,u.Z)("getDefaultDrawStyleSettings"),we=(0,u.Z)("getDefaultMeasurementSettings"),pe=(0,u.Z)("getDefaultTextStyleSettings"),Ee=(0,u.Z)("handleInitiationParametersMissing"),Se=(0,u.Z)("initiateDrawLayer"),me=(0,u.Z)("vectorLayerExists"),Oe=(0,u.Z)("getAllMapLayers"),Pe=(0,u.Z)("layerHasCorrectNameAndType"),Te=(0,u.Z)("isVectorLayer"),De=(0,u.Z)("connectExistingVectorLayer"),je=(0,u.Z)("createNewDrawLayer"),Ae=(0,u.Z)("createDrawTooltip"),Fe=(0,u.Z)("removeEventualDrawTooltipElement"),Ie=(0,u.Z)("getFeatureStyle"),Ce=(0,u.Z)("shouldShowText"),Le=(0,u.Z)("getFeatureTextStyle"),ke=(0,u.Z)("getArrowBaseStyle"),Me=(0,u.Z)("createArrowSvg"),Re=(0,u.Z)("getArrowStyle"),xe=(0,u.Z)("getNodeHighlightStyle"),_e=(0,u.Z)("getFeatureCoordinates"),He=(0,u.Z)("getFeatureMeasurementLabel"),Ne=(0,u.Z)("getFormattedMeasurementString"),Ge=(0,u.Z)("getLabelFormatFromMeasurementType"),We=(0,u.Z)("shouldFormatToKm"),Ue=(0,u.Z)("getFeatureLabelText"),Be=(0,u.Z)("getKilometerMeasurementString"),Ve=(0,u.Z)("getHectareMeasurementString"),Xe=(0,u.Z)("getMeasurementString"),Ke=(0,u.Z)("getFeatureMeasurements"),ze=(0,u.Z)("getPolygonPerimeter"),Ye=(0,u.Z)("getDrawStyle"),Je=(0,u.Z)("getDrawStrokeStyle"),qe=(0,u.Z)("getDrawFillStyle"),Qe=(0,u.Z)("getDrawImageStyle"),$e=(0,u.Z)("getFillStyleInfo"),et=(0,u.Z)("getStrokeStyleInfo"),tt=(0,u.Z)("getImageStyleInfo"),rt=(0,u.Z)("refreshFeaturesTextStyle"),nt=(0,u.Z)("getNewVectorSource"),it=(0,u.Z)("getNewVectorLayer"),ot=(0,u.Z)("fitMapToExtent"),at=(0,u.Z)("removeEventListeners"),lt=(0,u.Z)("addEventListeners"),ct=(0,u.Z)("addCustomEventListeners"),ut=(0,u.Z)("removeCustomEventListeners"),st=(0,u.Z)("handleDrawStart"),dt=(0,u.Z)("handleDrawEnd"),Zt=(0,u.Z)("handleModifyEnd"),ft=(0,u.Z)("refreshArrowStyle"),vt=(0,u.Z)("handleDrawAbort"),ht=(0,u.Z)("resetDrawTooltip"),yt=(0,u.Z)("handleFeatureChange"),bt=(0,u.Z)("handlePointerMove"),gt=(0,u.Z)("handleDrawFeatureAdded"),wt=(0,u.Z)("handleKeyUp"),pt=(0,u.Z)("disablePotentialInteraction"),Et=(0,u.Z)("getSetFailedObject"),St=(0,u.Z)("removeClickedFeature"),mt=(0,u.Z)("editClickedFeature"),Ot=(0,u.Z)("updateChosenEditFeature"),Pt=(0,u.Z)("refreshSnapHelper"),Tt=(0,u.Z)("enableRemoveInteraction"),Dt=(0,u.Z)("disableRemoveInteraction"),jt=(0,u.Z)("enableEditInteraction"),At=(0,u.Z)("disableEditInteraction"),Ft=(0,u.Z)("enableModifyInteraction"),It=(0,u.Z)("disableModifyInteraction"),Ct=(0,u.Z)("enableMoveInteraction"),Lt=(0,u.Z)("enableTranslateInteraction"),kt=(0,u.Z)("disableMoveInteraction"),Mt=(0,u.Z)("disableTranslateInteraction"),Rt=(0,u.Z)("enableCircleInteraction"),xt=(0,u.Z)("disableCircleInteraction"),_t=(0,u.Z)("enableSelectInteraction"),Ht=(0,u.Z)("disableSelectInteraction"),Nt=(0,u.Z)("handleOnSelectClick"),Gt=(0,u.Z)("createRadiusOnClick"),Wt=(0,u.Z)("handleFeatureSelect"),Ut=(0,u.Z)("bindFeaturePropertyListener"),Bt=(0,u.Z)("unBindFeaturePropertyListener"),Vt=(0,u.Z)("handleFeaturePropertyChange"),Xt=(0,u.Z)("removeFeatureEditSelection"),Kt=(0,u.Z)("refreshDrawInteraction"),zt=(0,u.Z)("getDrawInteractionType"),Yt=(0,u.Z)("isFreeHandDrawing"),Jt=(0,u.Z)("createRealCircleGeometry"),qt=(0,u.Z)("creteCircleGeomFromSimplified"),Qt=(0,u.Z)("createDuplicateFeature"),$t=(0,u.Z)("getDuplicateOffsetAmount"),er=(0,a.Z)((function e(t){var r,a,u,s,er,tr,rr=this;if((0,l.Z)(this,e),Object.defineProperty(this,M,{writable:!0,value:void 0}),Object.defineProperty(this,R,{writable:!0,value:void 0}),Object.defineProperty(this,x,{writable:!0,value:void 0}),Object.defineProperty(this,_,{writable:!0,value:void 0}),Object.defineProperty(this,H,{writable:!0,value:void 0}),Object.defineProperty(this,N,{writable:!0,value:void 0}),Object.defineProperty(this,G,{writable:!0,value:void 0}),Object.defineProperty(this,W,{writable:!0,value:void 0}),Object.defineProperty(this,U,{writable:!0,value:void 0}),Object.defineProperty(this,B,{writable:!0,value:void 0}),Object.defineProperty(this,V,{writable:!0,value:void 0}),Object.defineProperty(this,X,{writable:!0,value:void 0}),Object.defineProperty(this,K,{writable:!0,value:void 0}),Object.defineProperty(this,z,{writable:!0,value:void 0}),Object.defineProperty(this,Y,{writable:!0,value:void 0}),Object.defineProperty(this,J,{writable:!0,value:void 0}),Object.defineProperty(this,q,{writable:!0,value:void 0}),Object.defineProperty(this,Q,{writable:!0,value:void 0}),Object.defineProperty(this,$,{writable:!0,value:void 0}),Object.defineProperty(this,ee,{writable:!0,value:void 0}),Object.defineProperty(this,te,{writable:!0,value:void 0}),Object.defineProperty(this,re,{writable:!0,value:void 0}),Object.defineProperty(this,ne,{writable:!0,value:void 0}),Object.defineProperty(this,ie,{writable:!0,value:void 0}),Object.defineProperty(this,oe,{writable:!0,value:void 0}),Object.defineProperty(this,ae,{writable:!0,value:void 0}),Object.defineProperty(this,le,{writable:!0,value:void 0}),Object.defineProperty(this,ce,{writable:!0,value:void 0}),Object.defineProperty(this,ue,{writable:!0,value:void 0}),Object.defineProperty(this,se,{writable:!0,value:void 0}),Object.defineProperty(this,de,{writable:!0,value:void 0}),Object.defineProperty(this,Ze,{writable:!0,value:void 0}),Object.defineProperty(this,fe,{writable:!0,value:void 0}),Object.defineProperty(this,ve,{writable:!0,value:void 0}),Object.defineProperty(this,he,{writable:!0,value:void 0}),Object.defineProperty(this,ye,{writable:!0,value:function(e){return"string"===typeof e.observerPrefix?e.observerPrefix:null}}),Object.defineProperty(this,be,{writable:!0,value:function(e){var t=e.subject,r=e.payLoad;if((0,c.Z)(rr,_)[_]&&t){var n=(0,c.Z)(rr,H)[H]?"".concat(rr.observerPrefix,".").concat(t):t;(0,c.Z)(rr,_)[_].publish(n,r)}}}),Object.defineProperty(this,ge,{writable:!0,value:function(){return{strokeColor:"rgba(74,74,74,0.5)",lineDash:null,strokeWidth:2,fillColor:"rgba(255,255,255,0.07)"}}}),Object.defineProperty(this,we,{writable:!0,value:function(){return{showText:!1,showArea:!1,showPerimeter:!1,areaUnit:"AUTO",lengthUnit:"AUTO",precision:0}}}),Object.defineProperty(this,pe,{writable:!0,value:function(){return{foregroundColor:"#FFFFFF",backgroundColor:"#000000",size:14}}}),Object.defineProperty(this,Ee,{writable:!0,value:function(){throw new Error("Failed to initiate Draw-model, - required parameters missing. \n Required parameters: map, layerName")}}),Object.defineProperty(this,Se,{writable:!0,value:function(){return(0,c.Z)(rr,me)[me]()?(0,c.Z)(rr,De)[De]():(0,c.Z)(rr,je)[je]()}}),Object.defineProperty(this,me,{writable:!0,value:function(){return(0,c.Z)(rr,Oe)[Oe]().some((function(e){return(0,c.Z)(rr,Pe)[Pe](e)}))}}),Object.defineProperty(this,Oe,{writable:!0,value:function(){return(0,c.Z)(rr,M)[M].getLayers().getArray()}}),Object.defineProperty(this,Pe,{writable:!0,value:function(e){return e.get("name")===(0,c.Z)(rr,R)[R]&&(0,c.Z)(rr,Te)[Te](e)}}),Object.defineProperty(this,Te,{writable:!0,value:function(e){return e instanceof y.Z}}),Object.defineProperty(this,De,{writable:!0,value:function(){var e=(0,c.Z)(rr,Oe)[Oe]().find((function(e){return(0,c.Z)(rr,Pe)[Pe](e)}));(0,c.Z)(rr,G)[G]=e,(0,c.Z)(rr,N)[N]=e.getSource()}}),Object.defineProperty(this,je,{writable:!0,value:function(){(0,c.Z)(rr,N)[N]=(0,c.Z)(rr,nt)[nt](),(0,c.Z)(rr,G)[G]=(0,c.Z)(rr,it)[it]((0,c.Z)(rr,N)[N]),(0,c.Z)(rr,G)[G].set("name",(0,c.Z)(rr,R)[R]),(0,c.Z)(rr,G)[G].set("queryable",!0),(0,c.Z)(rr,M)[M].addLayer((0,c.Z)(rr,G)[G])}}),Object.defineProperty(this,Ae,{writable:!0,value:function(){(0,c.Z)(rr,Fe)[Fe](),(0,c.Z)(rr,U)[U]=document.createElement("div"),(0,c.Z)(rr,U)[U].setAttribute("style",(0,c.Z)(rr,B)[B]),(0,c.Z)(rr,V)[V]=new A.Z({element:(0,c.Z)(rr,U)[U],offset:[30,-5],positioning:"bottom-center"}),(0,c.Z)(rr,M)[M].addOverlay((0,c.Z)(rr,V)[V])}}),Object.defineProperty(this,Fe,{writable:!0,value:function(){(0,c.Z)(rr,U)[U]&&((0,c.Z)(rr,U)[U].parentNode.removeElement((0,c.Z)(rr,U)[U]),(0,c.Z)(rr,U)[U]=null)}}),Object.defineProperty(this,Ie,{writable:!0,value:function(e,t){if(!0===e.get("HIDDEN"))return!e.get("STYLE_BEFORE_HIDE")&&e.set("STYLE_BEFORE_HIDE",e.getStyle()),new g.ZP({});if("Arrow"===(null===e||void 0===e?void 0:e.get("DRAW_METHOD")))return(0,c.Z)(rr,Re)[Re](e,t);var r=e.get("STYLE_BEFORE_HIDE")||e.getStyle();e.set("STYLE_BEFORE_HIDE",null);var n=t?(0,c.Z)(rr,Ye)[Ye](t):r?Array.isArray(r)?r[0]:r:(0,c.Z)(rr,Ye)[Ye]();"Text"===e.get("DRAW_METHOD")&&n.setImage(null);var i=(0,c.Z)(rr,Le)[Le](e);return n.setText(i),!0===e.get("EDIT_ACTIVE")?[n,(0,c.Z)(rr,xe)[xe](e)]:n}}),Object.defineProperty(this,Ce,{writable:!0,value:function(e){if(!e)return console.warn("Could not evaluate '#shouldShowText' since no feature was supplied."),!1;if(!1===e.get("SHOW_TEXT"))return!1;var t=e.get("DRAW_METHOD")||e.get("geometryType");return"Arrow"!==t&&((0,c.Z)(rr,z)[z].showText||"Text"===t)}}),Object.defineProperty(this,Le,{writable:!0,value:function(e){var t,r,n,i,o,a;if(!(0,c.Z)(rr,Ce)[Ce](e))return null;var l=(null===e||void 0===e?void 0:e.getGeometry())instanceof D.Z,u="Text"===(null===e||void 0===e?void 0:e.get("DRAW_METHOD"));return new w.Z({textAlign:"center",textBaseline:"middle",font:"".concat(u?null!==(t=null===(r=e.get("TEXT_SETTINGS"))||void 0===r?void 0:r.size)&&void 0!==t?t:(0,c.Z)(rr,J)[J].size:12,"pt sans-serif"),fill:new p.Z({color:u?null!==(n=null===(i=e.get("TEXT_SETTINGS"))||void 0===i?void 0:i.foregroundColor)&&void 0!==n?n:(0,c.Z)(rr,J)[J].foregroundColor:"#FFF"}),text:(0,c.Z)(rr,Ue)[Ue](e),overflow:!0,stroke:new E.Z({color:u?null!==(o=null===(a=e.get("TEXT_SETTINGS"))||void 0===a?void 0:a.backgroundColor)&&void 0!==o?o:(0,c.Z)(rr,J)[J].backgroundColor:"rgba(0, 0, 0, 0.5)",width:3}),offsetX:0,offsetY:l&&!u?-15:0,rotation:0,scale:1})}}),Object.defineProperty(this,ke,{writable:!0,value:function(e){var t=(0,c.Z)(rr,Ye)[Ye](e),r=t.getStroke();return r.setWidth(5),r.setLineDash(null),t}}),Object.defineProperty(this,Me,{writable:!0,value:function(e){var t='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="32pt" height="32pt" fill="'.concat(e,'"><path d="M 1 5 L 1 5 L 1 13 L 1 21 L 1 21 L 12 13"/></svg>');return"data:image/svg+xml;base64,".concat(window.btoa(t))}}),Object.defineProperty(this,Re,{writable:!0,value:function(e,t){var r,n,i=Array.isArray(e.getStyle())?e.getStyle():null,o=t?(0,c.Z)(rr,ke)[ke](t):i?i[0]:(0,c.Z)(rr,ke)[ke](),a=null!==(r=null===(n=o.getStroke())||void 0===n?void 0:n.getColor())&&void 0!==r?r:null,l=[o];return null===e||void 0===e||e.getGeometry().forEachSegment((function(e,r){var n=r[0]-e[0],i=r[1]-e[1],o=Math.atan2(i,n);l.push(new g.ZP({geometry:new D.Z(r),image:new S.Z({src:(0,c.Z)(rr,Me)[Me](t?t.strokeStyle.color:a||(0,c.Z)(rr,Y)[Y].strokeColor),anchor:[.38,.53],rotateWithView:!0,rotation:-o})}))})),l}}),Object.defineProperty(this,xe,{writable:!0,value:function(e){try{return new g.ZP({image:new m.Z({radius:5,fill:new p.Z({color:(0,c.Z)(rr,de)[de]}),stroke:new E.Z({color:(0,c.Z)(rr,Ze)[Ze],width:2})}),geometry:function(){var t=(0,c.Z)(rr,_e)[_e](e);return new j.Z(t)}})}catch(t){return console.error("Could not create highlight style. Error: ".concat(t)),null}}}),Object.defineProperty(this,_e,{writable:!0,value:function(e){var t=e.getGeometry();switch(t.getType()){case"Circle":return(0,T.Bb)(t,8).getCoordinates()[0];case"LineString":return t.getCoordinates();case"Point":return[t.getCoordinates()];default:return t.getCoordinates()[0]}}}),Object.defineProperty(this,He,{writable:!0,value:function(e,t){return(0,c.Z)(rr,Ke)[Ke](e).reduce((function(e,r){switch(r.type){case"COORDINATES":return e+"N: ".concat(Math.round(r.value[1])," E: ").concat(Math.round(r.value[0]));case"AREA":case"PERIMETER":case"LENGTH":return e+(0,c.Z)(rr,Ne)[Ne](r,t);default:return e}}),"")}}),Object.defineProperty(this,Ne,{writable:!0,value:function(e,t){var r=e.type,n=e.value,i=e.prefix;if(!("TOOLTIP"===t||"LENGTH"===r&&(0,c.Z)(rr,z)[z].showLength||"AREA"===r&&(0,c.Z)(rr,z)[z].showArea||"PERIMETER"===r&&(0,c.Z)(rr,z)[z].showPerimeter))return"";switch((0,c.Z)(rr,Ge)[Ge](r)){case"AUTO":var o=(0,c.Z)(rr,We)[We](n,r)?(0,c.Z)(rr,Be)[Be](n,r):(0,c.Z)(rr,Xe)[Xe](n,r);return"".concat(i," ").concat(o);case"KM":case"KM2":return"".concat(i," ").concat((0,c.Z)(rr,Be)[Be](n,r));case"HECTARE":return"".concat(i," ").concat((0,c.Z)(rr,Ve)[Ve](n,r));default:return"".concat(i," ").concat((0,c.Z)(rr,Xe)[Xe](n,r))}}}),Object.defineProperty(this,Ge,{writable:!0,value:function(e){switch(e){case"LENGTH":case"PERIMETER":return(0,c.Z)(rr,z)[z].lengthUnit;default:return(0,c.Z)(rr,z)[z].areaUnit}}}),Object.defineProperty(this,We,{writable:!0,value:function(e,t){switch(t){case"LENGTH":case"PERIMETER":return e>1e3;default:return e>1e6}}}),Object.defineProperty(this,Ue,{writable:!0,value:function(e){var t,r;if("Text"===e.get("DRAW_METHOD"))return null!==(r=e.get("USER_TEXT"))&&void 0!==r?r:"";var n=null!==(t=e.get("FEATURE_TITLE"))&&void 0!==t?t:"",i=(0,c.Z)(rr,z)[z].showText?(0,c.Z)(rr,He)[He](e,"LABEL"):"";return n.length>0?"".concat(n).concat(i.length>0?"\n":"").concat(i):i}}),Object.defineProperty(this,Be,{writable:!0,value:function(e,t){var r,n=null!==(r=(0,c.Z)(rr,z)[z].precision)&&void 0!==r?r:0;switch(t){case"LENGTH":case"PERIMETER":return"".concat(Number((e/1e3).toFixed(n)).toLocaleString()," km");default:return"".concat(Number((e/1e6).toFixed(n)).toLocaleString()," km\xb2")}}}),Object.defineProperty(this,Ve,{writable:!0,value:function(e,t){var r,n=null!==(r=(0,c.Z)(rr,z)[z].precision)&&void 0!==r?r:0;switch(t){case"LENGTH":case"PERIMETER":return(0,c.Z)(rr,Xe)[Xe](e,t);default:return"".concat(Number((e/1e4).toFixed(n)).toLocaleString()," ha")}}}),Object.defineProperty(this,Xe,{writable:!0,value:function(e,t){var r,n=null!==(r=(0,c.Z)(rr,z)[z].precision)&&void 0!==r?r:0;switch(t){case"LENGTH":case"PERIMETER":return"".concat(Number(e.toFixed(n)).toLocaleString()," m");default:return"".concat(Number(e.toFixed(n)).toLocaleString()," m\xb2")}}}),Object.defineProperty(this,Ke,{writable:!0,value:function(e){var t=e.getGeometry();if(t instanceof D.Z)return[{type:"COORDINATES",value:t.getCoordinates(),prefix:""}];var r=(0,c.Z)(rr,z)[z].showArea&&(0,c.Z)(rr,z)[z].showPerimeter;if(t instanceof O.Z){var n=t.getRadius();return[{type:"AREA",value:Math.pow(n,2)*Math.PI,prefix:"".concat(r?"Area:":"")},{type:"PERIMETER",value:n,prefix:"\n Radie:"}]}return t instanceof P.Z?[{type:"LENGTH",value:t.getLength(),prefix:""}]:[{type:"AREA",value:(null===t||void 0===t?void 0:t.getArea())||0,prefix:"".concat(r?"Area:":"")},{type:"PERIMETER",value:(0,c.Z)(rr,ze)[ze](t),prefix:"\n Omkrets:"}]}}),Object.defineProperty(this,ze,{writable:!0,value:function(e){try{var t,r,n=(null===e||void 0===e||null===(t=e.getLinearRing(0))||void 0===t?void 0:t.getCoordinates())||null;return n&&(null===(r=new P.Z(n))||void 0===r?void 0:r.getLength())||0}catch(i){return 0}}}),Object.defineProperty(this,Ye,{writable:!0,value:function(e){return new g.ZP({stroke:(0,c.Z)(rr,Je)[Je](e),fill:(0,c.Z)(rr,qe)[qe](e),image:(0,c.Z)(rr,Qe)[Qe](e)})}}),Object.defineProperty(this,Je,{writable:!0,value:function(e){return new E.Z({color:e?e.strokeStyle.color:(0,c.Z)(rr,Y)[Y].strokeColor,lineDash:e?e.strokeStyle.dash:(0,c.Z)(rr,Y)[Y].lineDash,width:e?e.strokeStyle.width:(0,c.Z)(rr,Y)[Y].strokeWidth})}}),Object.defineProperty(this,qe,{writable:!0,value:function(e){return new p.Z({color:e?e.fillStyle.color:(0,c.Z)(rr,Y)[Y].fillColor})}}),Object.defineProperty(this,Qe,{writable:!0,value:function(e){return new m.Z({radius:6,stroke:new E.Z({color:e?e.strokeStyle.color:(0,c.Z)(rr,Y)[Y].strokeColor,width:e?e.strokeStyle.width:(0,c.Z)(rr,Y)[Y].strokeWidth,lineDash:e?e.strokeStyle.dash:(0,c.Z)(rr,Y)[Y].lineDash}),fill:new p.Z({color:e?e.fillStyle.color:(0,c.Z)(rr,Y)[Y].fillColor})})}}),Object.defineProperty(this,$e,{writable:!0,value:function(e){try{var t,r,n,i=Array.isArray(e)?null===(t=e[0])||void 0===t||null===(r=t.getFill())||void 0===r?void 0:r.getColor():null===e||void 0===e||null===(n=e.getFill())||void 0===n?void 0:n.getColor();return{color:rr.getRGBAString(i)}}catch(o){return console.error("Failed to extract fill-style, ".concat(o.message)),{color:null}}}}),Object.defineProperty(this,et,{writable:!0,value:function(e){try{var t,r=Array.isArray(e)?null===(t=e[0])||void 0===t?void 0:t.getStroke():null===e||void 0===e?void 0:e.getStroke(),n=null===r||void 0===r?void 0:r.getColor(),i=null===r||void 0===r?void 0:r.getLineDash(),o=null===r||void 0===r?void 0:r.getWidth();return{color:rr.getRGBAString(n),dash:i,width:o}}catch(a){return console.error("Failed to extract stroke-style, ".concat(a.message)),{color:null,dash:null,width:null}}}}),Object.defineProperty(this,tt,{writable:!0,value:function(e){var t,r,n,i=Array.isArray(e)?null===(t=e[0])||void 0===t?void 0:t.getImage():null===e||void 0===e?void 0:e.getImage(),o=null===i||void 0===i||null===(r=i.getFill)||void 0===r?void 0:r.call(i),a=null===i||void 0===i||null===(n=i.getStroke)||void 0===n?void 0:n.call(i);if(!o||!a)return{fillColor:null,strokeColor:null,strokeWidth:null,dash:null};var l=o.getColor(),c=a.getColor(),u=a.getWidth(),s=a.getLineDash();return{fillColor:rr.getRGBAString(l),strokeColor:rr.getRGBAString(c),strokeWidth:u,dash:s}}}),this.extractFeatureStyleInfo=function(e){try{var t=null===e||void 0===e?void 0:e.getStyle();return t?{fillStyle:(0,c.Z)(rr,$e)[$e](t),strokeStyle:(0,c.Z)(rr,et)[et](t),imageStyle:(0,c.Z)(rr,tt)[tt](t)}:{fillStyle:null,strokeStyle:null,imageStyle:null}}catch(r){return console.error("Failed to extract feature-style. Error: ".concat(r)),{fillStyle:null,strokeStyle:null,imageStyle:null}}},Object.defineProperty(this,rt,{writable:!0,value:function(){rr.getAllDrawnFeatures().filter((function(e){return"Arrow"!==e.get("DRAW_METHOD")})).forEach((function(e){var t=e.getStyle(),r=(0,c.Z)(rr,Le)[Le](e);Array.isArray(t)?t[0].setText(r):t.setText(r),e.setStyle(t)}))}}),Object.defineProperty(this,nt,{writable:!0,value:function(){return new b.Z({wrapX:!1})}}),Object.defineProperty(this,it,{writable:!0,value:function(e){return new y.Z({source:e,layerType:"system",zIndex:5e3,caption:"Draw model"})}}),this.getAllDrawnFeatures=function(){return(0,c.Z)(rr,N)[N].getFeatures().filter((function(e){return!0===e.get("USER_DRAWN")}))},Object.defineProperty(this,ot,{writable:!0,value:function(){(0,c.Z)(rr,M)[M].getView().fit((0,c.Z)(rr,W)[W],{size:(0,c.Z)(rr,M)[M].getSize(),padding:[20,20,20,20],maxZoom:7})}}),Object.defineProperty(this,at,{writable:!0,value:function(){(0,c.Z)(rr,q)[q].un("drawstart",(0,c.Z)(rr,st)[st]),(0,c.Z)(rr,q)[q].un("drawend",(0,c.Z)(rr,dt)[dt]),(0,c.Z)(rr,q)[q].un("drawabort",(0,c.Z)(rr,vt)[vt]),(0,c.Z)(rr,M)[M].un("pointermove",(0,c.Z)(rr,bt)[bt]),(0,c.Z)(rr,N)[N].un("addfeature",(0,c.Z)(rr,gt)[gt]),document.removeEventListener("keyup",(0,c.Z)(rr,wt)[wt]),(0,c.Z)(rr,ut)[ut]()}}),Object.defineProperty(this,lt,{writable:!0,value:function(e){e&&(0,c.Z)(rr,ct)[ct](e),(0,c.Z)(rr,q)[q].on("drawstart",(0,c.Z)(rr,st)[st]),(0,c.Z)(rr,q)[q].on("drawend",(0,c.Z)(rr,dt)[dt]),(0,c.Z)(rr,q)[q].on("drawabort",(0,c.Z)(rr,vt)[vt]),(0,c.Z)(rr,N)[N].on("addfeature",(0,c.Z)(rr,gt)[gt]),document.addEventListener("keyup",(0,c.Z)(rr,wt)[wt])}}),Object.defineProperty(this,ct,{writable:!0,value:function(e){(0,c.Z)(rr,le)[le]=e.handleDrawStart||null,(0,c.Z)(rr,ce)[ce]=e.handleDrawEnd||null,(0,c.Z)(rr,ue)[ue]=e.handlePointerMove||null,(0,c.Z)(rr,se)[se]=e.handleAddFeature||null,(0,c.Z)(rr,le)[le]&&(0,c.Z)(rr,q)[q].on("drawstart",(0,c.Z)(rr,le)[le]),(0,c.Z)(rr,ce)[ce]&&(0,c.Z)(rr,q)[q].on("drawend",(0,c.Z)(rr,ce)[ce]),(0,c.Z)(rr,ue)[ue]&&(0,c.Z)(rr,M)[M].on("pointermove",(0,c.Z)(rr,ue)[ue]),(0,c.Z)(rr,se)[se]&&(0,c.Z)(rr,N)[N].on("addfeature",(0,c.Z)(rr,se)[se])}}),Object.defineProperty(this,ut,{writable:!0,value:function(){(0,c.Z)(rr,le)[le]&&(0,c.Z)(rr,q)[q].un("drawstart",(0,c.Z)(rr,le)[le]),(0,c.Z)(rr,ce)[ce]&&(0,c.Z)(rr,q)[q].un("drawend",(0,c.Z)(rr,ce)[ce]),(0,c.Z)(rr,ue)[ue]&&(0,c.Z)(rr,M)[M].on("pointermove",(0,c.Z)(rr,ue)[ue]),(0,c.Z)(rr,se)[se]&&(0,c.Z)(rr,N)[N].un("addfeature",(0,c.Z)(rr,se)[se]),(0,c.Z)(rr,le)[le]=null,(0,c.Z)(rr,ce)[ce]=null,(0,c.Z)(rr,ue)[ue]=null,(0,c.Z)(rr,se)[se]=null}}),Object.defineProperty(this,st,{writable:!0,value:function(e){(0,c.Z)(rr,M)[M].on("pointermove",(0,c.Z)(rr,bt)[bt]);var t=e.feature;t.on("change",(0,c.Z)(rr,yt)[yt]),t.setStyle((0,c.Z)(rr,Ye)[Ye]())}}),Object.defineProperty(this,dt,{writable:!0,value:function(e){var t;(0,c.Z)(rr,ht)[ht]();var r=e.feature;r.set("USER_DRAWN",!0),r.set("DRAW_METHOD",null===(t=(0,c.Z)(rr,q)[q])||void 0===t?void 0:t.get("DRAW_METHOD")),r.set("TEXT_SETTINGS",(0,c.Z)(rr,J)[J]),r.setStyle((0,c.Z)(rr,Ie)[Ie](r)),(0,c.Z)(rr,M)[M].un("pointermove",(0,c.Z)(rr,bt)[bt])}}),Object.defineProperty(this,Zt,{writable:!0,value:function(e){e.features.forEach((function(e){"Arrow"===e.get("DRAW_METHOD")&&(0,c.Z)(rr,ft)[ft](e)})),(0,c.Z)(rr,rt)[rt]()}}),Object.defineProperty(this,ft,{writable:!0,value:function(e){try{var t=e.getStyle()[0].getStroke();e.setStyle((0,c.Z)(rr,Re)[Re](e,{strokeStyle:{color:t.getColor()},fillStyle:{color:t.getColor()}}))}catch(r){console.error("Failed to set arrow style. Error: ".concat(r))}}}),Object.defineProperty(this,vt,{writable:!0,value:function(){(0,c.Z)(rr,ht)[ht]()}}),Object.defineProperty(this,ht,{writable:!0,value:function(){(0,c.Z)(rr,U)[U].innerHTML=null,(0,c.Z)(rr,X)[X]=null,(0,c.Z)(rr,V)[V].setPosition((0,c.Z)(rr,X)[X])}}),Object.defineProperty(this,yt,{writable:!0,value:function(e){var t=e.target,r=(0,c.Z)(rr,He)[He](t,"TOOLTIP");(0,c.Z)(rr,U)[U].innerHTML=(0,c.Z)(rr,K)[K]?r:null,(0,c.Z)(rr,V)[V].setPosition((0,c.Z)(rr,X)[X])}}),Object.defineProperty(this,bt,{writable:!0,value:function(e){(0,c.Z)(rr,X)[X]=(0,c.Z)(rr,K)[K]?e.coordinate:null}}),Object.defineProperty(this,gt,{writable:!0,value:function(e){(0,c.Z)(rr,be)[be]({subject:"drawModel.featureAdded",payLoad:e.feature})}}),Object.defineProperty(this,wt,{writable:!0,value:function(e){27===e.keyCode&&(0,c.Z)(rr,q)[q].removeLastPoint()}}),Object.defineProperty(this,pt,{writable:!0,value:function(){return(0,c.Z)(rr,Q)[Q]?(0,c.Z)(rr,Dt)[Dt]():(0,c.Z)(rr,$)[$]?(0,c.Z)(rr,At)[At]():(0,c.Z)(rr,te)[te]?(0,c.Z)(rr,kt)[kt]():((0,c.Z)(rr,he)[he]&&(0,c.Z)(rr,Ht)[Ht](),(0,c.Z)(rr,ve)[ve]&&(0,c.Z)(rr,xt)[xt](),void((0,c.Z)(rr,q)[q]&&((0,c.Z)(rr,M)[M].removeInteraction((0,c.Z)(rr,q)[q]),(0,c.Z)(rr,at)[at](),(0,c.Z)(rr,q)[q]=null,(0,c.Z)(rr,M)[M].clickLock.delete("coreDrawModel"),(0,c.Z)(rr,M)[M].snapHelper.delete("coreDrawModel"))))}}),Object.defineProperty(this,Et,{writable:!0,value:function(e,t){return{status:"FAILED",message:"Set:er failed. The set:er only accepts ".concat(typeof e,", and was provided ").concat(typeof t)}}}),Object.defineProperty(this,St,{writable:!0,value:function(e){var t=(0,c.Z)(rr,M)[M].getFeaturesAtPixel(e.pixel).filter((function(e){return e.get("USER_DRAWN")}));if(t.length>0){var r=t[0];rr.removeFeature(r)}}}),Object.defineProperty(this,mt,{writable:!0,value:function(e){var t=(0,c.Z)(rr,M)[M].getFeaturesAtPixel(e.pixel).filter((function(e){return e.get("USER_DRAWN")})),r=t.length>0?t[0]:null;(0,c.Z)(rr,Ot)[Ot](r),(0,c.Z)(rr,be)[be]({subject:"drawModel.modify.mapClick",payLoad:r})}}),Object.defineProperty(this,Ot,{writable:!0,value:function(e){(0,c.Z)(rr,ee)[ee]&&(0,c.Z)(rr,ee)[ee].set("EDIT_ACTIVE",!1),e&&!e.get("EDIT_ACTIVE")&&e.set("EDIT_ACTIVE",!0),(0,c.Z)(rr,ee)[ee]=e}}),Object.defineProperty(this,Pt,{writable:!0,value:function(){(0,c.Z)(rr,M)[M].snapHelper.delete("coreDrawModel"),(0,c.Z)(rr,M)[M].snapHelper.add("coreDrawModel")}}),Object.defineProperty(this,Tt,{writable:!0,value:function(){(0,c.Z)(rr,Q)[Q]=!0,(0,c.Z)(rr,M)[M].clickLock.add("coreDrawModel"),(0,c.Z)(rr,M)[M].on("singleclick",(0,c.Z)(rr,St)[St])}}),Object.defineProperty(this,Dt,{writable:!0,value:function(){(0,c.Z)(rr,M)[M].clickLock.delete("coreDrawModel"),(0,c.Z)(rr,M)[M].un("singleclick",(0,c.Z)(rr,St)[St]),(0,c.Z)(rr,Q)[Q]=!1}}),Object.defineProperty(this,jt,{writable:!0,value:function(e){var t;(0,c.Z)(rr,$)[$]=!0,(0,c.Z)(rr,M)[M].on("singleclick",(0,c.Z)(rr,mt)[mt]),(0,c.Z)(rr,Ut)[Ut](),(0,c.Z)(rr,M)[M].clickLock.add("coreDrawModel"),(null!==(t=e.modifyEnabled)&&void 0!==t?t:(0,c.Z)(rr,oe)[oe])&&(0,c.Z)(rr,Ft)[Ft]()}}),Object.defineProperty(this,At,{writable:!0,value:function(){(0,c.Z)(rr,M)[M].clickLock.delete("coreDrawModel"),(0,c.Z)(rr,M)[M].un("singleclick",(0,c.Z)(rr,mt)[mt]),(0,c.Z)(rr,Xt)[Xt](),(0,c.Z)(rr,Bt)[Bt](),(0,c.Z)(rr,It)[It](),(0,c.Z)(rr,$)[$]=!1}}),Object.defineProperty(this,Ft,{writable:!0,value:function(){return(0,c.Z)(rr,$)[$]?((0,c.Z)(rr,It)[It](),(0,c.Z)(rr,ie)[ie]=new Z.Z({source:(0,c.Z)(rr,N)[N]}),(0,c.Z)(rr,ie)[ie].on("modifyend",(0,c.Z)(rr,Zt)[Zt]),(0,c.Z)(rr,M)[M].addInteraction((0,c.Z)(rr,ie)[ie]),(0,c.Z)(rr,M)[M].clickLock.add("coreDrawModel"),(0,c.Z)(rr,M)[M].snapHelper.add("coreDrawModel"),{status:"SUCCESS",message:"Modify-interaction enabled."}):{status:"FAILED",message:"Modify-interaction could not be enabled. Edit has to be enabled before enabling."}}}),Object.defineProperty(this,It,{writable:!0,value:function(){(0,c.Z)(rr,ie)[ie]&&((0,c.Z)(rr,M)[M].removeInteraction((0,c.Z)(rr,ie)[ie]),(0,c.Z)(rr,ie)[ie].un("modifyend",(0,c.Z)(rr,Zt)[Zt]),(0,c.Z)(rr,M)[M].snapHelper.delete("coreDrawModel"),(0,c.Z)(rr,ie)[ie]=null)}}),Object.defineProperty(this,Ct,{writable:!0,value:function(e){var t;(0,c.Z)(rr,re)[re]=new f.Z({layers:[(0,c.Z)(rr,G)[G]]}),(0,c.Z)(rr,re)[re].on("select",(0,c.Z)(rr,Wt)[Wt]),(0,c.Z)(rr,M)[M].addInteraction((0,c.Z)(rr,re)[re]),(0,c.Z)(rr,te)[te]=!0,(null!==(t=e.translateEnabled)&&void 0!==t?t:(0,c.Z)(rr,ae)[ae])&&(0,c.Z)(rr,Lt)[Lt](),(0,c.Z)(rr,M)[M].clickLock.add("coreDrawModel"),(0,c.Z)(rr,M)[M].snapHelper.add("coreDrawModel")}}),Object.defineProperty(this,Lt,{writable:!0,value:function(){if(!(0,c.Z)(rr,te)[te])return{status:"FAILED",message:"Translate-interaction could not be enabled. Move has to be enabled before enabling."};(0,c.Z)(rr,ne)[ne]=new v.Z({features:(0,c.Z)(rr,re)[re].getFeatures()}),(0,c.Z)(rr,M)[M].addInteraction((0,c.Z)(rr,ne)[ne]),(0,c.Z)(rr,Pt)[Pt]()}}),Object.defineProperty(this,kt,{writable:!0,value:function(){(0,c.Z)(rr,M)[M].removeInteraction((0,c.Z)(rr,re)[re]),(0,c.Z)(rr,re)[re].un("select",(0,c.Z)(rr,Wt)[Wt]),(0,c.Z)(rr,Mt)[Mt](),(0,c.Z)(rr,re)[re]=null,(0,c.Z)(rr,te)[te]=!1,(0,c.Z)(rr,M)[M].clickLock.delete("coreDrawModel"),(0,c.Z)(rr,M)[M].snapHelper.delete("coreDrawModel"),rr.refreshDrawLayer()}}),Object.defineProperty(this,Mt,{writable:!0,value:function(){(0,c.Z)(rr,ne)[ne]&&((0,c.Z)(rr,M)[M].removeInteraction((0,c.Z)(rr,ne)[ne]),(0,c.Z)(rr,ne)[ne]=null)}}),Object.defineProperty(this,Rt,{writable:!0,value:function(){(0,c.Z)(rr,M)[M].clickLock.add("coreDrawModel"),(0,c.Z)(rr,ve)[ve]=!0,(0,c.Z)(rr,M)[M].on("singleclick",(0,c.Z)(rr,Gt)[Gt])}}),Object.defineProperty(this,xt,{writable:!0,value:function(){(0,c.Z)(rr,M)[M].clickLock.delete("coreDrawModel"),(0,c.Z)(rr,M)[M].un("singleclick",(0,c.Z)(rr,Gt)[Gt]),(0,c.Z)(rr,ve)[ve]=!1}}),Object.defineProperty(this,_t,{writable:!0,value:function(){(0,c.Z)(rr,M)[M].clickLock.add("coreDrawModel"),(0,c.Z)(rr,M)[M].on("singleclick",(0,c.Z)(rr,Nt)[Nt]),(0,c.Z)(rr,he)[he]=!0}}),Object.defineProperty(this,Ht,{writable:!0,value:function(){(0,c.Z)(rr,M)[M].clickLock.delete("coreDrawModel"),(0,c.Z)(rr,M)[M].un("singleclick",(0,c.Z)(rr,Nt)[Nt]),(0,c.Z)(rr,he)[he]=!0}}),this.drawSelectedFeature=function(e){try{var t=new L.Z({geometry:e.getGeometry().clone()});t.setId(Math.random().toString(36).substring(2,15)),t.set("USER_DRAWN",!0),t.set("DRAW_METHOD",e.get("DRAW_METHOD")),t.set("TEXT_SETTINGS",e.get("TEXT_SETTINGS")),t.setStyle((0,c.Z)(rr,Ie)[Ie](t)),(0,c.Z)(rr,N)[N].addFeature(t)}catch(r){console.error("Failed to add selected feature. Error: ".concat(r))}},Object.defineProperty(this,Nt,{writable:!0,value:function(){var e=(0,o.Z)(d().mark((function e(t){var r,n,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,new Promise((function(e){return(0,k.handleClick)(t,t.map,e)}));case 3:if(r=e.sent,n=r.features,1===(i=n.filter((function(e){return e.getGeometry()}))).length&&rr.drawSelectedFeature(i[0]),!(i.length>1)){e.next=9;break}return e.abrupt("return",(0,c.Z)(rr,be)[be]({subject:"drawModel.select.click",payLoad:i}));case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error("Failed to select features in drawModel... Error: ".concat(e.t0));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()}),Object.defineProperty(this,Gt,{writable:!0,value:function(e){if(0!==(0,c.Z)(rr,fe)[fe]){var t=new L.Z({geometry:new O.Z(e.coordinate,(0,c.Z)(rr,fe)[fe])});(0,c.Z)(rr,N)[N].addFeature(t),(0,c.Z)(rr,dt)[dt]({feature:t})}}}),Object.defineProperty(this,Wt,{writable:!0,value:function(e){(0,c.Z)(rr,be)[be]({subject:"drawModel.move.select",payLoad:e.selected}),e.deselected.forEach((function(e){e.setStyle((0,c.Z)(rr,Ie)[Ie](e))}))}}),Object.defineProperty(this,Ut,{writable:!0,value:function(){(0,c.Z)(rr,N)[N].forEachFeature((function(e){e.on("propertychange",(0,c.Z)(rr,Vt)[Vt])}))}}),Object.defineProperty(this,Bt,{writable:!0,value:function(){(0,c.Z)(rr,N)[N].forEachFeature((function(e){e.un("propertychange",(0,c.Z)(rr,Vt)[Vt])}))}}),Object.defineProperty(this,Vt,{writable:!0,value:function(e){return rr.refreshDrawLayer()}}),Object.defineProperty(this,Xt,{writable:!0,value:function(){(0,c.Z)(rr,N)[N].forEachFeature((function(e){e.get("EDIT_ACTIVE")&&e.set("EDIT_ACTIVE",!1)}))}}),Object.defineProperty(this,Kt,{writable:!0,value:function(){(0,c.Z)(rr,q)[q]&&rr.toggleDrawInteraction((0,c.Z)(rr,q)[q].get("DRAW_METHOD"))}}),Object.defineProperty(this,zt,{writable:!0,value:function(e){switch(e){case"Arrow":return"LineString";case"Rectangle":return"Circle";case"Text":return"Point";default:return e}}}),Object.defineProperty(this,Yt,{writable:!0,value:function(e,t){var r;return!!["Circle","Rectangle"].includes(e)||null!==(r=t.freehand)&&void 0!==r&&r}}),Object.defineProperty(this,Jt,{writable:!0,value:function(e){try{var t=JSON.parse(e.get("CIRCLE_CENTER")),r=parseFloat(e.get("CIRCLE_RADIUS"));e.setGeometry(new O.Z(t,r))}catch(n){console.error("Failed to create 'real' Circle geometry from supplied feature, error: ".concat(n))}}}),Object.defineProperty(this,qt,{writable:!0,value:function(e,t){var r=e.getExtent(),n=(0,C.getCenter)(r),i=null!==t&&void 0!==t?t:(0,C.getWidth)(r)/2;return new O.Z(n,i)}}),this.reBindFeaturePropertyListener=function(){(0,c.Z)(rr,Bt)[Bt](),(0,c.Z)(rr,Ut)[Ut]()},this.refreshFeaturesTextStyle=function(){(0,c.Z)(rr,rt)[rt]()},this.addFeature=function(e,t){var r,n=null!==(r=null===t||void 0===t?void 0:t.silent)&&void 0!==r&&r;try{e.get("CIRCLE_RADIUS")&&(0,c.Z)(rr,Jt)[Jt](e);var i=e.get("EXTRACTED_STYLE");i&&e.setStyle((0,c.Z)(rr,Ie)[Ie](e,i)),(0,c.Z)(rr,N)[N].addFeature(e),!n&&(0,c.Z)(rr,be)[be]({subject:"drawModel.featureAdded",payLoad:e})}catch(o){console.error("Error while adding feature: ".concat(o)),(0,c.Z)(rr,be)[be]({subject:"drawModel.addFeature.error",payLoad:o})}},this.addKmlFeatures=function(e){var t=(0,c.Z)(rr,q)[q]?(0,c.Z)(rr,q)[q].get("DRAW_METHOD"):null;t&&rr.toggleDrawInteraction(""),e.forEach((function(e){!e.get("DRAW_METHOD")&&e.set("DRAW_METHOD",e.get("geometryType")||e.getGeometry().getType());var t=e.get("EXTRACTED_STYLE"),r=e.get("TEXT_SETTINGS"),n=e.get("USER_DRAWN");"string"===typeof t&&e.set("EXTRACTED_STYLE",JSON.parse(t)),"string"===typeof r&&e.set("TEXT_SETTINGS",JSON.parse(r)),"string"===typeof n&&e.set("USER_DRAWN",JSON.parse(n)),rr.addFeature(e,{silent:!0})})),(0,c.Z)(rr,rt)[rt](),t&&rr.toggleDrawInteraction(t)},this.toggleKmlFeaturesVisibility=function(e){(0,c.Z)(rr,N)[N].getFeatures().forEach((function(t){if(t.get("KML_ID")===e){var r,n=null!==(r=t.get("HIDDEN"))&&void 0!==r&&r;t.set("HIDDEN",!n),t.setStyle((0,c.Z)(rr,Ie)[Ie](t))}}))},this.toggleKmlFeaturesTextVisibility=function(e){(0,c.Z)(rr,N)[N].getFeatures().forEach((function(t){if(t.get("KML_ID")===e){var r,n=null===(r=t.get("SHOW_TEXT"))||void 0===r||r;t.set("SHOW_TEXT",!n),t.setStyle((0,c.Z)(rr,Ie)[Ie](t))}}))},this.removeKmlFeaturesById=function(e){(0,c.Z)(rr,N)[N].getFeatures().forEach((function(t){t.get("KML_ID")===e&&(0,c.Z)(rr,N)[N].removeFeature(t)}))},this.duplicateFeature=function(e){try{var t=(0,c.Z)(rr,Qt)[Qt](e),r=t.getGeometry()instanceof O.Z,n=r?t.getGeometry().getRadius():0;r&&t.setGeometry((0,T.Bb)(t.getGeometry()));var i=(0,c.Z)(rr,x)[x].writeFeatureObject(t),o=(0,c.Z)(rr,$t)[$t](),a=(0,I.Z)(i,o,140),l=(0,c.Z)(rr,x)[x].readGeometry(a.geometry);r?t.setGeometry((0,c.Z)(rr,qt)[qt](l,n)):t.setGeometry(l),t.set("EDIT_ACTIVE",!1),rr.addFeature(t),rr.refreshDrawLayer()}catch(u){console.error("Could not duplicate the supplied feature. Error: ".concat(u))}},this.translateSelectedFeatures=function(e,t){(0,c.Z)(rr,re)[re].getFeatures().forEach((function(r){try{var n=r.getGeometry()instanceof O.Z,i=n?r.getGeometry().getRadius():0;n&&r.setGeometry((0,T.Bb)(r.getGeometry()));var o=(0,c.Z)(rr,x)[x].writeFeatureObject(r),a=(0,I.Z)(o,e/1e3,t),l=(0,c.Z)(rr,x)[x].readGeometry(a.geometry);n?r.setGeometry((0,c.Z)(rr,qt)[qt](l,i)):r.setGeometry(l)}catch(u){console.error("Failed to translate selected features. Error: ".concat(u))}}))},Object.defineProperty(this,Qt,{writable:!0,value:function(e){var t=e.clone(),r="Arrow"===e.get("DRAW_METHOD")?e.getStyle().map((function(e){return e.clone()})):Array.isArray(e.getStyle())?e.getStyle()[0].clone():e.getStyle().clone();return t.setStyle(r),t}}),Object.defineProperty(this,$t,{writable:!0,value:function(){var e=(0,c.Z)(rr,M)[M].getView().calculateExtent((0,c.Z)(rr,M)[M].getSize());return 5e-5*Math.sqrt((0,C.getArea)(e))}}),this.removeFeature=function(e){!0!==e.get("HIDDEN")&&((0,c.Z)(rr,N)[N].removeFeature(e),(0,c.Z)(rr,be)[be]({subject:"drawModel.featureRemoved",payLoad:e}))},this.getRGBAString=function(e){return e?Array.isArray(e)?"rgba(".concat(e[0],",").concat(e[1],",").concat(e[2],",").concat(e[3],")"):"object"===typeof e?"rgba(".concat(e.r,",").concat(e.g,",").concat(e.b,",").concat(e.a,")"):e:null},this.parseColorString=function(e){try{if("string"!==typeof e||e.length<7)return{};if(7===e.length&&e.startsWith("#")){var t=e.match(/\w\w/g).map((function(e){return parseInt(e,16)})),r=(0,i.Z)(t,3);return{r:r[0],g:r[1],b:r[2],a:1}}var n=/\(([^)]+)\)/.exec(e.replace(/\s/g,""))[1].split(",");return{r:parseFloat(n[0]),g:parseFloat(n[1]),b:parseFloat(n[2]),a:parseFloat(n[3])}}catch(o){return console.error("Color-string parsing failed: ".concat(o)),null}},this.toggleDrawInteraction=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((0,c.Z)(rr,pt)[pt](),e&&""!==e){if("Delete"===e)return(0,c.Z)(rr,Tt)[Tt](t);if("Edit"===e)return(0,c.Z)(rr,jt)[jt](t);if("Move"===e)return(0,c.Z)(rr,Ct)[Ct](t);if("Select"===e)return(0,c.Z)(rr,_t)[_t](t);"Circle"===e&&(0,c.Z)(rr,Rt)[Rt]();var r=(0,c.Z)(rr,zt)[zt](e),n=(0,c.Z)(rr,Yt)[Yt](e,t);(0,c.Z)(rr,q)[q]=new h.ZP({source:(0,c.Z)(rr,N)[N],type:r,freehand:n,stopClick:!0,geometryFunction:"Rectangle"===e?(0,h.dO)():null,style:(0,c.Z)(rr,Ye)[Ye]()}),(0,c.Z)(rr,q)[q].set("DRAW_METHOD",e),(0,c.Z)(rr,lt)[lt](t),(0,c.Z)(rr,M)[M].addInteraction((0,c.Z)(rr,q)[q]),(0,c.Z)(rr,M)[M].clickLock.add("coreDrawModel"),(0,c.Z)(rr,M)[M].snapHelper.add("coreDrawModel")}},this.zoomToCurrentExtent=function(){null!==(0,c.Z)(rr,W)[W]&&!1===(0,c.Z)(rr,W)[W].map(Number.isFinite).includes(!1)&&(0,c.Z)(rr,ot)[ot]((0,c.Z)(rr,W)[W])},this.removeDrawnFeatures=function(){var e=rr.getAllDrawnFeatures();return e.filter((function(e){return!0!==e.get("HIDDEN")})).forEach((function(e){(0,c.Z)(rr,N)[N].removeFeature(e)})),(0,c.Z)(rr,W)[W]=(0,c.Z)(rr,N)[N].getExtent(),(0,c.Z)(rr,be)[be]({subject:"drawModel.featuresRemoved",payLoad:e}),{status:"SUCCESS",removedFeatures:e}},this.setLayer=function(e){return null!==(0,c.Z)(rr,q)[q]?(console.warn("The layer cannot be changed. The draw interaction is currently active. Disable the draw interaction before changing layer."),{status:"FAILED",message:"Disable draw to change layer."}):((0,c.Z)(rr,R)[R]=e,(0,c.Z)(rr,Se)[Se](),(0,c.Z)(rr,W)[W]=(0,c.Z)(rr,N)[N].getExtent(),{status:"SUCCESS",message:"Layer changed to ".concat(e)})},this.setShowDrawTooltip=function(e){return"boolean"!==typeof e?(0,c.Z)(rr,Et)[Et]((0,c.Z)(rr,K)[K],e):((0,c.Z)(rr,K)[K]=e,{status:"SUCCESS",message:"Draw tooltip is now ".concat(e?"shown":"hidden")})},this.setDrawStyleSettings=function(e){var t=e.fillColor,r=e.strokeColor,i=(0,n.Z)((0,n.Z)({},e),{},{fillColor:"string"!==typeof t?rr.getRGBAString(t):t,strokeColor:"string"!==typeof r?rr.getRGBAString(r):r});(0,c.Z)(rr,Y)[Y]=i,(0,c.Z)(rr,Kt)[Kt]()},this.refreshDrawLayer=function(){(0,c.Z)(rr,N)[N].forEachFeature((function(e){"Arrow"===e.get("DRAW_METHOD")?(0,c.Z)(rr,ft)[ft](e):e.setStyle((0,c.Z)(rr,Ie)[Ie](e))}))},this.setFeatureAttribute=function(e,t,r){e instanceof L.Z&&e.set(t,r)},this.setTextStyleSettings=function(e){(0,c.Z)(rr,J)[J]=e},this.setModifyActive=function(e){(0,c.Z)(rr,oe)[oe]=e,e?(0,c.Z)(rr,Ft)[Ft]():(0,c.Z)(rr,It)[It]()},this.setTranslateActive=function(e){(0,c.Z)(rr,ae)[ae]=e,e?(0,c.Z)(rr,Lt)[Lt]():(0,c.Z)(rr,Mt)[Mt]()},this.setMeasurementSettings=function(e){(0,c.Z)(rr,z)[z]=e,(0,c.Z)(rr,rt)[rt]()},this.setCircleRadius=function(e){(0,c.Z)(rr,fe)[fe]=parseInt(e),Number.isNaN((0,c.Z)(rr,fe)[fe])&&((0,c.Z)(rr,fe)[fe]=0)},this.getMeasurementSettings=function(){return(0,c.Z)(rr,z)[z]},this.getCurrentLayerName=function(){return(0,c.Z)(rr,R)[R]},this.getCurrentVectorSource=function(){return(0,c.Z)(rr,N)[N]},this.getCurrentExtent=function(){return(0,c.Z)(rr,W)[W]},this.getModifyActive=function(){return!!(0,c.Z)(rr,ie)[ie]},this.getTranslateActive=function(){return!!(0,c.Z)(rr,ne)[ne]},this.getShowDrawTooltip=function(){return(0,c.Z)(rr,K)[K]},this.getDrawStyleSettings=function(){return(0,c.Z)(rr,Y)[Y]},this.getTextStyleSettings=function(){return(0,c.Z)(rr,J)[J]},this.getCircleRadius=function(){return(0,c.Z)(rr,fe)[fe]},!t.map||!t.layerName)return(0,c.Z)(this,Ee)[Ee]();(0,c.Z)(this,M)[M]=t.map,(0,c.Z)(this,R)[R]=t.layerName,(0,c.Z)(this,x)[x]=new F.Z({featureProjection:(0,c.Z)(this,M)[M].getView().getProjection()}),(0,c.Z)(this,_)[_]=t.observer||null,(0,c.Z)(this,H)[H]=(0,c.Z)(this,ye)[ye](t),(0,c.Z)(this,z)[z]=null!==(r=t.measurementSettings)&&void 0!==r?r:(0,c.Z)(this,we)[we](),(0,c.Z)(this,Y)[Y]=null!==(a=t.drawStyleSettings)&&void 0!==a?a:(0,c.Z)(this,ge)[ge](),(0,c.Z)(this,J)[J]=null!==(u=t.textStyleSettings)&&void 0!==u?u:(0,c.Z)(this,pe)[pe](),(0,c.Z)(this,W)[W]=null,(0,c.Z)(this,q)[q]=null,(0,c.Z)(this,Q)[Q]=!1,(0,c.Z)(this,$)[$]=!1,(0,c.Z)(this,te)[te]=!1,(0,c.Z)(this,ie)[ie]=null,(0,c.Z)(this,oe)[oe]=null!==(s=t.modifyDefaultEnabled)&&void 0!==s&&s,(0,c.Z)(this,ne)[ne]=null,(0,c.Z)(this,ae)[ae]=null===(er=t.translateDefaultEnabled)||void 0===er||er,(0,c.Z)(this,re)[re]=null,(0,c.Z)(this,ee)[ee]=null,(0,c.Z)(this,K)[K]=null===(tr=t.showDrawTooltip)||void 0===tr||tr,(0,c.Z)(this,V)[V]=null,(0,c.Z)(this,X)[X]=null,(0,c.Z)(this,U)[U]=null,(0,c.Z)(this,B)[B]="position: relative; background: rgba(0, 0, 0, 0.5); border-radius: 4px; color: white; padding: 4px 8px; opacity: 0.7; white-space: nowrap;",(0,c.Z)(this,le)[le]=null,(0,c.Z)(this,ce)[ce]=null,(0,c.Z)(this,ue)[ue]=null,(0,c.Z)(this,se)[se]=null,(0,c.Z)(this,de)[de]="rgba(35,119,252,1)",(0,c.Z)(this,Ze)[Ze]="rgba(255,255,255,1)",(0,c.Z)(this,fe)[fe]=0,(0,c.Z)(this,he)[he]=!1,(0,c.Z)(this,Se)[Se](),(0,c.Z)(this,Ae)[Ae]()}));t.default=er}}]);
//# sourceMappingURL=4311.f74b5913.chunk.js.map