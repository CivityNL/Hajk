{"version":3,"file":"static/js/9044.d6ed1401.chunk.js","mappings":"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","sources":["plugins/LayerSwitcher/components/BreadCrumb.js","plugins/LayerSwitcher/components/BreadCrumbs.js"],"sourcesContent":["import React, { Component } from \"react\";\nimport CloseIcon from \"@mui/icons-material/Close\";\nimport VisibilityIcon from \"@mui/icons-material/Visibility\";\nimport VisibilityOffIcon from \"@mui/icons-material/VisibilityOff\";\nimport LaunchIcon from \"@mui/icons-material/Launch\";\nimport { Button, IconButton, Grid, Typography, Paper } from \"@mui/material\";\nimport CallMadeIcon from \"@mui/icons-material/CallMade\";\nimport { styled } from \"@mui/material/styles\";\nimport Popover from \"@mui/material/Popover\";\n\nconst StyledPaper = styled(Paper)(({ theme }) => ({\n  marginRight: theme.spacing(0.5),\n  border: `${theme.spacing(0.1)} solid ${theme.palette.divider}`,\n}));\n\nconst ContentGridContainer = styled(Grid)(({ theme }) => ({\n  padding: theme.spacing(1),\n}));\n\nconst TitleGridContainer = styled(Grid)(({ theme }) => ({\n  paddingLeft: theme.spacing(0.5),\n}));\n\nconst LinkContainer = styled(\"div\")(({ theme }) => ({\n  padding: theme.spacing(0.5),\n}));\n\nclass BreadCrumb extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      hidden: props.layer.getOpacity() === 0,\n      anchorEl: null,\n      popoverOpen: false,\n    };\n    this.chapters = this.findChapters(\n      this.props.layer.get(\"name\"),\n      this.props.chapters\n    );\n  }\n\n  setHidden = (e) => {\n    var o = e.target.getOpacity();\n    this.setState({\n      hidden: o === 0,\n    });\n  };\n\n  componentDidMount() {\n    this.props.layer.on(\"change:opacity\", this.setHidden);\n  }\n\n  componentWillUnmount() {\n    this.props.layer.un(\"change:opacity\", this.setHidden);\n  }\n\n  setLayerOpacity = (layer) => (event) => {\n    this.setState(\n      {\n        hidden: !this.state.hidden,\n      },\n      () => {\n        layer.setOpacity(this.state.hidden ? 0 : 1);\n      }\n    );\n  };\n\n  setLayerVisibility = (layer) => (event) => {\n    if (layer.get(\"visible\")) {\n      layer.setOpacity(1);\n      this.props.app.globalObserver.publish(\"layerswitcher.hideLayer\", layer);\n    }\n    layer.set(\"visible\", !layer.get(\"visible\"));\n  };\n\n  isOverflow(el) {\n    if (!el) return false;\n    let original = el.scrollLeft++;\n    let overflow = el.scrollLeft-- > original;\n    return overflow;\n  }\n\n  findChapters(id, chapters) {\n    if (!chapters) {\n      return [];\n    }\n    return chapters.reduce((chaptersWithLayer, chapter) => {\n      if (Array.isArray(chapter.layers)) {\n        if (chapter.layers.some((layerId) => layerId === id)) {\n          chaptersWithLayer = [...chaptersWithLayer, chapter];\n        }\n        if (chapter.chapters.length > 0) {\n          chaptersWithLayer = [\n            ...chaptersWithLayer,\n            ...this.findChapters(id, chapter.chapters),\n          ];\n        }\n      }\n      return chaptersWithLayer;\n    }, []);\n  }\n\n  renderChapterLinks() {\n    if (this.chapters && this.chapters.length > 0) {\n      if (this.chapters.length > 0) {\n        return (\n          <LinkContainer>\n            {this.chapters.map((chapter, i) => {\n              return (\n                <div key={i}>\n                  <Button\n                    size=\"small\"\n                    onClick={() => {\n                      this.setState({\n                        popoverOpen: false,\n                      });\n                      this.openInformative(chapter);\n                    }}\n                  >\n                    {chapter.header}\n                    <CallMadeIcon />\n                  </Button>\n                </div>\n              );\n            })}\n          </LinkContainer>\n        );\n      } else {\n        return null;\n      }\n    } else {\n      return null;\n    }\n  }\n\n  openInformative = (chapter) => {\n    const informativeWindow = this.props.app.windows.find(\n      (window) => window.type === \"informative\"\n    );\n    informativeWindow.props.custom.open(chapter);\n  };\n\n  handleClose = () => {\n    this.setState({\n      anchorEl: null,\n      popoverOpen: false,\n    });\n  };\n\n  renderChaptersPopover(target) {\n    this.setState({\n      anchorEl: target,\n      popoverOpen: true,\n    });\n  }\n\n  renderInformativeIcon() {\n    if (!this.props.chapters) {\n      return null;\n    }\n    if (this.chapters && this.chapters.length > 0) {\n      return (\n        <IconButton\n          size=\"small\"\n          onClick={(e) => {\n            this.chapters.length === 1\n              ? this.openInformative(this.chapters[0])\n              : this.renderChaptersPopover(e.target);\n          }}\n        >\n          <LaunchIcon />\n        </IconButton>\n      );\n    } else {\n      return null;\n    }\n  }\n\n  render() {\n    const { layer, title, type } = this.props;\n    const { hidden } = this.state;\n    return (\n      <StyledPaper square={type === \"flat\"} elevation={0}>\n        <ContentGridContainer\n          container\n          data-type=\"bread-crumb\"\n          justifyContent=\"space-between\"\n          alignItems=\"center\"\n        >\n          <Grid item>\n            <IconButton\n              size=\"small\"\n              onClick={this.setLayerOpacity(layer)}\n              aria-label=\"Visa/dölj lagret tillfälligt\"\n            >\n              {!hidden ? <VisibilityIcon /> : <VisibilityOffIcon />}\n            </IconButton>\n          </Grid>\n          {this.renderInformativeIcon()}\n          <TitleGridContainer item>\n            <Typography variant=\"body2\" noWrap>\n              {title}\n            </Typography>\n          </TitleGridContainer>\n          <Grid item>\n            <IconButton\n              size=\"small\"\n              onClick={this.setLayerVisibility(layer)}\n              aria-label=\"Ta bort lagret från kartan\"\n            >\n              <CloseIcon />\n            </IconButton>\n          </Grid>\n        </ContentGridContainer>\n        <Popover\n          id=\"simple-popper\"\n          open={this.state.popoverOpen}\n          anchorEl={this.state.anchorEl}\n          onClose={this.handleClose}\n          anchorOrigin={{\n            vertical: \"top\",\n            horizontal: \"center\",\n          }}\n          transformOrigin={{\n            vertical: \"bottom\",\n            horizontal: \"center\",\n          }}\n        >\n          {this.renderChapterLinks()}\n        </Popover>\n      </StyledPaper>\n    );\n  }\n}\n\nexport default BreadCrumb;\n","import React, { Component } from \"react\";\nimport BreadCrumb from \"./BreadCrumb.js\";\nimport { styled } from \"@mui/material/styles\";\nimport { useTheme } from \"@mui/material\";\nimport { useMediaQuery } from \"@mui/material\";\nimport Grid from \"@mui/material/Grid\";\nimport Divider from \"@mui/material/Divider\";\nimport Typography from \"@mui/material/Typography\";\nimport Button from \"@mui/material/Button\";\nimport IconButton from \"@mui/material/IconButton\";\nimport AddCircleIcon from \"@mui/icons-material/AddCircle\";\nimport RemoveCircleIcon from \"@mui/icons-material/RemoveCircle\";\nimport VisibilityOffIcon from \"@mui/icons-material/VisibilityOff\";\nimport ScrollMenu from \"react-horizontal-scrolling-menu\";\n\n// A HOC that pipes isMobile to the children. See this as a proposed\n// solution. It is not pretty, but if we move this to a separate file\n// we could use this HOC instead of the isMobile helper function in ../../utils/.\n// TODO: Move to some /hooks folder\nconst withIsMobile = () => (WrappedComponent) => (props) => {\n  const theme = useTheme();\n  const isMobile = useMediaQuery(theme.breakpoints.down(\"sm\"));\n  return <WrappedComponent {...props} isMobile={isMobile} />;\n};\n\nconst MobileRoot = styled(\"div\")(({ theme }) => ({\n  background: theme.palette.background.paper,\n  boxShadow: theme.shadows[24],\n  left: 0,\n  bottom: 0,\n  right: 0,\n  width: \"auto\",\n  zIndex: 2,\n}));\n\nconst MobileHeader = styled(\"div\")(({ theme }) => ({\n  padding: `6px ${theme.spacing(2)}`,\n  display: \"flex\",\n  alignItems: \"center\",\n  justifyContent: \"space-between\",\n}));\n\nconst BreadCrumbsContainerMobile = styled(\"div\")(({ theme }) => ({\n  maxHeight: \"300px\",\n  overflow: \"auto\",\n  [theme.breakpoints.down(\"sm\")]: {\n    maxHeight: \"110px\",\n  },\n}));\n\nconst BreadCrumbsContainer = styled(\"div\")(() => ({\n  position: \"absolute\",\n  left: 0,\n  right: 0,\n  bottom: 0,\n  zIndex: 2,\n}));\n\nconst MobileBreadCrumbWrapper = styled(\"div\")(({ theme }) => ({\n  width: \"100%\",\n  paddingLeft: theme.spacing(0.5),\n  paddingBottom: theme.spacing(0.5),\n}));\n\nclass BreadCrumbs extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      chapters: null,\n      visibleLayers: [],\n      open: false,\n    };\n    props.app.globalObserver.subscribe(\"informativeLoaded\", (chapters) => {\n      this.setState({\n        chapters: chapters,\n      });\n    });\n  }\n\n  bindLayerEvents = (visibleLayers) => (layer) => {\n    if (layer.get(\"visible\")) {\n      visibleLayers.push(layer);\n    }\n\n    this.setState({\n      visibleLayers: visibleLayers,\n    });\n\n    this.addedLayerBuffer = [];\n    this.removedLayerBuffer = [];\n\n    layer.on(\"change:visible\", (e) => {\n      const changedLayer = e.target;\n      setTimeout(() => {\n        var visibleLayers = [\n          ...this.state.visibleLayers,\n          ...this.addedLayerBuffer,\n        ];\n        visibleLayers = visibleLayers.filter((visibleLayer) => {\n          return !this.removedLayerBuffer.some(\n            (removedLayer) => visibleLayer === removedLayer\n          );\n        });\n        this.setState({\n          visibleLayers: visibleLayers,\n        });\n        this.addedLayerBuffer = [];\n        this.removedLayerBuffer = [];\n      }, 0);\n\n      if (this.props.model.clearing) {\n        this.setState({\n          visibleLayers: [],\n        });\n      } else {\n        if (changedLayer.get(\"visible\")) {\n          this.addedLayerBuffer.push(changedLayer);\n        } else {\n          this.removedLayerBuffer.push(changedLayer);\n        }\n      }\n    });\n  };\n\n  getVisibleLayers() {\n    return this.props.map\n      .getLayers()\n      .getArray()\n      .filter((layer) => {\n        return layer.getVisible();\n      });\n  }\n\n  clear = () => {\n    this.props.app.clear();\n  };\n\n  componentDidMount() {\n    var visibleLayers = [];\n    if (this.props.map) {\n      this.props.map\n        .getLayers()\n        .getArray()\n        .forEach(this.bindLayerEvents(visibleLayers));\n    }\n  }\n\n  // Returns all active layers except background layers\n  getBreadCrumbCompatibleLayers = () => {\n    return this.state.visibleLayers.filter((layer) =>\n      [\"layer\", \"group\"].includes(layer.get(\"layerType\"))\n    );\n  };\n\n  toggle = () => {\n    this.setState({\n      open: !this.state.open,\n    });\n  };\n\n  renderMobile(layers) {\n    const { open } = this.state;\n    return (\n      <MobileRoot>\n        <MobileHeader>\n          <Typography>Innehåll i kartan</Typography>\n          <IconButton onClick={this.toggle} size=\"small\">\n            {open ? <RemoveCircleIcon /> : <AddCircleIcon />}\n          </IconButton>\n        </MobileHeader>\n        {open && <Divider />}\n        {!open ? null : (\n          <BreadCrumbsContainerMobile>\n            {layers.length > 0 ? (\n              <Grid\n                container\n                item\n                xs={12}\n                justifyContent=\"center\"\n                sx={{ marginTop: 1, marginBottom: 1 }}\n              >\n                <Button variant=\"contained\" onClick={this.clear}>\n                  Ta bort allt innehåll\n                  <VisibilityOffIcon sx={{ marginLeft: 2 }} />\n                </Button>\n              </Grid>\n            ) : (\n              <Typography>\n                Använd sökfunktionen eller innehållsmenyn för att visa\n                information i kartan.\n              </Typography>\n            )}\n            {layers.map((layer, index) => (\n              <MobileBreadCrumbWrapper key={`${layer.get(\"caption\")}-${index}`}>\n                <BreadCrumb\n                  title={layer.get(\"caption\")}\n                  layer={layer}\n                  chapters={this.state.chapters}\n                  app={this.props.app}\n                />\n              </MobileBreadCrumbWrapper>\n            ))}\n          </BreadCrumbsContainerMobile>\n        )}\n      </MobileRoot>\n    );\n  }\n\n  renderDesktop(layers) {\n    const breadCrumbs = layers.map((layer, index) => (\n      <BreadCrumb\n        key={`${layer.get(\"caption\")}-${index}`}\n        title={layer.get(\"caption\")}\n        layer={layer}\n        chapters={this.state.chapters}\n        app={this.props.app}\n      />\n    ));\n    return (\n      <BreadCrumbsContainer>\n        <ScrollMenu ref=\"scrollMenu\" data={breadCrumbs} alignCenter={false} />\n      </BreadCrumbsContainer>\n    );\n  }\n\n  render() {\n    // We've never been mobile, huh?...\n    //const isMobile = this.state.width < 600;\n    const layers = this.getBreadCrumbCompatibleLayers();\n    if (this.props.isMobile) {\n      // We don't want to show the breadcrumbs-summary if there are no layers\n      return layers.length > 0 ? this.renderMobile(layers) : null;\n    } else {\n      return this.renderDesktop(layers);\n    }\n  }\n}\n\nexport default withIsMobile()(BreadCrumbs);\n"],"names":["StyledPaper","styled","Paper","theme","marginRight","spacing","border","palette","divider","ContentGridContainer","Grid","padding","TitleGridContainer","paddingLeft","LinkContainer","BreadCrumb","props","setHidden","e","o","target","getOpacity","setState","hidden","setLayerOpacity","layer","event","state","setOpacity","setLayerVisibility","get","app","globalObserver","publish","set","openInformative","chapter","windows","find","window","type","custom","open","handleClose","anchorEl","popoverOpen","chapters","findChapters","this","on","un","el","original","scrollLeft","id","reduce","chaptersWithLayer","Array","isArray","layers","some","layerId","length","map","i","size","onClick","header","renderChaptersPopover","title","square","elevation","container","justifyContent","alignItems","item","renderInformativeIcon","variant","noWrap","onClose","anchorOrigin","vertical","horizontal","transformOrigin","renderChapterLinks","Component","WrappedComponent","MobileRoot","background","paper","boxShadow","shadows","left","bottom","right","width","zIndex","MobileHeader","display","BreadCrumbsContainerMobile","maxHeight","overflow","breakpoints","down","BreadCrumbsContainer","position","MobileBreadCrumbWrapper","paddingBottom","BreadCrumbs","bindLayerEvents","visibleLayers","push","addedLayerBuffer","removedLayerBuffer","changedLayer","setTimeout","filter","visibleLayer","removedLayer","model","clearing","clear","getBreadCrumbCompatibleLayers","includes","toggle","subscribe","getLayers","getArray","getVisible","forEach","xs","sx","marginTop","marginBottom","marginLeft","index","breadCrumbs","ref","data","alignCenter","isMobile","renderMobile","renderDesktop","useTheme","useMediaQuery"],"sourceRoot":""}