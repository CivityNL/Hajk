"use strict";(self.webpackChunkhajk_client=self.webpackChunkhajk_client||[]).push([[5392,541,1960],{95392:function(e,t,r){r.r(t),r.d(t,{default:function(){return l}});var n=r(93433),a=r(43144),c=r(15671),u=r(30541),o=r(92810),i=r(21960),s=r(35077),l=(0,a.Z)((function e(t){var r=this;(0,c.Z)(this,e),this.bindListenForSearchResultClick=function(){r.app.globalObserver.subscribe("search.featureClicked.documentHandlerSearchResultClicked",(function(e){r.localObserver.publish("document-link-clicked",{documentName:e.properties.documentFileName,headerIdentifier:e.properties.headerIdentifier})}))},this.createDocumentCollectionsToSearch=function(e){return e.reduce((function(e,t){return[].concat((0,n.Z)(e),[{documentFileName:t.documentFileName,documentTitle:t.documentTitle,features:[].concat((0,n.Z)(r.getFeatures(t.chapters,t)),[r.getSpecialTitleFeature(t)])}])}),[])},this.getFeatures=function(e,t){return e.reduce((function(e,a){return a.chapters&&(e=[].concat((0,n.Z)(e),(0,n.Z)(r.getFeatures(a.chapters,t)))),e=[].concat((0,n.Z)(e),[r.createFeatureFromChapter(a,t)])}),[])},this.getSpecialTitleFeature=function(e){var t={header:e.documentTitle,geoids:[],headerIdentifier:e.documentTitle,documentTitle:e.documentTitle,documentFileName:e.documentFileName},r="".concat(e.documentTitle).concat(Math.floor(1e3*Math.random()));return{type:"Feature",isTitleFeature:!0,geometry:null,searchValues:[e.title],id:r,onClickName:"documentHandlerSearchResultClicked",properties:t,get:function(e){return t[e]},getGeometry:function(){return null},getId:function(){return r},setStyle:function(){return null}}},this.createFeatureFromChapter=function(e,t){var r=[];e.header&&r.push(e.header),e.keywords&&e.keywords.length>0&&(r=[].concat((0,n.Z)(r),(0,n.Z)(e.keywords)));var a={header:e.header,geoids:e.geoids,headerIdentifier:e.headerIdentifier,documentTitle:t.documentTitle,documentFileName:t.documentFileName},c="".concat(e.headerIdentifier).concat(Math.floor(1e3*Math.random()));return{type:"Feature",geometry:null,isTitleFeature:!1,searchValues:r,id:c,onClickName:"documentHandlerSearchResultClicked",properties:a,get:function(e){return a[e]},getGeometry:function(){return null},getId:function(){return c},setStyle:function(){return null}}},this.implementSearchInterface=function(){return{getResults:r.getResults,getFunctionality:r.getFunctionality}},this.getFunctionality=function(){return null},this.getResults=function(e,t){return r.matchSearch=new u.default(t),r.searchOptions=t,r.getDocumentHandlerResults(e)},this.getDocumentHandlerResults=function(e){return new Promise((function(t,n){""===e&&t({featureCollections:[],errors:[]});var a=r.searchOptions.getPossibleCombinations?r.globalSearchModel.getPossibleSearchCombinations(e):[(0,i.splitAndTrimOnCommas)(e)];a=r.decodePotentialSpecialCharsFromFeatureProps(a),t({featureCollections:r.getFeatureCollectionsForMatchingDocuments(a),errors:[]})}))},this.decodePotentialSpecialCharsFromFeatureProps=function(e){return e.map((function(e){return e.map((function(e){return(0,s.decodeCommas)(e)}))}))},this.getSearchFields=function(e){return e.reduce((function(e,t){return t.matchedSearchValues.length>0&&(e=[].concat((0,n.Z)(e),(0,n.Z)(r.getMockedSearchFieldForChapter(t)))),e}),[])},this.getMatchedFeatures=function(e,t){var a=r.searchOptions.initiator;return e.features.reduce((function(c,u){if("search"===a){if(u.isTitleFeature)return c;u.searchValues.push(e.documentTitle)}return"autocomplete"!==a||u.isTitleFeature||(u.searchValues=u.searchValues.filter((function(t){return t!==e.documentTitle}))),u.matchedSearchValues=r.getMatchedSearchValues(t,u.searchValues),u.matchedSearchValues.length>0?[].concat((0,n.Z)(c),[u]):c}),[])},this.createFeatureCollection=function(e,t,r){return{value:{status:"fulfilled",type:"FeatureCollection",crs:{type:null,properties:{name:null}},features:e,numberMatched:e.length,numberReturned:e.length,timeStamp:(new Date).toISOString(),totalFeatures:e.length},source:{id:r.documentTitle||r.documentFileName,caption:r.documentTitle||r.documentFileName,displayFields:["header"],searchFields:(0,n.Z)(t)},origin:"DOCUMENT"}},this.getFeatureCollectionsForMatchingDocuments=function(e){return r.documentCollections.reduce((function(t,a){var c=r.getMatchedFeatures(a,e),u=r.getSearchFields(c),o=r.createFeatureCollection(c,u,a);return o?[].concat((0,n.Z)(t),[o]):t}),[])},this.getMockedSearchFieldForChapter=function(e){return e.matchedSearchValues.reduce((function(t,r){var a=(0,o.Z)();return e.properties[a]=r,[].concat((0,n.Z)(t),[a])}),[])},this.getAllMatchedSearchValues=function(e,t){var n=new Set;return r.getMatched(e,t).forEach((function(e){n.add(e)})),n},this.getMatchedSearchValues=function(e,t){var a=new Set;return e.some((function(e){return e.every((function(e){var c=r.getAllMatchedSearchValues(e,t);return a=new Set([].concat((0,n.Z)(a),(0,n.Z)(c))),c.size>0}))}))?Array.from(a):[]},this.getMatched=function(e,t){return t.reduce((function(t,a){return r.matchSearch.compare(e,a)?[].concat((0,n.Z)(t),[a]):t}),[])},this.globalSearchModel=t.globalSearchModel,this.documentCollections=this.createDocumentCollectionsToSearch(t.allDocuments),this.localObserver=t.localObserver,this.app=t.app,this.bindListenForSearchResultClick()}))},30541:function(e,t,r){r.r(t),r.d(t,{default:function(){return c}});var n=r(43144),a=r(15671),c=(0,n.Z)((function e(t){var r=this;(0,a.Z)(this,e),this.getMatchRegexp=function(e){var t=r.searchOptions,n=t.wildcardAtEnd,a=t.wildcardAtStart,c=t.matchCase?"g":"gi";return a&&!n?new RegExp(".*".concat(e,"$"),c):!a&&n?new RegExp("^".concat(e,".*"),c):a&&n?new RegExp("".concat(e),c):new RegExp("^".concat(e,"$"),c)},this.escapeSpecialChars=function(e){return e.replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")},this.compare=function(e,t){var n=r.escapeSpecialChars(e);return r.getMatchRegexp(n).test(t)},this.searchOptions=t}))},21960:function(e,t,r){r.r(t),r.d(t,{flattenChaptersTree:function(){return i},getStringArray:function(){return u},hasSubMenu:function(){return o},splitAndTrimOnCommas:function(){return c}});var n=r(93433),a=r(1413),c=function(e){return e.split(",").map((function(e){return e.trim()}))},u=function(e){return c(e).join(" ").split(" ")},o=function(e){return e.menu&&e.menu.length>0},i=function e(t){return t.reduce((function(t,r){if(r.header){var c=(0,a.Z)({},r);c.chapters=[],t=[].concat((0,n.Z)(t),[c])}return r.chapters&&r.chapters.length>0?[].concat((0,n.Z)(t),(0,n.Z)(e(r.chapters))):t}),[])}},92810:function(e,t,r){var n;r.d(t,{Z:function(){return d}});var a=new Uint8Array(16);function c(){if(!n&&!(n="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(a)}var u=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var o=function(e){return"string"===typeof e&&u.test(e)},i=[],s=0;s<256;++s)i.push((s+256).toString(16).substr(1));var l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(i[e[t+0]]+i[e[t+1]]+i[e[t+2]]+i[e[t+3]]+"-"+i[e[t+4]]+i[e[t+5]]+"-"+i[e[t+6]]+i[e[t+7]]+"-"+i[e[t+8]]+i[e[t+9]]+"-"+i[e[t+10]]+i[e[t+11]]+i[e[t+12]]+i[e[t+13]]+i[e[t+14]]+i[e[t+15]]).toLowerCase();if(!o(r))throw TypeError("Stringified UUID is invalid");return r};var d=function(e,t,r){var n=(e=e||{}).random||(e.rng||c)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(var a=0;a<16;++a)t[r+a]=n[a];return t}return l(n)}}}]);
//# sourceMappingURL=5392.8fe32adc.chunk.js.map